

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.5.2. Field selectors and TypeApplications &mdash; Glasgow Haskell Compiler 9.2.5 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.5 User&#39;s Guide"
          href="../_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.5.3. Record field disambiguation" href="disambiguate_record_fields.html" />
    <link rel="prev" title="6.5.1. Traditional record syntax" href="traditional_record_syntax.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">2. Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runghc.html">4. Using runghc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">5. Using GHC</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../exts.html">6. Language extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">6.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax.html">6.2. Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="import_export.html">6.3. Import and export</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">6.4. Types</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="records.html">6.5. Records</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="traditional_record_syntax.html">6.5.1. Traditional record syntax</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.5.2. Field selectors and <code class="docutils literal notranslate"><span class="pre">TypeApplications</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#field-selectors-for-haskell98-style-data-constructors">6.5.2.1. Field selectors for Haskell98-style data constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-selectors-for-gadt-constructors">6.5.2.2. Field selectors for GADT constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-selectors-for-pattern-synonyms">6.5.2.3. Field selectors for pattern synonyms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="disambiguate_record_fields.html">6.5.3. Record field disambiguation</a></li>
<li class="toctree-l3"><a class="reference internal" href="duplicate_record_fields.html">6.5.4. Duplicate record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_selectors.html">6.5.5. Field selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="record_puns.html">6.5.6. Record puns</a></li>
<li class="toctree-l3"><a class="reference internal" href="record_wildcards.html">6.5.7. Record wildcards</a></li>
<li class="toctree-l3"><a class="reference internal" href="hasfield.html">6.5.8. Record field selector polymorphism</a></li>
<li class="toctree-l3"><a class="reference internal" href="overloaded_record_dot.html">6.5.9. Overloaded record dot</a></li>
<li class="toctree-l3"><a class="reference internal" href="overloaded_record_update.html">6.5.10. Overloaded record update</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deriving.html">6.6. Deriving mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns.html">6.7. Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="typeclasses.html">6.8. Class and instances declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="literals.html">6.9. Literals</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraints.html">6.10. Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_signatures.html">6.11. Type signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings.html">6.12. Bindings and generalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="template_haskell.html">6.13. Template Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="strict.html">6.14. Bang patterns and Strict Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html">6.15. Parallel and Concurrent</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">6.16. Unboxed types and primitive operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffi.html">6.17. Foreign function interface (FFI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="safe_haskell.html">6.18. Safe Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">6.19. Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="pragmas.html">6.20. Pragmas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventlog-formats.html">15. Eventlog encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../exts.html"><span class="section-number">6. </span>Language extensions</a> &raquo;</li>
        
          <li><a href="records.html"><span class="section-number">6.5. </span>Records</a> &raquo;</li>
        
      <li><span class="section-number">6.5.2. </span>Field selectors and <code class="docutils literal notranslate"><span class="pre">TypeApplications</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/exts/field_selectors_and_type_applications.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="field-selectors-and-typeapplications">
<span id="field-selectors-and-type-applications"></span><h1><span class="section-number">6.5.2. </span>Field selectors and <code class="docutils literal notranslate"><span class="pre">TypeApplications</span></code><a class="headerlink" href="#field-selectors-and-typeapplications" title="Permalink to this heading">¶</a></h1>
<p>Field selectors can be used in conjunction with <a class="reference internal" href="type_applications.html#extension-TypeApplications"><code class="xref std std-extension docutils literal notranslate"><span class="pre">TypeApplications</span></code></a>,
as described in <a class="reference internal" href="type_applications.html#visible-type-application"><span class="std std-ref">Visible type application</span></a>. The type of a field selector
is constructed by using the surrounding definition as context. This section
provides a specification for how this construction works. We will explain it
by considering three different forms of field selector, each of which is a
minor variation of the same general theme.</p>
<section id="field-selectors-for-haskell98-style-data-constructors">
<h2><span class="section-number">6.5.2.1. </span>Field selectors for Haskell98-style data constructors<a class="headerlink" href="#field-selectors-for-haskell98-style-data-constructors" title="Permalink to this heading">¶</a></h2>
<p>Consider the following example:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MkT</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">unT</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="kt">Either</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This data type uses a Haskell98-style declaration. The only part of this data
type that is not Haskell98 code is <code class="docutils literal notranslate"><span class="pre">unT</span></code>, whose type uses higher-rank
polymorphism (<a class="reference internal" href="rank_polymorphism.html#arbitrary-rank-polymorphism"><span class="std std-ref">Arbitrary-rank polymorphism</span></a>). To construct the type of
the <code class="docutils literal notranslate"><span class="pre">unT</span></code> field selector, we will assemble the following:</p>
<ol class="arabic simple">
<li><p>The type variables quantified by the data type head
(<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">a</span> <span class="pre">b.</span> <span class="pre">&lt;...&gt;</span></code>).</p></li>
<li><p>The return type of the data constructor
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">T</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">-&gt;</span> <span class="pre">&lt;...&gt;</span></code>). By virtue of this being a Haskell98-style
declaration, the order of type variables in the return type will always
coincide with the order in which they are quantified.</p></li>
<li><p>The type of the field
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">a</span></code>).</p></li>
</ol>
<p>The final type of <code class="docutils literal notranslate"><span class="pre">unT</span></code> is therefore
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">a</span> <span class="pre">b.</span> <span class="pre">T</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">-&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">a</span></code>. As a result, one way to use
<code class="docutils literal notranslate"><span class="pre">unT</span></code> with <a class="reference internal" href="type_applications.html#extension-TypeApplications"><code class="xref std std-extension docutils literal notranslate"><span class="pre">TypeApplications</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">unT</span> <span class="pre">&#64;Int</span> <span class="pre">&#64;Bool</span> <span class="pre">(MkT</span> <span class="pre">(Right</span> <span class="pre">1))</span> <span class="pre">&#64;Char</span></code>.</p>
</section>
<section id="field-selectors-for-gadt-constructors">
<h2><span class="section-number">6.5.2.2. </span>Field selectors for GADT constructors<a class="headerlink" href="#field-selectors-for-gadt-constructors" title="Permalink to this heading">¶</a></h2>
<p>Field selectors for GADT constructors (<a class="reference internal" href="gadt_syntax.html#gadt-style"><span class="std std-ref">Declaring data types with explicit constructor signatures</span></a>) are slightly more
involved. Consider the following example:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">G</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
<span class="w">  </span><span class="kt">MkG</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="ow">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">unG1</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="kt">Either</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">unG2</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">G</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="kt">Maybe</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MkG</span></code> GADT constructor has two records, <code class="docutils literal notranslate"><span class="pre">unG1</span></code> and <code class="docutils literal notranslate"><span class="pre">unG2</span></code>.
However, only <code class="docutils literal notranslate"><span class="pre">unG1</span></code> can be used as a top-level field selector. <code class="docutils literal notranslate"><span class="pre">unG2</span></code>
cannot because it is a “hidden” selector (see <a class="reference internal" href="existential_quantification.html#existential-records"><span class="std std-ref">Record Constructors</span></a>); its
type mentions a free variable <code class="docutils literal notranslate"><span class="pre">n</span></code> that does not appear in the result type
<code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">a</span> <span class="pre">(Maybe</span> <span class="pre">x)</span></code>. On the other hand, the only free type variables in the type
of <code class="docutils literal notranslate"><span class="pre">unG1</span></code> are <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code>, so <code class="docutils literal notranslate"><span class="pre">unG1</span></code> is fine to use as a top-level
function.</p>
<p>To construct the type of the <code class="docutils literal notranslate"><span class="pre">unG1</span></code> field selector, we will assemble
the following:</p>
<ol class="arabic">
<li><p>The subset of type variables quantified by the GADT constructor that are
mentioned in the return type. Note that the order of these variables follows
the same principles as in <a class="reference internal" href="type_applications.html#scopedsort"><span class="std std-ref">Ordering of specified variables</span></a>.
If the constructor explicitly quantifies its type variables at the beginning
of the type, then the field selector type will quantify them in the same
order (modulo any variables that are dropped due to not being mentioned in
the return type).
If the constructor implicitly quantifies its type variables, then the field
selector type will quantify them in the left-to-right order that they appear
in the field itself.</p>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">MkG</span></code> explicitly quantifies <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">x</span> <span class="pre">n</span> <span class="pre">a.</span></code>, and of
those type variables, <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> are mentioned in the return type.
Therefore, the type of <code class="docutils literal notranslate"><span class="pre">unG1</span></code> starts as <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">x</span> <span class="pre">a.</span> <span class="pre">&lt;...&gt;</span></code>.
If <code class="docutils literal notranslate"><span class="pre">MkG</span></code> had not used an explicit <code class="docutils literal notranslate"><span class="pre">forall</span></code>, then they would have instead
been ordered as <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">a</span> <span class="pre">x.</span> <span class="pre">&lt;...&gt;</span></code>, since <code class="docutils literal notranslate"><span class="pre">a</span></code> appears to the left of
<code class="docutils literal notranslate"><span class="pre">x</span></code> in the field type.</p>
</li>
<li><p>The GADT return type
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">G</span> <span class="pre">a</span> <span class="pre">(Maybe</span> <span class="pre">x)</span> <span class="pre">-&gt;</span> <span class="pre">...</span></code>).</p></li>
<li><p>The type of the field
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">-&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">(a,</span> <span class="pre">x)</span></code>).</p></li>
</ol>
<p>The final type of <code class="docutils literal notranslate"><span class="pre">unG1</span></code> is therefore
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">x</span> <span class="pre">a.</span> <span class="pre">G</span> <span class="pre">a</span> <span class="pre">(Maybe</span> <span class="pre">x)</span> <span class="pre">-&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">(a,</span> <span class="pre">x)</span></code>. As a result, one
way to use <code class="docutils literal notranslate"><span class="pre">unG1</span></code> with <a class="reference internal" href="type_applications.html#extension-TypeApplications"><code class="xref std std-extension docutils literal notranslate"><span class="pre">TypeApplications</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">unG1</span> <span class="pre">&#64;Int</span> <span class="pre">&#64;Bool</span> <span class="pre">(MkG</span> <span class="pre">(Right</span> <span class="pre">(True,</span> <span class="pre">42))</span> <span class="pre">())</span> <span class="pre">&#64;Char</span></code>.</p>
</section>
<section id="field-selectors-for-pattern-synonyms">
<h2><span class="section-number">6.5.2.3. </span>Field selectors for pattern synonyms<a class="headerlink" href="#field-selectors-for-pattern-synonyms" title="Permalink to this heading">¶</a></h2>
<p>Certain record pattern synonyms (<a class="reference internal" href="pattern_synonyms.html#record-patsyn"><span class="std std-ref">Record Pattern Synonyms</span></a>) can give rise to
top-level field selectors. Consider the following example:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">pattern</span><span class="w"> </span><span class="kt">P</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="kt">Read</span><span class="w"> </span><span class="n">a</span><span class="w"></span>
<span class="w">          </span><span class="ow">=&gt;</span><span class="w"> </span><span class="n">forall</span><span class="w"> </span><span class="n">n</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<span class="w">          </span><span class="ow">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">forall</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="kt">Either</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Bool</span><span class="p">))</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">G</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="kt">Maybe</span><span class="w"> </span><span class="kt">Bool</span><span class="p">)</span><span class="w"></span>
<span class="nf">pattern</span><span class="w"> </span><span class="kt">P</span><span class="w"> </span><span class="p">{</span><span class="n">unP1</span><span class="p">,</span><span class="w"> </span><span class="n">unP2</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">MkG</span><span class="w"> </span><span class="n">unP1</span><span class="w"> </span><span class="n">unP2</span><span class="w"></span>
</pre></div>
</div>
<p>We can only make field selectors for pattern synonym records that do not
mention any existential type variables whatsoever in their types, per
<a class="reference internal" href="pattern_synonyms.html#record-patsyn"><span class="std std-ref">Record Pattern Synonyms</span></a>. (This is a stronger requirement than for GADT records,
whose types can mention existential type variables provided that they are also
mentioned in the return type.) We can see that <code class="docutils literal notranslate"><span class="pre">unP2</span></code> cannot be used as a
top-level field selector since its type has a free type variable <code class="docutils literal notranslate"><span class="pre">n</span></code>, which
is existential. <code class="docutils literal notranslate"><span class="pre">unP1</span></code> is fine, on the other hand, as its type only has one
free variable, the universal type variable <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<p>To construct the type of the <code class="docutils literal notranslate"><span class="pre">unP1</span></code> field selector, we will assemble
the following:</p>
<ol class="arabic simple">
<li><p>The universal type variables
(<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">a.</span> <span class="pre">&lt;...&gt;</span></code>).</p></li>
<li><p>The required constraints
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">Read</span> <span class="pre">a</span> <span class="pre">=&gt;</span> <span class="pre">&lt;...&gt;</span></code>).</p></li>
<li><p>The pattern synonym return type
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">G</span> <span class="pre">a</span> <span class="pre">(Maybe</span> <span class="pre">Bool)</span> <span class="pre">-&gt;</span> <span class="pre">&lt;...&gt;</span></code>).</p></li>
<li><p>The type of the field
(<code class="docutils literal notranslate"><span class="pre">&lt;...&gt;</span> <span class="pre">-&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">(a,</span> <span class="pre">Bool)</span></code>).</p></li>
</ol>
<p>The final type of <code class="docutils literal notranslate"><span class="pre">unP1</span></code> is therefore
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">a.</span> <span class="pre">Read</span> <span class="pre">a</span> <span class="pre">=&gt;</span> <span class="pre">G</span> <span class="pre">a</span> <span class="pre">(Maybe</span> <span class="pre">Bool)</span> <span class="pre">-&gt;</span> <span class="pre">forall</span> <span class="pre">e.</span> <span class="pre">Either</span> <span class="pre">e</span> <span class="pre">(a,</span> <span class="pre">Bool)</span></code>. As a
result, one way to use <code class="docutils literal notranslate"><span class="pre">unP1</span></code> with <a class="reference internal" href="type_applications.html#extension-TypeApplications"><code class="xref std std-extension docutils literal notranslate"><span class="pre">TypeApplications</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">unP1</span> <span class="pre">&#64;Double</span> <span class="pre">(MkG</span> <span class="pre">(Right</span> <span class="pre">(4.5,</span> <span class="pre">True))</span> <span class="pre">())</span> <span class="pre">&#64;Char</span></code>.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="disambiguate_record_fields.html" class="btn btn-neutral float-right" title="6.5.3. Record field disambiguation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="traditional_record_syntax.html" class="btn btn-neutral float-left" title="6.5.1. Traditional record syntax" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>