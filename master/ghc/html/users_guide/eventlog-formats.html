

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15. Eventlog encodings &mdash; Glasgow Haskell Compiler 9.2.5 User&#39;s Guide</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 9.2.5 User&#39;s Guide"
          href="_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="16. Care and feeding of your GHC User’s Guide" href="editing-guide.html" />
    <link rel="prev" title="14. Known bugs and infelicities" href="bugs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Glasgow Haskell Compiler
          

          
          </a>

          
            
            
              <div class="version">
                9.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">2. Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ghci.html">3. Using GHCi</a></li>
<li class="toctree-l1"><a class="reference internal" href="runghc.html">4. Using runghc</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">5. Using GHC</a></li>
<li class="toctree-l1"><a class="reference internal" href="exts.html">6. Language extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_ghc.html">7. Extending and using GHC as a Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiling.html">8. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug-info.html">9. Debugging compiled programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gone_wrong.html">10. What to do when something goes wrong</a></li>
<li class="toctree-l1"><a class="reference internal" href="hints.html">11. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">12. Other Haskell utility programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="win32-dlls.html">13. Running GHC on Win32 systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">14. Known bugs and infelicities</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">15. Eventlog encodings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#event-log-format">15.1. Event log format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-system-diagnostics">15.2. Runtime system diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#capability-sets">15.2.1. Capability sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment-information">15.2.2. Environment information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thread-and-scheduling-events">15.2.3. Thread and scheduling events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#garbage-collector-events">15.2.4. Garbage collector events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#heap-events-and-statistics">15.2.5. Heap events and statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spark-events">15.2.6. Spark events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capability-events">15.2.7. Capability events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-events">15.2.8. Task events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tracing-events">15.2.9. Tracing events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#heap-profiler-event-log-output">15.3. Heap profiler event log output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-event-types">15.3.1. Metadata event types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#beginning-of-sample-stream">15.3.1.1. Beginning of sample stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cost-centre-definitions">15.3.1.2. Cost centre definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#info-table-provenance-definitions">15.3.1.3. Info Table Provenance definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-event-types">15.3.1.4. Sample event types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cost-centre-break-down">15.3.1.5. Cost-centre break-down</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-break-down">15.3.1.6. String break-down</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-profiler-event-log-output">15.4. Time profiler event log output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#profile-begin-event">15.4.1. Profile begin event</a></li>
<li class="toctree-l3"><a class="reference internal" href="#profile-sample-event">15.4.2. Profile sample event</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#biographical-profile-sample-event">15.5. Biographical profile sample event</a></li>
<li class="toctree-l2"><a class="reference internal" href="#non-moving-gc-event-output">15.6. Non-moving GC event output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#non-moving-heap-census">15.6.1. Non-moving heap census</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ticky-counters">15.6.2. Ticky counters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="editing-guide.html">16. Care and feeding of your GHC User’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Glasgow Haskell Compiler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">15. </span>Eventlog encodings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/eventlog-formats.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="eventlog-encodings">
<span id="id1"></span><h1><span class="section-number">15. </span>Eventlog encodings<a class="headerlink" href="#eventlog-encodings" title="Permalink to this heading">¶</a></h1>
<p>This section documents the encodings of the events emitted to GHC’s
<a class="reference internal" href="runtime_control.html#rts-eventlog"><span class="std std-ref">event log</span></a>. These events can include information about the
thread scheduling events, garbage collection statistics, profiling information,
user-defined tracing events.</p>
<p>This section is intended for implementors of tooling which consume these events.
GHC ships with a C header file (<code class="docutils literal notranslate"><span class="pre">EventlogFormat.h</span></code>) which provides symbolic
names for the event type IDs described in this file.</p>
<section id="event-log-format">
<h2><span class="section-number">15.1. </span>Event log format<a class="headerlink" href="#event-log-format" title="Permalink to this heading">¶</a></h2>
<p>The log format is designed to be extensible: old tools should be
able to parse (but not necessarily understand all of) new versions
of the format, and new tools will be able to understand old log
files.</p>
<ul class="simple">
<li><p>The format is endian-independent: all values are represented in
big-endian order.</p></li>
<li><p>The format is extensible:</p>
<ul>
<li><p>The header describes each event type and its length.  Tools
that don’t recognise a particular event type can skip those events.</p></li>
<li><p>There is room for extra information in the event type
specification, which can be ignored by older tools.</p></li>
<li><p>Events can have extra information added, but existing fields
cannot be changed.  Tools should ignore extra fields at the
end of the event record.</p></li>
</ul>
</li>
</ul>
<p>The event-log stream begins with a header describing the event types present in
the file. The header is followed by the event records themselves, each of which
consist of a 64-bit timestamp</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>log : EVENT_HEADER_BEGIN
      EventType*
      EVENT_HEADER_END
      EVENT_DATA_BEGIN
      Event*
      EVENT_DATA_END

EventType :
      EVENT_ET_BEGIN
      Word16         -- unique identifier for this event
      Int16          -- &gt;=0  size of the event in bytes (minus the header)
                     -- -1   variable size
      Word32         -- length of the next field in bytes
      Word8*         -- string describing the event
      Word32         -- length of the next field in bytes
      Word8*         -- extra info (for future extensions)
      EVENT_ET_END

Event :
      Word16         -- event_type
      Word64         -- time (nanosecs)
      [Word16]       -- length of the rest (for variable-sized events only)
      ... extra event-specific info ...
</pre></div>
</div>
<p>There are two classes of event types:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>Fixed size</em>: All event records of a fixed-sized type are of the same
length, given in the header event-log header.</p></li>
<li><p><em>Variable size</em>: Each event record includes a length field.</p></li>
</ul>
</div></blockquote>
</section>
<section id="runtime-system-diagnostics">
<h2><span class="section-number">15.2. </span>Runtime system diagnostics<a class="headerlink" href="#runtime-system-diagnostics" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ThreadId</span> <span class="pre">~</span> <span class="pre">Word32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CapNo</span> <span class="pre">~</span> <span class="pre">Word16</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CapSetId</span> <span class="pre">~</span> <span class="pre">Word32</span></code></p></li>
</ul>
</div></blockquote>
<section id="capability-sets">
<h3><span class="section-number">15.2.1. </span>Capability sets<a class="headerlink" href="#capability-sets" title="Permalink to this heading">¶</a></h3>
<p>TODO</p>
</section>
<section id="environment-information">
<h3><span class="section-number">15.2.2. </span>Environment information<a class="headerlink" href="#environment-information" title="Permalink to this heading">¶</a></h3>
<p>These events are typically produced during program startup and describe the
environment which the program is being run in.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-RTS_IDENTIFIER">
<span class="sig-name descname"><span class="pre">RTS_IDENTIFIER</span></span><a class="headerlink" href="#event-type-RTS_IDENTIFIER" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>29</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>Capability set</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>Runtime system name and version.</p>
</dd>
</dl>
<p>Describes the name and version of the runtime system responsible for the
indicated capability set.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-PROGRAM_ARGS">
<span class="sig-name descname"><span class="pre">PROGRAM_ARGS</span></span><a class="headerlink" href="#event-type-PROGRAM_ARGS" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>30</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>Capability set</p>
</dd>
<dt class="field-even">Field [String]<span class="colon">:</span></dt>
<dd class="field-even"><p>The command-line arguments passed to the program</p>
</dd>
</dl>
<p>Describes the command-line used to start the program.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-PROGRAM_ENV">
<span class="sig-name descname"><span class="pre">PROGRAM_ENV</span></span><a class="headerlink" href="#event-type-PROGRAM_ENV" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>31</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>Capability set</p>
</dd>
<dt class="field-even">Field [String]<span class="colon">:</span></dt>
<dd class="field-even"><p>The environment variable name/value pairs. (TODO: encoding?)</p>
</dd>
</dl>
<p>Describes the environment variables present in the program’s environment.</p>
</dd></dl>

</section>
<section id="thread-and-scheduling-events">
<h3><span class="section-number">15.2.3. </span>Thread and scheduling events<a class="headerlink" href="#thread-and-scheduling-events" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CREATE_THREAD">
<span class="sig-name descname"><span class="pre">CREATE_THREAD</span></span><a class="headerlink" href="#event-type-CREATE_THREAD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>0</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
</dl>
<p>Marks the creation of a Haskell thread.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-RUN_THREAD">
<span class="sig-name descname"><span class="pre">RUN_THREAD</span></span><a class="headerlink" href="#event-type-RUN_THREAD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>1</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
</dl>
<p>The indicated thread has started running.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-STOP_THREAD">
<span class="sig-name descname"><span class="pre">STOP_THREAD</span></span><a class="headerlink" href="#event-type-STOP_THREAD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>2</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
<dt class="field-even">Field Word16<span class="colon">:</span></dt>
<dd class="field-even"><p>status</p>
<ul class="simple">
<li><p>1: HeapOverflow</p></li>
<li><p>2: StackOverflow</p></li>
<li><p>3: ThreadYielding</p></li>
<li><p>4: ThreadBlocked</p></li>
<li><p>5: ThreadFinished</p></li>
<li><p>6: ForeignCall</p></li>
<li><p>7: BlockedOnMVar</p></li>
<li><p>8: BlockedOnBlackHole</p></li>
<li><p>9: BlockedOnRead</p></li>
<li><p>10: BlockedOnWrite</p></li>
<li><p>11: BlockedOnDelay</p></li>
<li><p>12: BlockedOnSTM</p></li>
<li><p>13: BlockedOnDoProc</p></li>
<li><p>16: BlockedOnMsgThrowTo</p></li>
</ul>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id of thread being blocked on (only for some status
values)</p>
</dd>
</dl>
<p>The indicated thread has stopped running for the reason given by <code class="docutils literal notranslate"><span class="pre">status</span></code>.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-THREAD_RUNNABLE">
<span class="sig-name descname"><span class="pre">THREAD_RUNNABLE</span></span><a class="headerlink" href="#event-type-THREAD_RUNNABLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>3</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
</dl>
<p>The indicated thread is has been marked as ready to run.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-MIGRATE_THREAD">
<span class="sig-name descname"><span class="pre">MIGRATE_THREAD</span></span><a class="headerlink" href="#event-type-MIGRATE_THREAD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>4</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
<dt class="field-even">Field CapNo<span class="colon">:</span></dt>
<dd class="field-even"><p>capability</p>
</dd>
</dl>
<p>The indicated thread has been migrated to a new capability.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-THREAD_WAKEUP">
<span class="sig-name descname"><span class="pre">THREAD_WAKEUP</span></span><a class="headerlink" href="#event-type-THREAD_WAKEUP" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>8</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
<dt class="field-even">Field CapNo<span class="colon">:</span></dt>
<dd class="field-even"><p>other capability</p>
</dd>
</dl>
<p>The indicated thread has been woken up on another capability.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-THREAD_LABEL">
<span class="sig-name descname"><span class="pre">THREAD_LABEL</span></span><a class="headerlink" href="#event-type-THREAD_LABEL" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>44</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>thread id</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>label</p>
</dd>
</dl>
<p>The indicated thread has been given a label (e.g. with
<a class="reference external" href="./../libraries/base-4.16.4.0/GHC-Conc.html#v:labelThread">GHC.Conc.labelThread</a>).</p>
</dd></dl>

</section>
<section id="garbage-collector-events">
<span id="gc-events"></span><h3><span class="section-number">15.2.4. </span>Garbage collector events<a class="headerlink" href="#garbage-collector-events" title="Permalink to this heading">¶</a></h3>
<p>The following events mark various points of the lifecycle of a moving garbage
collection.</p>
<p>A typical garbage collection will look something like the following:</p>
<ol class="arabic simple">
<li><p>A capability realizes that it needs a garbage collection (e.g. as a result
of running out of nursery) and requests a garbage collection.  This is
marked by <a class="reference internal" href="#event-type-REQUEST_SEQ_GC"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">REQUEST_SEQ_GC</span></code></a> or <a class="reference internal" href="#event-type-REQUEST_PAR_GC"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">REQUEST_PAR_GC</span></code></a>.</p></li>
<li><p>As other capabilities reach yield points and suspend execution they emit
<a class="reference internal" href="#event-type-STOP_THREAD"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">STOP_THREAD</span></code></a> events.</p></li>
<li><p>When all capabilities have suspended execution, collection will begin,
marked by a <a class="reference internal" href="#event-type-GC_START"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_START</span></code></a> event.</p></li>
<li><p>As individual parallel GC threads commence with scavenging they will emit
<a class="reference internal" href="#event-type-GC_WORK"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_WORK</span></code></a> events.</p></li>
<li><p>If a parallel GC thread runs out of work it will emit a
<a class="reference internal" href="#event-type-GC_IDLE"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_IDLE</span></code></a> event. If it is later handed more work it will emit
another <a class="reference internal" href="#event-type-GC_WORK"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_WORK</span></code></a> event.</p></li>
<li><p>Eventually when scavenging has finished a <a class="reference internal" href="#event-type-GC_DONE"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_DONE</span></code></a> event
will be emitted by each GC thread.</p></li>
<li><p>A bit of book-keeping is performed.</p></li>
<li><p>A <a class="reference internal" href="#event-type-GC_END"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_END</span></code></a> event will be emitted marking the end of the GC cycle.</p></li>
<li><p>A <a class="reference internal" href="#event-type-HEAP_SIZE"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">HEAP_SIZE</span></code></a> event will be emitted giving the
current size of the heap, in bytes, calculated by how many megablocks
are allocated.</p></li>
<li><p>A <a class="reference internal" href="#event-type-BLOCKS_SIZE"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">BLOCKS_SIZE</span></code></a> event will be emitted giving the
current size of the heap, in bytes, calculated by how many blocks
are allocated.</p></li>
<li><p>A <a class="reference internal" href="#event-type-GC_STATS_GHC"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">GC_STATS_GHC</span></code></a> event will be emitted
containing various details of the collection and heap state.</p></li>
<li><p>In the case of a major collection, a
<a class="reference internal" href="#event-type-HEAP_LIVE"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">HEAP_LIVE</span></code></a> event will be emitted describing
the current size of the live on-heap data.</p></li>
<li><p>In the case of the <a class="reference internal" href="phases.html#ghc-flag-threaded"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-threaded</span></code></a> RTS, a
<a class="reference internal" href="#event-type-SPARK_COUNTERS"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">SPARK_COUNTERS</span></code></a> event will be emitted giving
details on how many sparks have been created, evaluated, and GC’d.</p></li>
<li><p>As mutator threads resume execution they will emit <a class="reference internal" href="#event-type-RUN_THREAD"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">RUN_THREAD</span></code></a>
events.</p></li>
<li><p>A <a class="reference internal" href="#event-type-MEM_RETURN"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">MEM_RETURN</span></code></a> event will be emitted containing details about
currently live mblocks, how many we think we need and whether we could return
excess to the OS.</p></li>
</ol>
<p>Note that in the case of the concurrent non-moving collector additional events
will be emitted during the concurrent phase of collection. These are described
in <a class="reference internal" href="#nonmoving-gc-events"><span class="std std-ref">Non-moving GC event output</span></a>.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_START">
<span class="sig-name descname"><span class="pre">GC_START</span></span><a class="headerlink" href="#event-type-GC_START" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>9</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A garbage collection pass has been started.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_END">
<span class="sig-name descname"><span class="pre">GC_END</span></span><a class="headerlink" href="#event-type-GC_END" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>10</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A garbage collection pass has been finished.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-REQUEST_SEQ_GC">
<span class="sig-name descname"><span class="pre">REQUEST_SEQ_GC</span></span><a class="headerlink" href="#event-type-REQUEST_SEQ_GC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>11</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A sequential garbage collection has been requested by a capability.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-REQUEST_PAR_GC">
<span class="sig-name descname"><span class="pre">REQUEST_PAR_GC</span></span><a class="headerlink" href="#event-type-REQUEST_PAR_GC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>12</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A parallel garbage collection has been requested by a capability.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_IDLE">
<span class="sig-name descname"><span class="pre">GC_IDLE</span></span><a class="headerlink" href="#event-type-GC_IDLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>20</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>An idle-time garbage collection has been started.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_WORK">
<span class="sig-name descname"><span class="pre">GC_WORK</span></span><a class="headerlink" href="#event-type-GC_WORK" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>21</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the start of concurrent scavenging.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_DONE">
<span class="sig-name descname"><span class="pre">GC_DONE</span></span><a class="headerlink" href="#event-type-GC_DONE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>22</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the end of concurrent scavenging.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_STATS_GHC">
<span class="sig-name descname"><span class="pre">GC_STATS_GHC</span></span><a class="headerlink" href="#event-type-GC_STATS_GHC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>53</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word16<span class="colon">:</span></dt>
<dd class="field-even"><p>generation of collection</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes copied</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>bytes of slop found</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes of fragmentation, the difference between total mblock size
and total block size. When all mblocks are full of full blocks,
this number is 0.</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>number of parallel garbage collection threads</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>maximum number of bytes copied by any single collector thread</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>total bytes copied by all collector threads</p>
</dd>
</dl>
<p>Report various information about a major collection.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-GC_GLOBAL_SYNC">
<span class="sig-name descname"><span class="pre">GC_GLOBAL_SYNC</span></span><a class="headerlink" href="#event-type-GC_GLOBAL_SYNC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>54</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>TODO</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-MEM_RETURN">
<span class="sig-name descname"><span class="pre">MEM_RETURN</span></span><a class="headerlink" href="#event-type-MEM_RETURN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>90</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word32<span class="colon">:</span></dt>
<dd class="field-even"><p>currently allocated mblocks</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of mblocks we would like to retain</p>
</dd>
<dt class="field-even">Field Word32<span class="colon">:</span></dt>
<dd class="field-even"><p>the number of mblocks which we returned to the OS</p>
</dd>
</dl>
<p>Report information about currently allocation megablocks and attempts
made to return them to the operating system. If your heap is fragmented
then the current value will be greater than needed value but returned will
be less than the difference between the two.</p>
</dd></dl>

</section>
<section id="heap-events-and-statistics">
<h3><span class="section-number">15.2.5. </span>Heap events and statistics<a class="headerlink" href="#heap-events-and-statistics" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_ALLOCATED">
<span class="sig-name descname"><span class="pre">HEAP_ALLOCATED</span></span><a class="headerlink" href="#event-type-HEAP_ALLOCATED" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>49</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>allocated bytes</p>
</dd>
</dl>
<p>A new chunk of heap has been allocated by the indicated capability set.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_SIZE">
<span class="sig-name descname"><span class="pre">HEAP_SIZE</span></span><a class="headerlink" href="#event-type-HEAP_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>50</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>heap size in bytes</p>
</dd>
</dl>
<p>Report the heap size, calculated by the number of megablocks currently allocated.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-BLOCKS_SIZE">
<span class="sig-name descname"><span class="pre">BLOCKS_SIZE</span></span><a class="headerlink" href="#event-type-BLOCKS_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>91</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>heap size in bytes</p>
</dd>
</dl>
<p>Report the heap size, calculated by the number of blocks currently allocated.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_LIVE">
<span class="sig-name descname"><span class="pre">HEAP_LIVE</span></span><a class="headerlink" href="#event-type-HEAP_LIVE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>51</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>heap size in bytes</p>
</dd>
</dl>
<p>Report the live heap size.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_INFO_GHC">
<span class="sig-name descname"><span class="pre">HEAP_INFO_GHC</span></span><a class="headerlink" href="#event-type-HEAP_INFO_GHC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>52</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapSetId<span class="colon">:</span></dt>
<dd class="field-odd"><p>heap capability set</p>
</dd>
<dt class="field-even">Field Word16<span class="colon">:</span></dt>
<dd class="field-even"><p>number of garbage collection generations</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>maximum heap size</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>allocation area size</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>MBlock size</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>Block size</p>
</dd>
</dl>
<p>Report various information about the heap configuration. Typically produced
during RTS initialization..</p>
</dd></dl>

</section>
<section id="spark-events">
<h3><span class="section-number">15.2.6. </span>Spark events<a class="headerlink" href="#spark-events" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CREATE_SPARK_THREAD">
<span class="sig-name descname"><span class="pre">CREATE_SPARK_THREAD</span></span><a class="headerlink" href="#event-type-CREATE_SPARK_THREAD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>15</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A thread has been created to perform spark evaluation.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_COUNTERS">
<span class="sig-name descname"><span class="pre">SPARK_COUNTERS</span></span><a class="headerlink" href="#event-type-SPARK_COUNTERS" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>34</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A periodic reporting of various statistics of spark evaluation.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_CREATE">
<span class="sig-name descname"><span class="pre">SPARK_CREATE</span></span><a class="headerlink" href="#event-type-SPARK_CREATE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>35</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A spark has been added to the spark pool.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_DUD">
<span class="sig-name descname"><span class="pre">SPARK_DUD</span></span><a class="headerlink" href="#event-type-SPARK_DUD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>36</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>TODO</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_OVERFLOW">
<span class="sig-name descname"><span class="pre">SPARK_OVERFLOW</span></span><a class="headerlink" href="#event-type-SPARK_OVERFLOW" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>37</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>TODO</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_RUN">
<span class="sig-name descname"><span class="pre">SPARK_RUN</span></span><a class="headerlink" href="#event-type-SPARK_RUN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>38</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Evaluation has started on a spark.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_STEAL">
<span class="sig-name descname"><span class="pre">SPARK_STEAL</span></span><a class="headerlink" href="#event-type-SPARK_STEAL" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>39</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word16<span class="colon">:</span></dt>
<dd class="field-odd"><p>capability from which the spark was stolen</p>
</dd>
</dl>
<p>A spark has been stolen from another capability for evaluation.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_FIZZLE">
<span class="sig-name descname"><span class="pre">SPARK_FIZZLE</span></span><a class="headerlink" href="#event-type-SPARK_FIZZLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>40</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A spark has been GC’d before being evaluated.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-SPARK_GC">
<span class="sig-name descname"><span class="pre">SPARK_GC</span></span><a class="headerlink" href="#event-type-SPARK_GC" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>41</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>An unevaluated spark has been garbage collected.</p>
</dd></dl>

</section>
<section id="capability-events">
<h3><span class="section-number">15.2.7. </span>Capability events<a class="headerlink" href="#capability-events" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CAP_CREATE">
<span class="sig-name descname"><span class="pre">CAP_CREATE</span></span><a class="headerlink" href="#event-type-CAP_CREATE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>45</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field CapNo<span class="colon">:</span></dt>
<dd class="field-odd"><p>the capability number</p>
</dd>
</dl>
<p>A capability has been started.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CAP_DELETE">
<span class="sig-name descname"><span class="pre">CAP_DELETE</span></span><a class="headerlink" href="#event-type-CAP_DELETE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>46</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A capability has been deleted.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CAP_DISABLE">
<span class="sig-name descname"><span class="pre">CAP_DISABLE</span></span><a class="headerlink" href="#event-type-CAP_DISABLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>47</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A capability has been disabled.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CAP_ENABLE">
<span class="sig-name descname"><span class="pre">CAP_ENABLE</span></span><a class="headerlink" href="#event-type-CAP_ENABLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>48</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>A capability has been enabled.</p>
</dd></dl>

</section>
<section id="task-events">
<h3><span class="section-number">15.2.8. </span>Task events<a class="headerlink" href="#task-events" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-TASK_CREATE">
<span class="sig-name descname"><span class="pre">TASK_CREATE</span></span><a class="headerlink" href="#event-type-TASK_CREATE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>55</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field TaskId<span class="colon">:</span></dt>
<dd class="field-odd"><p>task id</p>
</dd>
<dt class="field-even">Field CapNo<span class="colon">:</span></dt>
<dd class="field-even"><p>capability number</p>
</dd>
<dt class="field-odd">Field ThreadId<span class="colon">:</span></dt>
<dd class="field-odd"><p>TODO</p>
</dd>
</dl>
<p>Marks the creation of a task.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-TASK_MIGRATE">
<span class="sig-name descname"><span class="pre">TASK_MIGRATE</span></span><a class="headerlink" href="#event-type-TASK_MIGRATE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>56</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field TaskId<span class="colon">:</span></dt>
<dd class="field-odd"><p>task id</p>
</dd>
<dt class="field-even">Field CapNo<span class="colon">:</span></dt>
<dd class="field-even"><p>old capability</p>
</dd>
<dt class="field-odd">Field CapNo<span class="colon">:</span></dt>
<dd class="field-odd"><p>new capability</p>
</dd>
</dl>
<p>Marks the migration of a task to a new capability.</p>
</dd></dl>

</section>
<section id="tracing-events">
<h3><span class="section-number">15.2.9. </span>Tracing events<a class="headerlink" href="#tracing-events" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-LOG_MSG">
<span class="sig-name descname"><span class="pre">LOG_MSG</span></span><a class="headerlink" href="#event-type-LOG_MSG" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>16</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>The message</p>
</dd>
</dl>
<p>A log message from the runtime system.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-BLOCK_MARKER">
<span class="sig-name descname"><span class="pre">BLOCK_MARKER</span></span><a class="headerlink" href="#event-type-BLOCK_MARKER" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>18</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>size</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>end time in nanoseconds</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>marker name</p>
</dd>
</dl>
<p>TODO</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-USER_MSG">
<span class="sig-name descname"><span class="pre">USER_MSG</span></span><a class="headerlink" href="#event-type-USER_MSG" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>19</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>message</p>
</dd>
</dl>
<p>A user log message (from, e.g., <a class="reference external" href="./../libraries/base-4.16.4.0/Control-Concurrent.html#v:traceEvent">Control.Concurrent.traceEvent</a>).</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-USER_MARKER">
<span class="sig-name descname"><span class="pre">USER_MARKER</span></span><a class="headerlink" href="#event-type-USER_MARKER" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>58</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>marker name</p>
</dd>
</dl>
<p>A user marker (from <a class="reference external" href="./../libraries/base-4.16.4.0/Debug-Trace.html#v:traceMarker">Debug.Trace.traceMarker</a>).</p>
</dd></dl>

</section>
</section>
<section id="heap-profiler-event-log-output">
<span id="heap-profiler-events"></span><h2><span class="section-number">15.3. </span>Heap profiler event log output<a class="headerlink" href="#heap-profiler-event-log-output" title="Permalink to this heading">¶</a></h2>
<p>The heap profiler can produce output to GHC’s event log, allowing samples to
be correlated with other event log events over the program’s lifecycle.</p>
<p>This section defines the layout of these events. The <code class="docutils literal notranslate"><span class="pre">String</span></code> type below is
defined to be a UTF-8 encoded NUL-terminated string.</p>
<section id="metadata-event-types">
<h3><span class="section-number">15.3.1. </span>Metadata event types<a class="headerlink" href="#metadata-event-types" title="Permalink to this heading">¶</a></h3>
<section id="beginning-of-sample-stream">
<h4><span class="section-number">15.3.1.1. </span>Beginning of sample stream<a class="headerlink" href="#beginning-of-sample-stream" title="Permalink to this heading">¶</a></h4>
<p>A single fixed-width event emitted during program start-up describing the samples that follow.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_BEGIN">
<span class="sig-name descname"><span class="pre">HEAP_PROF_BEGIN</span></span><a class="headerlink" href="#event-type-HEAP_PROF_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>160</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>profile ID</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>sampling period in nanoseconds</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>sample breadown type. One of,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_COST_CENTER</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hc"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hc</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_CLOSURE_DESCR</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hd"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hd</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_RETAINER</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hr"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hr</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_MODULE</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hm"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hm</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_TYPE_DESCR</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hy"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hy</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_BIOGRAPHY</span></code> (output from <a class="reference internal" href="profiling.html#rts-flag-hb"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hb</span></code></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEAP_PROF_BREAKDOWN_CLOSURE_TYPE</span></code> (output from <a class="reference internal" href="runtime_control.html#rts-flag-hT"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hT</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>module filter</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>closure description filter</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>type description filter</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>cost centre filter</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>cost centre stack filter</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>retainer filter</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>biography filter</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="cost-centre-definitions">
<h4><span class="section-number">15.3.1.2. </span>Cost centre definitions<a class="headerlink" href="#cost-centre-definitions" title="Permalink to this heading">¶</a></h4>
<p>A variable-length packet produced once for each cost centre,</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_COST_CENTRE">
<span class="sig-name descname"><span class="pre">HEAP_PROF_COST_CENTRE</span></span><a class="headerlink" href="#event-type-HEAP_PROF_COST_CENTRE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>161</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>cost centre number</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>label</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>module</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>source location</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>flags:</p>
<ul class="simple">
<li><p>bit 0: is the cost-centre a CAF?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="info-table-provenance-definitions">
<h4><span class="section-number">15.3.1.3. </span>Info Table Provenance definitions<a class="headerlink" href="#info-table-provenance-definitions" title="Permalink to this heading">¶</a></h4>
<p>A message which describes an approximate source position for
info tables. See <a class="reference internal" href="debug-info.html#ghc-flag-finfo-table-map"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-finfo-table-map</span></code></a> for more information.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-IPE">
<span class="sig-name descname"><span class="pre">IPE</span></span><a class="headerlink" href="#event-type-IPE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>169</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>info table address</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>table name</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>closure type</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>type</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>source position label</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>source position module</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>source position location</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="sample-event-types">
<h4><span class="section-number">15.3.1.4. </span>Sample event types<a class="headerlink" href="#sample-event-types" title="Permalink to this heading">¶</a></h4>
<p>A sample (consisting of a list of break-down classes, e.g. cost centres, and
heap residency sizes), is to be encoded in the body of one or more events.</p>
<p>We normally mark the beginning of a new sample with an <code class="docutils literal notranslate"><span class="pre">EVENT_HEAP_PROF_SAMPLE_BEGIN</span></code>
event,</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_SAMPLE_BEGIN">
<span class="sig-name descname"><span class="pre">HEAP_PROF_SAMPLE_BEGIN</span></span><a class="headerlink" href="#event-type-HEAP_PROF_SAMPLE_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Length<span class="colon">:</span></dt>
<dd class="field-odd"><p>fixed</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>sample number</p>
</dd>
</dl>
<p>Marks the beginning of a heap profile sample.</p>
</dd></dl>

<p>Biographical profiling samples start with the <code class="docutils literal notranslate"><span class="pre">EVENT_HEAP_BIO_PROF_SAMPLE_BEGIN</span></code>
event. These events also include a timestamp which indicates when the sample
was taken. This is because all these samples will appear at the end of
the eventlog due to how the biographical profiling mode works. You can
use the timestamp to reorder the samples relative to the other events.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_BIO_PROF_SAMPLE_BEGIN">
<span class="sig-name descname"><span class="pre">HEAP_BIO_PROF_SAMPLE_BEGIN</span></span><a class="headerlink" href="#event-type-HEAP_BIO_PROF_SAMPLE_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>166</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>sample number</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>eventlog timestamp in ns</p>
</dd>
</dl>
</dd></dl>

<p>A heap residency census will follow. Since events may only be up to 2^16^ bytes
in length a single sample may need to be split among multiple
<code class="docutils literal notranslate"><span class="pre">EVENT_HEAP_PROF_SAMPLE</span></code> events. The precise format of the census entries is
determined by the break-down type.</p>
<p>At the end of the sample period the <code class="docutils literal notranslate"><span class="pre">EVENT_HEAP_PROF_SAMPLE_END</span></code> event if
emitted. This is useful to properly delimit the sampling period and to record
the total time spent profiling.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_SAMPLE_END">
<span class="sig-name descname"><span class="pre">HEAP_PROF_SAMPLE_END</span></span><a class="headerlink" href="#event-type-HEAP_PROF_SAMPLE_END" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>165</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>sample number</p>
</dd>
</dl>
<p>Marks the end of a heap profile sample.</p>
</dd></dl>

</section>
<section id="cost-centre-break-down">
<h4><span class="section-number">15.3.1.5. </span>Cost-centre break-down<a class="headerlink" href="#cost-centre-break-down" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt>A variable-length packet encoding a heap profile sample broken down by,</dt><dd><ul class="simple">
<li><p>cost-centre (<a class="reference internal" href="profiling.html#rts-flag-hc"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hc</span></code></a>)</p></li>
</ul>
</dd>
</dl>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_SAMPLE_COST_CENTRE">
<span class="sig-name descname"><span class="pre">HEAP_PROF_SAMPLE_COST_CENTRE</span></span><a class="headerlink" href="#event-type-HEAP_PROF_SAMPLE_COST_CENTRE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>163</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>profile ID</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>heap residency in bytes</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>stack depth</p>
</dd>
<dt class="field-even">Field Word32[]<span class="colon">:</span></dt>
<dd class="field-even"><p>cost centre stack starting with inner-most (cost centre numbers)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="string-break-down">
<h4><span class="section-number">15.3.1.6. </span>String break-down<a class="headerlink" href="#string-break-down" title="Permalink to this heading">¶</a></h4>
<p>A variable-length event encoding a heap sample broken down by,</p>
<blockquote>
<div><ul class="simple">
<li><p>type description (<a class="reference internal" href="profiling.html#rts-flag-hy"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hy</span></code></a>)</p></li>
<li><p>closure description (<a class="reference internal" href="profiling.html#rts-flag-hd"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hd</span></code></a>)</p></li>
<li><p>module (<a class="reference internal" href="profiling.html#rts-flag-hm"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-hm</span></code></a>)</p></li>
</ul>
</div></blockquote>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-HEAP_PROF_SAMPLE_STRING">
<span class="sig-name descname"><span class="pre">HEAP_PROF_SAMPLE_STRING</span></span><a class="headerlink" href="#event-type-HEAP_PROF_SAMPLE_STRING" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>164</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>profile ID</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>heap residency in bytes</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>type or closure description, or module name</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>
<section id="time-profiler-event-log-output">
<span id="time-profiler-events"></span><h2><span class="section-number">15.4. </span>Time profiler event log output<a class="headerlink" href="#time-profiler-event-log-output" title="Permalink to this heading">¶</a></h2>
<p>The time profiling mode enabled by <a class="reference internal" href="profiling.html#rts-flag-p"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">-p</span></code></a> also emits
sample events to the eventlog.  At the start of profiling the
tick interval is emitted to the eventlog and then on each tick
the current cost centre stack is emitted. Together these
enable a user to construct an approximate track of the
executation of their program.</p>
<section id="profile-begin-event">
<h3><span class="section-number">15.4.1. </span>Profile begin event<a class="headerlink" href="#profile-begin-event" title="Permalink to this heading">¶</a></h3>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-PROF_BEGIN">
<span class="sig-name descname"><span class="pre">PROF_BEGIN</span></span><a class="headerlink" href="#event-type-PROF_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>168</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>tick interval, in nanoseconds</p>
</dd>
</dl>
<p>Marks the beginning of a time profile.</p>
</dd></dl>

</section>
<section id="profile-sample-event">
<h3><span class="section-number">15.4.2. </span>Profile sample event<a class="headerlink" href="#profile-sample-event" title="Permalink to this heading">¶</a></h3>
<p>A variable-length packet encoding a profile sample.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-PROF_SAMPLE_COST_CENTRE">
<span class="sig-name descname"><span class="pre">PROF_SAMPLE_COST_CENTRE</span></span><a class="headerlink" href="#event-type-PROF_SAMPLE_COST_CENTRE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>167</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>capability</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>current profiling tick</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>stack depth</p>
</dd>
<dt class="field-even">Field Word32[]<span class="colon">:</span></dt>
<dd class="field-even"><p>cost centre stack starting with inner-most (cost centre numbers)</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="biographical-profile-sample-event">
<h2><span class="section-number">15.5. </span>Biographical profile sample event<a class="headerlink" href="#biographical-profile-sample-event" title="Permalink to this heading">¶</a></h2>
<p>A variable-length packet encoding a profile sample.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-BIO_PROF_SAMPLE_BEGIN">
<span class="sig-name descname"><span class="pre">BIO_PROF_SAMPLE_BEGIN</span></span><a class="headerlink" href="#event-type-BIO_PROF_SAMPLE_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>166</p>
</dd>
</dl>
<p>TODO</p>
</dd></dl>

</section>
<section id="non-moving-gc-event-output">
<span id="nonmoving-gc-events"></span><h2><span class="section-number">15.6. </span>Non-moving GC event output<a class="headerlink" href="#non-moving-gc-event-output" title="Permalink to this heading">¶</a></h2>
<p>These events mark various stages of the
<a class="reference internal" href="runtime_control.html#rts-flag-nonmoving-gc"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">non-moving</span> <span class="pre">collection</span></code></a> lifecycle. These are enabled
with the <code class="docutils literal notranslate"><span class="pre">+RTS</span> <span class="pre">-lg</span></code> event-set.</p>
<p>A typical non-moving collection cycle will look something like the following:</p>
<ol class="arabic simple">
<li><p>The preparatory phase of collection will emit the usual events associated
with a moving collection. See <a class="reference internal" href="#gc-events"><span class="std std-ref">Garbage collector events</span></a> for details.</p></li>
<li><p>The concurrent write barrier is enabled and the concurrent mark thread is
started. From this point forward mutator threads may emit
<a class="reference internal" href="#event-type-CONC_UPD_REM_SET_FLUSH"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_UPD_REM_SET_FLUSH</span></code></a> events, indicating that they have
flushed their capability-local update remembered sets.</p></li>
<li><p>Concurrent marking begins, denoted by a <a class="reference internal" href="#event-type-CONC_MARK_BEGIN"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_MARK_BEGIN</span></code></a> event.</p></li>
<li><p>When the mark queue is depleted a <a class="reference internal" href="#event-type-CONC_MARK_END"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_MARK_END</span></code></a> is emitted.</p></li>
<li><p>If necessary (e.g. due to weak pointer marking), the marking process will
continue, returning to step (3) above.</p></li>
<li><p>When the collector has done as much concurrent marking as it can it will
enter the post-mark synchronization phase of collection, denoted by a
<a class="reference internal" href="#event-type-CONC_SYNC_BEGIN"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_SYNC_BEGIN</span></code></a> event.</p></li>
<li><p>Mutator threads will suspend execution and, if necessary, flush their update
remembered sets (indicated by <a class="reference internal" href="#event-type-CONC_UPD_REM_SET_FLUSH"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_UPD_REM_SET_FLUSH</span></code></a> events).</p></li>
<li><p>The collector will do any final marking necessary (indicated by
<a class="reference internal" href="#event-type-CONC_MARK_BEGIN"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_MARK_BEGIN</span></code></a> and <a class="reference internal" href="#event-type-CONC_MARK_END"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_MARK_END</span></code></a> events).</p></li>
<li><p>The collector will do a small amount of sweeping, disable the write barrier,
emit a <a class="reference internal" href="#event-type-CONC_SYNC_END"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_SYNC_END</span></code></a> event, and allow mutators to resume</p></li>
<li><p>The collector will begin the concurrent sweep phase, indicated by a
<a class="reference internal" href="#event-type-CONC_SWEEP_BEGIN"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_SWEEP_BEGIN</span></code></a> event.</p></li>
<li><p>Once sweeping has concluded a <a class="reference internal" href="#event-type-CONC_SWEEP_END"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">CONC_SWEEP_END</span></code></a> event will be
emitted and the concurrent collector thread will terminate.</p></li>
<li><p>A <a class="reference internal" href="#event-type-NONMOVING_HEAP_CENSUS"><code class="xref std std-event-type docutils literal notranslate"><span class="pre">NONMOVING_HEAP_CENSUS</span></code></a> event will be emitted describing the
fragmentation state of the non-moving heap.</p></li>
</ol>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_MARK_BEGIN">
<span class="sig-name descname"><span class="pre">CONC_MARK_BEGIN</span></span><a class="headerlink" href="#event-type-CONC_MARK_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>200</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the beginning of marking by the concurrent collector.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_MARK_END">
<span class="sig-name descname"><span class="pre">CONC_MARK_END</span></span><a class="headerlink" href="#event-type-CONC_MARK_END" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>201</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the end of marking by the concurrent collector.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_SYNC_BEGIN">
<span class="sig-name descname"><span class="pre">CONC_SYNC_BEGIN</span></span><a class="headerlink" href="#event-type-CONC_SYNC_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>202</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the beginning of the concurrent garbage collector’s
post-mark synchronization phase.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_SYNC_END">
<span class="sig-name descname"><span class="pre">CONC_SYNC_END</span></span><a class="headerlink" href="#event-type-CONC_SYNC_END" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>203</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the end of the concurrent garbage collector’s
post-mark synchronization phase.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_SWEEP_BEGIN">
<span class="sig-name descname"><span class="pre">CONC_SWEEP_BEGIN</span></span><a class="headerlink" href="#event-type-CONC_SWEEP_BEGIN" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>204</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the beginning of the concurrent garbage collector’s
sweep phase.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_SWEEP_END">
<span class="sig-name descname"><span class="pre">CONC_SWEEP_END</span></span><a class="headerlink" href="#event-type-CONC_SWEEP_END" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>205</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks the end of the concurrent garbage collector’s
sweep phase.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-CONC_UPD_REM_SET_FLUSH">
<span class="sig-name descname"><span class="pre">CONC_UPD_REM_SET_FLUSH</span></span><a class="headerlink" href="#event-type-CONC_UPD_REM_SET_FLUSH" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>206</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Marks a capability flushing its local update remembered set
accumulator.</p>
</dd></dl>

<section id="non-moving-heap-census">
<h3><span class="section-number">15.6.1. </span>Non-moving heap census<a class="headerlink" href="#non-moving-heap-census" title="Permalink to this heading">¶</a></h3>
<p>The non-moving heap census events (enabled with the <a class="reference internal" href="runtime_control.html#rts-flag-l-flags"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">+RTS</span> <span class="pre">-ln</span></code></a>
event-set) are intended to provide insight into fragmentation of the non-moving
heap.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-NONMOVING_HEAP_CENSUS">
<span class="sig-name descname"><span class="pre">NONMOVING_HEAP_CENSUS</span></span><a class="headerlink" href="#event-type-NONMOVING_HEAP_CENSUS" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>207</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word8<span class="colon">:</span></dt>
<dd class="field-odd"><p>base-2 logarithm of <em>blk_sz</em>.</p>
</dd>
<dt class="field-even">Field Word32<span class="colon">:</span></dt>
<dd class="field-even"><p>number of active segments.</p>
</dd>
<dt class="field-odd">Field Word32<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of filled segments.</p>
</dd>
<dt class="field-even">Field Word32<span class="colon">:</span></dt>
<dd class="field-even"><p>number of live blocks.</p>
</dd>
</dl>
<p>Describes the occupancy of the <em>blk_sz</em> sub-heap.</p>
</dd></dl>

</section>
<section id="ticky-counters">
<h3><span class="section-number">15.6.2. </span>Ticky counters<a class="headerlink" href="#ticky-counters" title="Permalink to this heading">¶</a></h3>
<p>Programs compiled with <a class="reference internal" href="profiling.html#ghc-flag-ticky"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-ticky</span></code></a> and <a class="reference internal" href="phases.html#ghc-flag-eventlog"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-eventlog</span></code></a> and invoked
with <a class="reference internal" href="runtime_control.html#rts-flag-l-flags"><code class="xref std std-rts-flag docutils literal notranslate"><span class="pre">+RTS</span> <span class="pre">-lT</span></code></a> will emit periodic samples of the ticky
entry counters to the eventlog.</p>
<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-TICKY_COUNTER_DEF">
<span class="sig-name descname"><span class="pre">TICKY_COUNTER_DEF</span></span><a class="headerlink" href="#event-type-TICKY_COUNTER_DEF" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>210</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>variable</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>counter ID</p>
</dd>
<dt class="field-even">Field Word16<span class="colon">:</span></dt>
<dd class="field-even"><p>arity/field count</p>
</dd>
<dt class="field-odd">Field String<span class="colon">:</span></dt>
<dd class="field-odd"><p>argument kinds. This is the same as the synonymous field in the
textual ticky summary.</p>
</dd>
<dt class="field-even">Field String<span class="colon">:</span></dt>
<dd class="field-even"><p>counter name</p>
</dd>
</dl>
<p>Defines a ticky counter.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-TICKY_COUNTER_BEGIN_SAMPLE">
<span class="sig-name descname"><span class="pre">TICKY_COUNTER_BEGIN_SAMPLE</span></span><a class="headerlink" href="#event-type-TICKY_COUNTER_BEGIN_SAMPLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>212</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
</dl>
<p>Denotes the beginning of an atomic set of ticky-ticky profiler counter samples.</p>
</dd></dl>

<dl class="std event-type">
<dt class="sig sig-object std" id="event-type-TICKY_COUNTER_SAMPLE">
<span class="sig-name descname"><span class="pre">TICKY_COUNTER_SAMPLE</span></span><a class="headerlink" href="#event-type-TICKY_COUNTER_SAMPLE" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Tag<span class="colon">:</span></dt>
<dd class="field-odd"><p>211</p>
</dd>
<dt class="field-even">Length<span class="colon">:</span></dt>
<dd class="field-even"><p>fixed</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>counter ID</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>number of times closures of this type has been entered.</p>
</dd>
<dt class="field-odd">Field Word64<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of allocations (words)</p>
</dd>
<dt class="field-even">Field Word64<span class="colon">:</span></dt>
<dd class="field-even"><p>number of times this has been allocated (words). Only
produced for modules compiled with <a class="reference internal" href="profiling.html#ghc-flag-ticky-allocd"><code class="xref std std-ghc-flag docutils literal notranslate"><span class="pre">-ticky-allocd</span></code></a>.</p>
</dd>
</dl>
<p>Records the number of “ticks” recorded by a ticky-ticky counter single the last sample.</p>
</dd></dl>

</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="editing-guide.html" class="btn btn-neutral float-right" title="16. Care and feeding of your GHC User’s Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bugs.html" class="btn btn-neutral float-left" title="14. Known bugs and infelicities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, GHC Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>