<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP, TypeFamilies, Rank2Types, FlexibleContexts, FlexibleInstances, GADTs, StandaloneDeriving, UndecidableInstances #-}</span><span class="hs-cpp">
#include &quot;recursion-schemes-common.h&quot;
</span><span class="hs-cpp">
#ifdef __GLASGOW_HASKELL__
</span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span class="hs-cpp">
#if __GLASGOW_HASKELL__ &gt;= 800
</span><span class="hs-pragma">{-# LANGUAGE ConstrainedClassMethods #-}</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#if HAS_GENERIC
</span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables, DefaultSignatures, MultiParamTypeClasses, TypeOperators #-}</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#endif
</span><span>
</span><span id="line-15"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Copyright   :  (C) 2008-2015 Edward Kmett</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- Maintainer  : &quot;Samuel G&#233;lineau&quot; &lt;gelisam@gmail.com&gt;,</span><span>
</span><span id="line-21"></span><span class="hs-comment">--               &quot;Luc Tielen&quot; &lt;luc.tielen@gmail.com&gt;,</span><span>
</span><span id="line-22"></span><span class="hs-comment">--               &quot;Ryan Scott&quot; &lt;ryan.gl.scott@gmail.com&gt;</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- Portability :  non-portable</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-27"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Functor.Foldable</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Base functors</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier">Base</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Base.html#ListF"><span class="hs-identifier">ListF</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Type classes</span></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier">Recursive</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier">project</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier">Corecursive</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier">embed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Folding functions</span></span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="hs-comment">-- $foldingFunctions</span></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#fold"><span class="hs-identifier">fold</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier">cata</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#cataA"><span class="hs-identifier">cataA</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#para"><span class="hs-identifier">para</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#histo"><span class="hs-identifier">histo</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#zygo"><span class="hs-identifier">zygo</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Unfolding functions</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#unfold"><span class="hs-identifier">unfold</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier">ana</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#apo"><span class="hs-identifier">apo</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#futu"><span class="hs-identifier">futu</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Combining unfolds and folds</span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#refold"><span class="hs-identifier">refold</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#hylo"><span class="hs-identifier">hylo</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#chrono"><span class="hs-identifier">chrono</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Changing representation</span></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#refix"><span class="hs-identifier">refix</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier">hoist</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#transverse"><span class="hs-identifier">transverse</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#cotransverse"><span class="hs-identifier">cotransverse</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Advanced usage</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Mendler-style recursion-schemes</span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mcata"><span class="hs-identifier">mcata</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mpara"><span class="hs-identifier">mpara</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mhisto"><span class="hs-identifier">mhisto</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mzygo"><span class="hs-identifier">mzygo</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mana"><span class="hs-identifier">mana</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mapo"><span class="hs-identifier">mapo</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#mfutu"><span class="hs-identifier">mfutu</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Fokkinga's recursion-schemes</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#prepro"><span class="hs-identifier">prepro</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#postpro"><span class="hs-identifier">postpro</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Elgot (co)algebras</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#elgot"><span class="hs-identifier">elgot</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#coelgot"><span class="hs-identifier">coelgot</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Generalized recursion-schemes</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gfold"><span class="hs-identifier">gfold</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier">gcata</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gpara"><span class="hs-identifier">gpara</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#ghisto"><span class="hs-identifier">ghisto</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gzygo"><span class="hs-identifier">gzygo</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gunfold"><span class="hs-identifier">gunfold</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier">gana</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gapo"><span class="hs-identifier">gapo</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gfutu"><span class="hs-identifier">gfutu</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#grefold"><span class="hs-identifier">grefold</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier">ghylo</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gchrono"><span class="hs-identifier">gchrono</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gprepro"><span class="hs-identifier">gprepro</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gpostpro"><span class="hs-identifier">gpostpro</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distCata"><span class="hs-identifier">distCata</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distPara"><span class="hs-identifier">distPara</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distParaT"><span class="hs-identifier">distParaT</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier">distHisto</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distGHisto"><span class="hs-identifier">distGHisto</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distZygo"><span class="hs-identifier">distZygo</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier">distZygoT</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distAna"><span class="hs-identifier">distAna</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distApo"><span class="hs-identifier">distApo</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier">distGApo</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distGApoT"><span class="hs-identifier">distGApoT</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier">distFutu</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#distGFutu"><span class="hs-identifier">distGFutu</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Zygohistomorphic prepromorphisms</span></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#zygoHistoPrepro"><span class="hs-identifier">zygoHistoPrepro</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier">Control.Comonad</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier">Control.Comonad.Trans.Class</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier">Control.Comonad.Trans.Env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier">EnvT</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Comonad.Cofree</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cofree</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Comonad.Cofree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Cofree</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Comonad.Trans.Cofree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">CofreeF</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">CofreeT</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Comonad.Trans.Cofree</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CCTC</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">liftM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">join</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Monad.Free</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Free</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Monad.Free.Church</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CMFC</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">Control.Monad.Trans.Except</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">ExceptT</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">runExceptT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Monad.Trans.Free</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">FreeF</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">FreeT</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Monad.Trans.Free</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CMTF</span></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Arrow</span></a></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Compose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Compose</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(:|)</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">nonEmpty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Tree</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#ifdef __GLASGOW_HASKELL__
</span><span class="hs-cpp">#if HAS_GENERIC
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">M1</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">V1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">U1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">K1</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(:+:)</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(:*:)</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Numeric.Natural</span></a></span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Prelude</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Functor.Base.html"><span class="hs-identifier">Data.Functor.Base</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Base.html#head"><span class="hs-identifier">head</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Base.html#tail"><span class="hs-identifier">tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Functor.Base.html"><span class="hs-identifier">Data.Functor.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEF</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Base.html#NonEmptyF"><span class="hs-identifier">NonEmptyF</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier">Data.Fix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier">Fix</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier">unFix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier">Mu</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier">Nu</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XDeriveFunctor -XScopedTypeVariables -XLambdaCase -XGADTs -XFlexibleContexts</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Applicative (Const (..), Applicative (..))</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Comonad</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Comonad.Cofree (Cofree(..))</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Monad (void)</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Monad.Trans.Reader (Reader, ask, local, runReader)</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Char (toUpper)</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Fix (Fix (..))</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Foldable (traverse_)</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.List (intercalate, partition)</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.List.NonEmpty (NonEmpty (..))</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Maybe (maybeToList)</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Tree (Tree (..), drawTree)</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- &gt;&gt;&gt; import Numeric.Natural</span><span>
</span><span id="line-151"></span><span class="hs-comment">--</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Functor.Base</span><span>
</span><span id="line-153"></span><span class="hs-comment">--</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- &gt;&gt;&gt; let showTree = putStrLn . go where go (Node x xs) = if null xs then x else &quot;(&quot; ++ unwords (x : map go xs) ++ &quot;)&quot;</span><span>
</span><span id="line-155"></span><span class="hs-comment">--</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- &gt;&gt;&gt; let myTree = Node 0 [Node 1 [], Node 2 [], Node 3 [Node 31 [Node 311 [Node 3111 [], Node 3112 []]]]]</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- $foldingFunctions</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- Folding functions allow you to reduce a recursive structure down to a value. The value can be a simple type such as 'Int' or 'String', or it can also be a recursive structure. Each of the functions below will be accompanied by an example which folds the following @Tree Int@ down to some 'String'.</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &gt;&gt;&gt; putStr $ drawTree $ fmap show myTree</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- 0</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- +- 1</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- +- 2</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- `- 3</span><span>
</span><span id="line-169"></span><span class="hs-comment">--    |</span><span>
</span><span id="line-170"></span><span class="hs-comment">--    `- 31</span><span>
</span><span id="line-171"></span><span class="hs-comment">--       |</span><span>
</span><span id="line-172"></span><span class="hs-comment">--       `- 311</span><span>
</span><span id="line-173"></span><span class="hs-comment">--          |</span><span>
</span><span id="line-174"></span><span class="hs-comment">--          +- 3111</span><span>
</span><span id="line-175"></span><span class="hs-comment">--          |</span><span>
</span><span id="line-176"></span><span class="hs-comment">--          `- 3112</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Obtain the base functor for a recursive datatype.</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- The core idea of this library is that instead of writing recursive functions</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- on a recursive datatype, we prefer to write non-recursive functions on a</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- related, non-recursive datatype we call the &quot;base functor&quot;.</span><span>
</span><span id="line-183"></span><span class="hs-comment">--</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- For example, @[a]@ is a recursive type, and its corresponding base functor is</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- @'ListF' a@:</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- data 'ListF' a b = 'Nil' | 'Cons' a b</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- type instance 'Base' [a] = 'ListF' a</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- The relationship between those two types is that if we replace @b@ with</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- @'ListF' a@, we obtain a type which is isomorphic to @[a]@.</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679084025"><span class="annot"><a href="#local-6989586621679084025"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">-- | A recursive datatype which can be unrolled one recursion layer at a time.</span><span>
</span><span id="line-198"></span><span class="hs-comment">--</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- For example, a value of type @[a]@ can be unrolled into a @'ListF' a [a]@.</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- Ifthat unrolled value is a 'Cons', it contains another @[a]@ which can be</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- unrolled as well, and so on.</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- Typically, 'Recursive' types also have a 'Corecursive' instance, in which</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- case 'project' and 'embed' are inverses.</span><span>
</span><span id="line-205"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Recursive"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a></span></span><span> </span><span id="local-6989586621679085071"><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-comment">-- | Unroll a single recursion layer.</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; project [1,2,3]</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-comment">-- Cons 1 [2,3]</span><span>
</span><span id="line-210"></span><span>  </span><span id="project"><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-type">project</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-cpp">
#ifdef HAS_GENERIC
</span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="project"><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-type">project</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Generic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Rep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679084022"><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var hs-var">project</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a x. Generic a =&gt; Rep a x -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a x. Generic a =&gt; a -&gt; Rep a x
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">from</span></a></span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-comment">-- | An alias for 'fold'.</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-comment">-- 'fold' is by far the most common recursion-scheme, because working one layer at a time is the most common strategy for writing a recursive function. But there are also other, rarer strategies. Researchers have given names to the most common strategies, and their name for 'fold' is &quot;catamorphism&quot;. They also give its @Base t a -&gt; a@ argument a special name, &quot;(@Base t@)-algebra&quot;. More generally, a function of the form @f a -&gt; a@ is called an &quot;f-algebra&quot;.</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- The names might seem intimidating at first, but using the standard nomenclature has benefits. If you program with others, it can be useful to have a shared vocabulary to refer to those recursion patterns. For example, you can discuss which type of recursion is the most appropriate for the problem at hand. Names can also help to structure your thoughts while writing recursive functions.</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-comment">-- The rest of this module lists a few of the other recursion-schemes which are common enough to have a name. In this section, we restrict our attention to those which fold a recursive structure down to a value. In the examples all functions will be of type @Tree Int -&gt; String@.</span><span>
</span><span id="line-223"></span><span>  </span><span id="cata"><span class="annot"><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-type">cata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085059"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085059"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085059"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085059"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621679084011"><span class="annot"><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var hs-var">cata</span></a></span><span> </span><span id="local-6989586621679084007"><span class="annot"><span class="annottext">Base t a -&gt; a
</span><a href="#local-6989586621679084007"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679084006"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679084006"><span class="annot"><span class="annottext">c :: t -&gt; a
</span><a href="#local-6989586621679084006"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base t a -&gt; a
</span><a href="#local-6989586621679084007"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679084006"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-comment">-- | A variant of 'cata' in which recursive positions also include the</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-comment">-- original sub-tree, in addition to the result of folding that sub-tree.</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-comment">-- For our running example, let's add a number to each node indicating how</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-comment">-- many children are below it. To do so, we will need to count those nodes</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-comment">-- from the original sub-tree.</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-comment">-- let pprint4 :: Tree Int -&gt; String</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-comment">--     pprint4 = flip runReader 0 . para go</span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-comment">--       where</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-comment">--         go :: TreeF Int (Tree Int, Reader Int String)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-comment">--            -&gt; Reader Int String</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-comment">--         go (NodeF i trss) = do</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-comment">--           -- trss :: [(Tree Int, Reader Int String)]</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-comment">--           -- ts   :: [Tree Int]</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-comment">--           -- rss  :: [Reader Int String]</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-comment">--           -- ss   :: [String]</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-comment">--           let (ts, rss) = unzip trss</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-comment">--           let count = sum $ fmap length ts</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-comment">--           ss &lt;- local (+ 2) $ sequence rss</span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-comment">--           indent &lt;- ask</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-comment">--           let s = replicate indent ' '</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-comment">--                ++ &quot;* &quot; ++ show i</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-comment">--                ++ &quot; (&quot; ++ show count ++ &quot;)&quot;</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-comment">--           pure $ intercalate &quot;\n&quot; (s : ss)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-comment">-- :}</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint4 myTree</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-comment">-- * 0 (7)</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-comment">--   * 1 (0)</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-comment">--   * 2 (0)</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-comment">--   * 3 (4)</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-comment">--     * 31 (3)</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-comment">--       * 311 (2)</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-comment">--         * 3111 (0)</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-comment">--         * 3112 (0)</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-comment">-- One common use for 'para' is to construct a new tree which reuses most of</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-comment">-- the sub-trees from the original. In the following example, we insert a new</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-comment">-- node under the leftmost leaf. This requires allocating new nodes along a</span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-comment">-- path from the root to that leaf, while keeping every other sub-tree</span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-comment">-- untouched.</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-comment">-- let insertLeftmost :: Int -&gt; Tree Int -&gt; Tree Int</span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-comment">--     insertLeftmost new = para go</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-comment">--       where</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-comment">--         go :: TreeF Int (Tree Int, Tree Int)</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">--            -&gt; Tree Int</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-comment">--         go (NodeF i []) = Node i [Node new []]</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-comment">--         go (NodeF i ((_orig, recur) : tts))</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-comment">--             -- tts :: [(Tree Int, Tree Int)]</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-comment">--           = let (origs, _recurs) = unzip tts</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-comment">--             in Node i (recur : origs)</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-comment">-- :}</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint4 $ insertLeftmost 999 myTree</span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-comment">-- * 0 (8)</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-comment">--   * 1 (1)</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-comment">--     * 999 (0)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-comment">--   * 2 (0)</span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-comment">--   * 3 (4)</span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-comment">--     * 31 (3)</span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-comment">--       * 311 (2)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-comment">--         * 3111 (0)</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-comment">--         * 3112 (0)</span><span>
</span><span id="line-293"></span><span>  </span><span id="para"><span class="annot"><a href="Data.Functor.Foldable.html#para"><span class="hs-identifier hs-type">para</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085054"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679085054"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085054"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085054"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-294"></span><span>  </span><span id="local-6989586621679084005"><span class="annot"><a href="Data.Functor.Foldable.html#para"><span class="hs-identifier hs-var hs-var">para</span></a></span><span> </span><span id="local-6989586621679083999"><span class="annot"><span class="annottext">Base t (t, a) -&gt; a
</span><a href="#local-6989586621679083999"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679083998"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083998"><span class="annot"><span class="annottext">p :: t -&gt; a
</span><a href="#local-6989586621679083998"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679083997"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679083997"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base t (t, a) -&gt; a
</span><a href="#local-6989586621679083999"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679083998"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679083997"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span>  </span><span id="gpara"><span class="annot"><a href="Data.Functor.Foldable.html#gpara"><span class="hs-identifier hs-type">gpara</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085041"><span id="local-6989586621679085043"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085043"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085042"><span class="annot"><a href="#local-6989586621679085042"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085043"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085042"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085043"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085042"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085043"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085041"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085041"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085041"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621679083996"><span class="annot"><a href="Data.Functor.Foldable.html#gpara"><span class="hs-identifier hs-var hs-var">gpara</span></a></span><span> </span><span id="local-6989586621679083990"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083990"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) b a.
(Recursive t, Comonad w) =&gt;
(Base t b -&gt; b)
-&gt; (forall c. Base t (w c) -&gt; w (Base t c))
-&gt; (Base t (EnvT b w a) -&gt; a)
-&gt; t
-&gt; a
</span><a href="Data.Functor.Foldable.html#gzygo"><span class="hs-identifier hs-var">gzygo</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083990"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">-- | Fokkinga's prepromorphism</span><span>
</span><span id="line-300"></span><span>  </span><span id="prepro"><span class="annot"><a href="Data.Functor.Foldable.html#prepro"><span class="hs-identifier hs-type">prepro</span></a></span></span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085031"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085032"><span class="annot"><a href="#local-6989586621679085032"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085032"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085032"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085031"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085031"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085031"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-306"></span><span>  </span><span id="local-6989586621679083989"><span class="annot"><a href="Data.Functor.Foldable.html#prepro"><span class="hs-identifier hs-var hs-var">prepro</span></a></span><span> </span><span id="local-6989586621679083982"><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083982"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679083981"><span class="annot"><span class="annottext">Base t a -&gt; a
</span><a href="#local-6989586621679083981"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679083980"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083980"><span class="annot"><span class="annottext">c :: t -&gt; a
</span><a href="#local-6989586621679083980"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base t a -&gt; a
</span><a href="#local-6989586621679083981"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; a
</span><a href="#local-6989586621679083980"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t.
(Recursive s, Corecursive t) =&gt;
(forall a. Base s a -&gt; Base t a) -&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-var">hoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083982"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-comment">--- | A generalized prepromorphism</span><span>
</span><span id="line-309"></span><span>  </span><span id="gprepro"><span class="annot"><a href="Data.Functor.Foldable.html#gprepro"><span class="hs-identifier hs-type">gprepro</span></a></span></span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085024"><span id="local-6989586621679085026"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085026"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085025"><span class="annot"><a href="#local-6989586621679085025"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085026"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085025"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085026"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085025"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679083979"><span class="annot"><a href="#local-6989586621679083979"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083979"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083979"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085026"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085024"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085024"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085071"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085024"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-316"></span><span>  </span><span id="local-6989586621679083978"><span class="annot"><a href="Data.Functor.Foldable.html#gprepro"><span class="hs-identifier hs-var hs-var">gprepro</span></a></span><span> </span><span id="local-6989586621679083965"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083965"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083964"><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083964"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679083963"><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083963"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">extract</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; w a
</span><a href="#local-6989586621679083961"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083961"><span class="annot"><span class="annottext">c :: t -&gt; w a
</span><a href="#local-6989586621679083961"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083963"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083965"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">duplicate</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; w a
</span><a href="#local-6989586621679083961"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t.
(Recursive s, Corecursive t) =&gt;
(forall a. Base s a -&gt; Base t a) -&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-var">hoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083964"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span id="local-6989586621679085017"><span id="local-6989586621679085018"><span class="annot"><a href="Data.Functor.Foldable.html#distPara"><span class="hs-identifier hs-type">distPara</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085018"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085018"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085018"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679085017"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085018"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085018"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085017"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-319"></span><span id="distPara"><span class="annot"><span class="annottext">distPara :: forall t a. Corecursive t =&gt; Base t (t, a) -&gt; (t, Base t a)
</span><a href="Data.Functor.Foldable.html#distPara"><span class="hs-identifier hs-var hs-var">distPara</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; f (b, a) -&gt; (b, f a)
</span><a href="Data.Functor.Foldable.html#distZygo"><span class="hs-identifier hs-var">distZygo</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span id="local-6989586621679085009"><span id="local-6989586621679085011"><span id="local-6989586621679085012"><span class="annot"><a href="Data.Functor.Foldable.html#distParaT"><span class="hs-identifier hs-type">distParaT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085011"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085010"><span class="annot"><a href="#local-6989586621679085010"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085011"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085010"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085011"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085010"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085011"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085009"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085011"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085012"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085009"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-322"></span><span id="distParaT"><span class="annot"><span class="annottext">distParaT :: forall t (w :: * -&gt; *) a.
(Corecursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; Base t (EnvT t w a) -&gt; EnvT t w (Base t a)
</span><a href="Data.Functor.Foldable.html#distParaT"><span class="hs-identifier hs-var hs-var">distParaT</span></a></span></span><span> </span><span id="local-6989586621679083948"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083948"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) b a.
(Functor f, Comonad w) =&gt;
(f b -&gt; b)
-&gt; (forall c. f (w c) -&gt; w (f c))
-&gt; f (EnvT b w a)
-&gt; EnvT b w (f a)
</span><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier hs-var">distZygoT</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083948"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">-- | A recursive datatype which can be rolled up one recursion layer at a time.</span><span>
</span><span id="line-325"></span><span class="hs-comment">--</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- For example, a value of type @'ListF' a [a]@ can be rolled up into a @[a]@.</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- This @[a]@ can then be used in a 'Cons' to construct another @'ListF' a [a]@,</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- which can be rolled up as well, and so on.</span><span>
</span><span id="line-329"></span><span class="hs-comment">--</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- Typically, 'Corecursive' types also have a 'Recursive' instance, in which</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- case 'embed' and 'project' are inverses.</span><span>
</span><span id="line-332"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Corecursive"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-var">Corecursive</span></a></span></span><span> </span><span id="local-6989586621679085033"><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-comment">-- | Roll up a single recursion layer.</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-comment">-- &gt;&gt;&gt; embed (Cons 1 [2,3])</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-comment">-- [1,2,3]</span><span>
</span><span id="line-338"></span><span>  </span><span id="embed"><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-type">embed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-cpp">
#ifdef HAS_GENERIC
</span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="embed"><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-type">embed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Generic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Rep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-341"></span><span>  </span><span id="local-6989586621679083946"><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var hs-var">embed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a x. Generic a =&gt; Rep a x -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a x. Generic a =&gt; a -&gt; Rep a x
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">from</span></a></span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-comment">-- | An alias for 'unfold'.</span><span>
</span><span id="line-345"></span><span>  </span><span id="ana"><span class="annot"><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-type">ana</span></a></span></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085001"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085001"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ a (Base t)-coalgebra</span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085001"><span class="hs-identifier hs-type">a</span></a></span><span>               </span><span class="hs-comment">-- ^ seed</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span></span><span>               </span><span class="hs-comment">-- ^ resulting fixed point</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621679083939"><span class="annot"><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-var hs-var">ana</span></a></span><span> </span><span id="local-6989586621679083935"><span class="annot"><span class="annottext">a -&gt; Base t a
</span><a href="#local-6989586621679083935"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083934"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083934"><span class="annot"><span class="annottext">a :: a -&gt; t
</span><a href="#local-6989586621679083934"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083934"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t a
</span><a href="#local-6989586621679083935"><span class="hs-identifier hs-var">g</span></a></span></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>  </span><span id="apo"><span class="annot"><a href="Data.Functor.Foldable.html#apo"><span class="hs-identifier hs-type">apo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679084999"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084999"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084999"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084999"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679083933"><span class="annot"><a href="Data.Functor.Foldable.html#apo"><span class="hs-identifier hs-var hs-var">apo</span></a></span><span> </span><span id="local-6989586621679083929"><span class="annot"><span class="annottext">a -&gt; Base t (Either t a)
</span><a href="#local-6989586621679083929"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083928"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083928"><span class="annot"><span class="annottext">a :: a -&gt; t
</span><a href="#local-6989586621679083928"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083928"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t (Either t a)
</span><a href="#local-6989586621679083929"><span class="hs-identifier hs-var">g</span></a></span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-comment">-- | Fokkinga's postpromorphism</span><span>
</span><span id="line-355"></span><span>  </span><span id="postpro"><span class="annot"><a href="Data.Functor.Foldable.html#postpro"><span class="hs-identifier hs-type">postpro</span></a></span></span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679084992"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084993"><span class="annot"><a href="#local-6989586621679084993"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084993"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084993"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- natural transformation</span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084992"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084992"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>                  </span><span class="hs-comment">-- a (Base t)-coalgebra</span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084992"><span class="hs-identifier hs-type">a</span></a></span><span>                                </span><span class="hs-comment">-- seed</span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-361"></span><span>  </span><span id="local-6989586621679083925"><span class="annot"><a href="Data.Functor.Foldable.html#postpro"><span class="hs-identifier hs-var hs-var">postpro</span></a></span><span> </span><span id="local-6989586621679083918"><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083918"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679083917"><span class="annot"><span class="annottext">a -&gt; Base t a
</span><a href="#local-6989586621679083917"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083916"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083916"><span class="annot"><span class="annottext">a :: a -&gt; t
</span><a href="#local-6989586621679083916"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s t.
(Recursive s, Corecursive t) =&gt;
(forall a. Base s a -&gt; Base t a) -&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-var">hoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083918"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679083916"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t a
</span><a href="#local-6989586621679083917"><span class="hs-identifier hs-var">g</span></a></span></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-comment">-- | A generalized postpromorphism</span><span>
</span><span id="line-364"></span><span>  </span><span id="gpostpro"><span class="annot"><a href="Data.Functor.Foldable.html#gpostpro"><span class="hs-identifier hs-type">gpostpro</span></a></span></span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679084988"><span id="local-6989586621679084990"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084990"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084989"><span class="annot"><a href="#local-6989586621679084989"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084990"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084989"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084990"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084989"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- distributive law</span><span>
</span><span id="line-367"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679083915"><span class="annot"><a href="#local-6989586621679083915"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083915"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083915"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- natural transformation</span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084988"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084990"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084988"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>                      </span><span class="hs-comment">-- a (Base t)-m-coalgebra</span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084988"><span class="hs-identifier hs-type">a</span></a></span><span>                                        </span><span class="hs-comment">-- seed</span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-371"></span><span>  </span><span id="local-6989586621679083914"><span class="annot"><a href="Data.Functor.Foldable.html#gpostpro"><span class="hs-identifier hs-var hs-var">gpostpro</span></a></span><span> </span><span id="local-6989586621679083903"><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083903"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083902"><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083902"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679083901"><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083901"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m a -&gt; t
</span><a href="#local-6989586621679083900"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083900"><span class="annot"><span class="annottext">a :: m a -&gt; t
</span><a href="#local-6989586621679083900"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s t.
(Recursive s, Corecursive t) =&gt;
(forall a. Base s a -&gt; Base t a) -&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-var">hoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t b -&gt; Base t b
</span><a href="#local-6989586621679083902"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; t
</span><a href="#local-6989586621679083900"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">join</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083903"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083901"><span class="hs-identifier hs-var">g</span></a></span></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- | An alias for 'refold'.</span><span>
</span><span id="line-374"></span><span id="local-6989586621679084976"><span id="local-6989586621679084977"><span id="local-6989586621679084978"><span class="annot"><a href="Data.Functor.Foldable.html#hylo"><span class="hs-identifier hs-type">hylo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084978"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084978"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084977"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084977"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084976"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084978"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084976"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084976"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084977"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-375"></span><span id="hylo"><span class="annot"><span class="annottext">hylo :: forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; (a -&gt; f a) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#hylo"><span class="hs-identifier hs-var hs-var">hylo</span></a></span></span><span> </span><span id="local-6989586621679083897"><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083897"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083896"><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083896"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083895"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083895"><span class="annot"><span class="annottext">h :: a -&gt; b
</span><a href="#local-6989586621679083895"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083897"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083895"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083896"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-comment">-- | Folds a recursive type down to a value, one layer at a time.</span><span>
</span><span id="line-378"></span><span class="hs-comment">--</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- let mySum :: [Int] -&gt; Int</span><span>
</span><span id="line-381"></span><span class="hs-comment">--     mySum = fold $ \case</span><span>
</span><span id="line-382"></span><span class="hs-comment">--       Nil -&gt; 0</span><span>
</span><span id="line-383"></span><span class="hs-comment">--       Cons x sumXs -&gt; x + sumXs</span><span>
</span><span id="line-384"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-385"></span><span class="hs-comment">--</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- &gt;&gt;&gt; mySum [10,11,12]</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- 33</span><span>
</span><span id="line-388"></span><span class="hs-comment">--</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- In our running example, one layer consists of an 'Int' and a list of recursive positions. In @Tree Int@, those recursive positions contain sub-trees of type @Tree Int@. Since we are working one layer at a time, the @Base t a -&gt; a@ function is not given a @Tree Int@, but a @TreeF Int String@. That is, each recursive position contains the 'String' resulting from recursively folding the corresponding sub-tree.</span><span>
</span><span id="line-390"></span><span class="hs-comment">--</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- let pprint1 :: Tree Int -&gt; String</span><span>
</span><span id="line-393"></span><span class="hs-comment">--     pprint1 = fold $ \case</span><span>
</span><span id="line-394"></span><span class="hs-comment">--       NodeF i [] -&gt; show i</span><span>
</span><span id="line-395"></span><span class="hs-comment">--       NodeF i ss -&gt; show i ++ &quot;: [&quot; ++ intercalate &quot;, &quot; ss ++ &quot;]&quot;</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-397"></span><span class="hs-comment">--</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint1 myTree</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- 0: [1, 2, 3: [31: [311: [3111, 3112]]]]</span><span>
</span><span id="line-400"></span><span class="hs-comment">--</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- More generally, the 't' argument is the recursive value, the 'a' is the final result, and the @Base t a -&gt; a@ function explains how to reduce a single layer full of recursive results down to a result.</span><span>
</span><span id="line-402"></span><span id="local-6989586621679084971"><span id="local-6989586621679084972"><span class="annot"><a href="Data.Functor.Foldable.html#fold"><span class="hs-identifier hs-type">fold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084972"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084972"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084971"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084971"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084972"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084971"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-403"></span><span id="fold"><span class="annot"><span class="annottext">fold :: forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#fold"><span class="hs-identifier hs-var hs-var">fold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- | A generalization of 'unfoldr'. The starting seed is expanded into a base</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- functor whose recursive positions contain more seeds, which are themselves</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- expanded, and so on.</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- &gt;&gt;&gt; let ourEnumFromTo :: Int -&gt; Int -&gt; [Int]</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- &gt;&gt;&gt;     ourEnumFromTo lo hi = ana go lo where</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- &gt;&gt;&gt;         go i = if i &gt; hi then Nil else Cons i (i + 1)</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- &gt;&gt;&gt; :}</span><span>
</span><span id="line-414"></span><span class="hs-comment">--</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- &gt;&gt;&gt; ourEnumFromTo 1 4</span><span>
</span><span id="line-416"></span><span class="hs-comment">-- [1,2,3,4]</span><span>
</span><span id="line-417"></span><span id="local-6989586621679084968"><span id="local-6989586621679084969"><span class="annot"><a href="Data.Functor.Foldable.html#unfold"><span class="hs-identifier hs-type">unfold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084969"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084968"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084969"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084968"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084968"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084969"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-418"></span><span id="unfold"><span class="annot"><span class="annottext">unfold :: forall t a. Corecursive t =&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#unfold"><span class="hs-identifier hs-var hs-var">unfold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Corecursive t =&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-var">ana</span></a></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-comment">-- | An optimized version of @fold f . unfold g@.</span><span>
</span><span id="line-421"></span><span class="hs-comment">--</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- Useful when your recursion structure is shaped like a particular recursive</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- datatype, but you're neither consuming nor producing that recursive datatype.</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- For example, the recursion structure of quick sort is a binary tree, but its</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- input and output is a list, not a binary tree.</span><span>
</span><span id="line-426"></span><span class="hs-comment">--</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- &gt;&gt;&gt; data BinTreeF a b = Tip | Branch b a b deriving (Functor)</span><span>
</span><span id="line-428"></span><span class="hs-comment">--</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- &gt;&gt;&gt; let quicksort :: Ord a =&gt; [a] -&gt; [a]</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- &gt;&gt;&gt;     quicksort = refold merge split where</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- &gt;&gt;&gt;         split []     = Tip</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- &gt;&gt;&gt;         split (x:xs) = let (l, r) = partition (&lt;x) xs in Branch l x r</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- &gt;&gt;&gt;</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- &gt;&gt;&gt;         merge Tip            = []</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- &gt;&gt;&gt;         merge (Branch l x r) = l ++ [x] ++ r</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- &gt;&gt;&gt; :}</span><span>
</span><span id="line-438"></span><span class="hs-comment">--</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- &gt;&gt;&gt; quicksort [1,5,2,8,4,9,8]</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- [1,2,4,5,8,8,9]</span><span>
</span><span id="line-441"></span><span id="local-6989586621679083888"><span id="local-6989586621679083889"><span id="local-6989586621679083890"><span class="annot"><a href="Data.Functor.Foldable.html#refold"><span class="hs-identifier hs-type">refold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083890"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083890"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083889"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083889"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083888"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083890"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083888"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083888"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083889"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-442"></span><span id="refold"><span class="annot"><span class="annottext">refold :: forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; (a -&gt; f a) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#refold"><span class="hs-identifier hs-var hs-var">refold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; (a -&gt; f a) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#hylo"><span class="hs-identifier hs-var">hylo</span></a></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083885"><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679083885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Base.html#ListF"><span class="hs-identifier hs-type">ListF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083885"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-445"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083872"><span id="local-6989586621679083874"><span id="local-6989586621679083876"><span id="local-6989586621679083879"><span id="local-6989586621679084963"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084963"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679083869"><span class="annot"><span class="annottext">project :: [a] -&gt; Base [a] [a]
</span><a href="#local-6989586621679083869"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083868"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083868"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621679083867"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083867"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; ListF a b
</span><a href="Data.Functor.Base.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083868"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083867"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. ListF a b
</span><a href="Data.Functor.Base.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621679083863"><span class="annot"><span class="annottext">para :: forall a. (Base [a] ([a], a) -&gt; a) -&gt; [a] -&gt; a
</span><a href="#local-6989586621679083863"><span class="hs-identifier hs-var hs-var hs-var hs-var">para</span></a></span></span><span> </span><span id="local-6989586621679083862"><span class="annot"><span class="annottext">Base [a] ([a], a) -&gt; a
</span><a href="#local-6989586621679083862"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083861"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083861"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621679083860"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083860"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base [a] ([a], a) -&gt; a
</span><a href="#local-6989586621679083862"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; ListF a b
</span><a href="Data.Functor.Base.html#Cons"><span class="hs-identifier hs-var">Cons</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083861"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083860"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t (t, a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#para"><span class="hs-identifier hs-var">para</span></a></span><span> </span><span class="annot"><span class="annottext">Base [a] ([a], a) -&gt; a
</span><a href="#local-6989586621679083862"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083860"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#para"><span class="hs-identifier hs-var">para</span></a></span><span> </span><span id="local-6989586621679083859"><span class="annot"><span class="annottext">Base [a] ([a], a) -&gt; a
</span><a href="#local-6989586621679083859"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base [a] ([a], a) -&gt; a
</span><a href="#local-6989586621679083859"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. ListF a b
</span><a href="Data.Functor.Base.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083848"><span id="local-6989586621679083850"><span id="local-6989586621679083853"><span id="local-6989586621679084959"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084959"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-453"></span><span>  </span><span id="local-6989586621679083846"><span class="annot"><span class="annottext">embed :: Base [a] [a] -&gt; [a]
</span><a href="#local-6989586621679083846"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Base.html#Cons"><span class="hs-identifier hs-type">Cons</span></a></span><span> </span><span id="local-6989586621679083845"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083845"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083844"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083844"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083845"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083844"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-454"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">ListF a [a]
Base [a] [a]
</span><a href="Data.Functor.Base.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span>  </span><span id="local-6989586621679083842"><span class="annot"><span class="annottext">apo :: forall a. (a -&gt; Base [a] (Either [a] a)) -&gt; a -&gt; [a]
</span><a href="#local-6989586621679083842"><span class="hs-identifier hs-var hs-var hs-var hs-var">apo</span></a></span></span><span> </span><span id="local-6989586621679083841"><span class="annot"><span class="annottext">a -&gt; Base [a] (Either [a] a)
</span><a href="#local-6989586621679083841"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083840"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083840"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; Base [a] (Either [a] a)
</span><a href="#local-6989586621679083841"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083840"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-457"></span><span>    </span><span class="annot"><a href="Data.Functor.Base.html#Cons"><span class="hs-identifier hs-type">Cons</span></a></span><span> </span><span id="local-6989586621679083839"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083839"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679083838"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083838"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083839"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083838"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-458"></span><span>    </span><span class="annot"><a href="Data.Functor.Base.html#Cons"><span class="hs-identifier hs-type">Cons</span></a></span><span> </span><span id="local-6989586621679083837"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083837"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679083836"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083836"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083837"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">forall t a. Corecursive t =&gt; (a -&gt; Base t (Either t a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#apo"><span class="hs-identifier hs-var">apo</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base [a] (Either [a] a)
</span><a href="#local-6989586621679083841"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083836"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-459"></span><span>    </span><span class="annot"><span class="annottext">ListF a (Either [a] a)
Base [a] (Either [a] a)
</span><a href="Data.Functor.Base.html#Nil"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083835"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083835"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Base.html#NonEmptyF"><span class="hs-identifier hs-type">NonEmptyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083835"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-462"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083821"><span id="local-6989586621679083823"><span id="local-6989586621679083825"><span id="local-6989586621679083827"><span id="local-6989586621679083829"><span id="local-6989586621679084955"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084955"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-463"></span><span>  </span><span id="local-6989586621679083819"><span class="annot"><span class="annottext">project :: NonEmpty a -&gt; Base (NonEmpty a) (NonEmpty a)
</span><a href="#local-6989586621679083819"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083818"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083818"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:|</span></a></span><span id="local-6989586621679083817"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083817"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Maybe b -&gt; NonEmptyF a b
</span><a href="Data.Functor.Base.html#NonEmptyF"><span class="hs-identifier hs-var">NonEmptyF</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083818"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe (NonEmpty a)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083817"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-464"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083804"><span id="local-6989586621679083806"><span id="local-6989586621679083808"><span id="local-6989586621679083810"><span id="local-6989586621679084951"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084951"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679083799"><span class="annot"><span class="annottext">embed :: Base (NonEmpty a) (NonEmpty a) -&gt; NonEmpty a
</span><a href="#local-6989586621679083799"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">(:|)</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NonEmptyF a b -&gt; a
</span><a href="Data.Functor.Base.html#head"><span class="hs-identifier hs-var">NEF.head</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NonEmptyF a b -&gt; Maybe b
</span><a href="Data.Functor.Base.html#tail"><span class="hs-identifier hs-var">NEF.tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083796"><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Tree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083796"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Functor.Base.html#TreeF"><span class="hs-identifier hs-type">TreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083796"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-468"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083782"><span id="local-6989586621679083784"><span id="local-6989586621679083786"><span id="local-6989586621679083788"><span id="local-6989586621679083790"><span id="local-6989586621679084941"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Tree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084941"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>  </span><span id="local-6989586621679083780"><span class="annot"><span class="annottext">project :: Tree a -&gt; Base (Tree a) (Tree a)
</span><a href="#local-6989586621679083780"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Node</span></a></span><span> </span><span id="local-6989586621679083778"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083778"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083777"><span class="annot"><span class="annottext">[Tree a]
</span><a href="#local-6989586621679083777"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; ForestF a b -&gt; TreeF a b
</span><a href="Data.Functor.Base.html#NodeF"><span class="hs-identifier hs-var">NodeF</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083778"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[Tree a]
</span><a href="#local-6989586621679083777"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-470"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083764"><span id="local-6989586621679083766"><span id="local-6989586621679083768"><span id="local-6989586621679083770"><span id="local-6989586621679084937"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Tree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084937"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-471"></span><span>  </span><span id="local-6989586621679083763"><span class="annot"><span class="annottext">embed :: Base (Tree a) (Tree a) -&gt; Tree a
</span><a href="#local-6989586621679083763"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Base.html#NodeF"><span class="hs-identifier hs-type">NodeF</span></a></span><span> </span><span id="local-6989586621679083762"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083762"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083761"><span class="annot"><span class="annottext">ForestF a (Tree a)
</span><a href="#local-6989586621679083761"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [Tree a] -&gt; Tree a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Node</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083762"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ForestF a (Tree a)
</span><a href="#local-6989586621679083761"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Natural</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span>
</span><span id="line-474"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083747"><span id="local-6989586621679083749"><span id="local-6989586621679083751"><span id="local-6989586621679083753"><span id="local-6989586621679083755"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Natural</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-475"></span><span>  </span><span id="local-6989586621679083739"><span class="annot"><span class="annottext">project :: Natural -&gt; Base Natural Natural
</span><a href="#local-6989586621679083739"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span> </span><span id="local-6989586621679083738"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679083738"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679083738"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083726"><span id="local-6989586621679083728"><span id="local-6989586621679083730"><span id="local-6989586621679083732"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Natural</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-478"></span><span>  </span><span id="local-6989586621679083722"><span class="annot"><span class="annottext">embed :: Base Natural Natural -&gt; Natural
</span><a href="#local-6989586621679083722"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-comment">-- | Cofree comonads are Recursive/Corecursive</span><span>
</span><span id="line-481"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083719"><span id="local-6989586621679083720"><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083720"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083719"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083720"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083719"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-482"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083705"><span id="local-6989586621679083707"><span id="local-6989586621679083709"><span id="local-6989586621679083711"><span id="local-6989586621679083713"><span id="local-6989586621679084930"><span id="local-6989586621679084931"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084931"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084931"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084930"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>  </span><span id="local-6989586621679083703"><span class="annot"><span class="annottext">project :: Cofree f a -&gt; Base (Cofree f a) (Cofree f a)
</span><a href="#local-6989586621679083703"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083702"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083702"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-operator hs-type">:&lt;</span></a></span><span> </span><span id="local-6989586621679083700"><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083700"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083702"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. a -&gt; f b -&gt; CofreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-operator hs-var">CCTC.:&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083700"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-484"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083687"><span id="local-6989586621679083689"><span id="local-6989586621679083691"><span id="local-6989586621679083693"><span id="local-6989586621679084925"><span id="local-6989586621679084926"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084926"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084925"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>  </span><span id="local-6989586621679083686"><span class="annot"><span class="annottext">embed :: Base (Cofree f a) (Cofree f a) -&gt; Cofree f a
</span><a href="#local-6989586621679083686"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083685"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083685"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-operator hs-type">CCTC.:&lt;</span></a></span><span> </span><span id="local-6989586621679083684"><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083684"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083685"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. a -&gt; f (Cofree f a) -&gt; Cofree f a
</span><a href="../../../../free/html/src"><span class="hs-operator hs-var">:&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083684"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="hs-comment">-- | Cofree tranformations of comonads are Recursive/Corecusive</span><span>
</span><span id="line-488"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083681"><span id="local-6989586621679083682"><span id="local-6989586621679083683"><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083683"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083682"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083681"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Compose</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083682"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083683"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083681"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083667"><span id="local-6989586621679083669"><span id="local-6989586621679083671"><span id="local-6989586621679083673"><span id="local-6989586621679083675"><span id="local-6989586621679084917"><span id="local-6989586621679084918"><span id="local-6989586621679084919"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084919"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084918"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084918"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084919"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084917"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-490"></span><span>  </span><span id="local-6989586621679083664"><span class="annot"><span class="annottext">project :: CofreeT f w a -&gt; Base (CofreeT f w a) (CofreeT f w a)
</span><a href="#local-6989586621679083664"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} {k1} (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Compose</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) a.
CofreeT f w a -&gt; w (CofreeF f a (CofreeT f w a))
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">runCofreeT</span></a></span><span>
</span><span id="line-491"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083650"><span id="local-6989586621679083652"><span id="local-6989586621679083654"><span id="local-6989586621679083656"><span id="local-6989586621679084906"><span id="local-6989586621679084907"><span id="local-6989586621679084908"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084908"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084907"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084907"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084908"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084906"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-492"></span><span>  </span><span id="local-6989586621679083648"><span class="annot"><span class="annottext">embed :: Base (CofreeT f w a) (CofreeT f w a) -&gt; CofreeT f w a
</span><a href="#local-6989586621679083648"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) a.
w (CofreeF f a (CofreeT f w a)) -&gt; CofreeT f w a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CofreeT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k1} {k2} (f :: k1 -&gt; *) (g :: k2 -&gt; k1) (a :: k2).
Compose f g a -&gt; f (g a)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">getCompose</span></a></span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span class="hs-comment">-- | Free monads are Recursive/Corecursive</span><span>
</span><span id="line-495"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083644"><span id="local-6989586621679083645"><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083645"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083644"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083645"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083644"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-496"></span><span>
</span><span id="line-497"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083630"><span id="local-6989586621679083632"><span id="local-6989586621679083634"><span id="local-6989586621679083636"><span id="local-6989586621679083638"><span id="local-6989586621679084893"><span id="local-6989586621679084894"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084894"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084894"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084893"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-498"></span><span>  </span><span id="local-6989586621679083628"><span class="annot"><span class="annottext">project :: Free f a -&gt; Base (Free f a) (Free f a)
</span><a href="#local-6989586621679083628"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Pure</span></a></span><span> </span><span id="local-6989586621679083626"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083626"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083626"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span id="local-6989586621679083623"><span class="annot"><span class="annottext">f (Free f a)
</span><a href="#local-6989586621679083623"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Free</span></a></span><span> </span><span class="annot"><span class="annottext">f (Free f a)
</span><a href="#local-6989586621679083623"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span id="local-6989586621679084888"><span id="local-6989586621679084889"><span class="annot"><a href="Data.Functor.Foldable.html#improveF"><span class="hs-identifier hs-type">improveF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084889"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084889"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084888"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084889"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084888"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-502"></span><span id="improveF"><span class="annot"><span class="annottext">improveF :: forall (f :: * -&gt; *) a. Functor f =&gt; F f a -&gt; Free f a
</span><a href="Data.Functor.Foldable.html#improveF"><span class="hs-identifier hs-var hs-var">improveF</span></a></span></span><span> </span><span id="local-6989586621679083618"><span class="annot"><span class="annottext">F f a
</span><a href="#local-6989586621679083618"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Functor f =&gt;
(forall (m :: * -&gt; *). MonadFree f m =&gt; m a) -&gt; Free f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMFC.improve</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a. MonadFree f m =&gt; F f a -&gt; m a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMFC.fromF</span></a></span><span> </span><span class="annot"><span class="annottext">F f a
</span><a href="#local-6989586621679083618"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- | It may be better to work with the instance for `CMFC.F` directly.</span><span>
</span><span id="line-504"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083607"><span id="local-6989586621679084876"><span id="local-6989586621679084877"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084877"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084877"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084876"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621679083604"><span class="annot"><span class="annottext">embed :: Base (Free f a) (Free f a) -&gt; Free f a
</span><a href="#local-6989586621679083604"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Pure</span></a></span><span> </span><span id="local-6989586621679083603"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083603"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. a -&gt; Free f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083603"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-506"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Free</span></a></span><span> </span><span id="local-6989586621679083602"><span class="annot"><span class="annottext">f (Free f a)
</span><a href="#local-6989586621679083602"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. f (Free f a) -&gt; Free f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">Free</span></a></span><span> </span><span class="annot"><span class="annottext">f (Free f a)
</span><a href="#local-6989586621679083602"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span id="local-6989586621679083599"><span class="annot"><span class="annottext">ana :: forall a. (a -&gt; Base (Free f a) a) -&gt; a -&gt; Free f a
</span><a href="#local-6989586621679083599"><span class="hs-identifier hs-var hs-var hs-var hs-var">ana</span></a></span></span><span>               </span><span id="local-6989586621679083598"><span class="annot"><span class="annottext">a -&gt; Base (Free f a) a
</span><a href="#local-6989586621679083598"><span class="hs-identifier hs-var">coalg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; F f a -&gt; Free f a
</span><a href="Data.Functor.Foldable.html#improveF"><span class="hs-identifier hs-var">improveF</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t a. Corecursive t =&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-var">ana</span></a></span><span>               </span><span class="annot"><span class="annottext">a -&gt; Base (Free f a) a
</span><a href="#local-6989586621679083598"><span class="hs-identifier hs-var">coalg</span></a></span><span>
</span><span id="line-508"></span><span>  </span><span id="local-6989586621679083593"><span class="annot"><span class="annottext">postpro :: forall a.
Recursive (Free f a) =&gt;
(forall b. Base (Free f a) b -&gt; Base (Free f a) b)
-&gt; (a -&gt; Base (Free f a) a) -&gt; a -&gt; Free f a
</span><a href="#local-6989586621679083593"><span class="hs-identifier hs-var hs-var hs-var hs-var">postpro</span></a></span></span><span>       </span><span id="local-6989586621679083592"><span class="annot"><span class="annottext">forall b. Base (Free f a) b -&gt; Base (Free f a) b
</span><a href="#local-6989586621679083592"><span class="hs-identifier hs-var">nat</span></a></span></span><span> </span><span id="local-6989586621679083591"><span class="annot"><span class="annottext">a -&gt; Base (Free f a) a
</span><a href="#local-6989586621679083591"><span class="hs-identifier hs-var">coalg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; F f a -&gt; Free f a
</span><a href="Data.Functor.Foldable.html#improveF"><span class="hs-identifier hs-var">improveF</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t a.
(Corecursive t, Recursive t) =&gt;
(forall b. Base t b -&gt; Base t b) -&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#postpro"><span class="hs-identifier hs-var">postpro</span></a></span><span>       </span><span class="annot"><span class="annottext">forall b. Base (Free f a) b -&gt; Base (Free f a) b
</span><a href="#local-6989586621679083592"><span class="hs-identifier hs-var">nat</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base (Free f a) a
</span><a href="#local-6989586621679083591"><span class="hs-identifier hs-var">coalg</span></a></span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621679083584"><span class="annot"><span class="annottext">gpostpro :: forall (m :: * -&gt; *) a.
(Recursive (Free f a), Monad m) =&gt;
(forall b. m (Base (Free f a) b) -&gt; Base (Free f a) (m b))
-&gt; (forall b. Base (Free f a) b -&gt; Base (Free f a) b)
-&gt; (a -&gt; Base (Free f a) (m a))
-&gt; a
-&gt; Free f a
</span><a href="#local-6989586621679083584"><span class="hs-identifier hs-var hs-var hs-var hs-var">gpostpro</span></a></span></span><span> </span><span id="local-6989586621679083583"><span class="annot"><span class="annottext">forall b. m (Base (Free f a) b) -&gt; Base (Free f a) (m b)
</span><a href="#local-6989586621679083583"><span class="hs-identifier hs-var">dist</span></a></span></span><span> </span><span id="local-6989586621679083582"><span class="annot"><span class="annottext">forall b. Base (Free f a) b -&gt; Base (Free f a) b
</span><a href="#local-6989586621679083582"><span class="hs-identifier hs-var">nat</span></a></span></span><span> </span><span id="local-6989586621679083581"><span class="annot"><span class="annottext">a -&gt; Base (Free f a) (m a)
</span><a href="#local-6989586621679083581"><span class="hs-identifier hs-var">coalg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; F f a -&gt; Free f a
</span><a href="Data.Functor.Foldable.html#improveF"><span class="hs-identifier hs-var">improveF</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (m :: * -&gt; *) a.
(Corecursive t, Recursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (forall b. Base t b -&gt; Base t b)
-&gt; (a -&gt; Base t (m a))
-&gt; a
-&gt; t
</span><a href="Data.Functor.Foldable.html#gpostpro"><span class="hs-identifier hs-var">gpostpro</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. m (Base (Free f a) b) -&gt; Base (Free f a) (m b)
</span><a href="#local-6989586621679083583"><span class="hs-identifier hs-var">dist</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base (Free f a) b -&gt; Base (Free f a) b
</span><a href="#local-6989586621679083582"><span class="hs-identifier hs-var">nat</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base (Free f a) (m a)
</span><a href="#local-6989586621679083581"><span class="hs-identifier hs-var">coalg</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-comment">-- | Free transformations of monads are Recursive/Corecursive</span><span>
</span><span id="line-512"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083578"><span id="local-6989586621679083579"><span id="local-6989586621679083580"><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083580"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083579"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083578"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Compose</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083579"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083580"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083578"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083564"><span id="local-6989586621679083566"><span id="local-6989586621679083568"><span id="local-6989586621679083570"><span id="local-6989586621679083572"><span id="local-6989586621679084863"><span id="local-6989586621679084864"><span id="local-6989586621679084865"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084865"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084864"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084864"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084865"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084863"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-514"></span><span>  </span><span id="local-6989586621679083562"><span class="annot"><span class="annottext">project :: FreeT f m a -&gt; Base (FreeT f m a) (FreeT f m a)
</span><a href="#local-6989586621679083562"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} {k1} (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Compose</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">runFreeT</span></a></span><span>
</span><span id="line-515"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083549"><span id="local-6989586621679083551"><span id="local-6989586621679083553"><span id="local-6989586621679083555"><span id="local-6989586621679084857"><span id="local-6989586621679084858"><span id="local-6989586621679084859"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084859"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084858"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084858"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084859"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084857"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-516"></span><span>  </span><span id="local-6989586621679083547"><span class="annot"><span class="annottext">embed :: Base (FreeT f m a) (FreeT f m a) -&gt; FreeT f m a
</span><a href="#local-6989586621679083547"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">FreeT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k1} {k2} (f :: k1 -&gt; *) (g :: k2 -&gt; k1) (a :: k2).
Compose f g a -&gt; f (g a)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">getCompose</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">-- If you are looking for instances for the free MonadPlus, please use the</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- instance for FreeT f [].</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-comment">-- If you are looking for instances for the free alternative and free</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- applicative, I'm sorry to disapoint you but you won't find them in this</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- package.  They can be considered recurive, but using non-uniform recursion;</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- this package only implements uniformly recursive folds / unfolds.</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-comment">-- | Example boring stub for non-recursive data types</span><span>
</span><span id="line-527"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083545"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083545"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083545"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083531"><span id="local-6989586621679083533"><span id="local-6989586621679083535"><span id="local-6989586621679083537"><span id="local-6989586621679083539"><span id="local-6989586621679084851"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084851"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083529"><span class="annot"><span class="annottext">project :: Maybe a -&gt; Base (Maybe a) (Maybe a)
</span><a href="#local-6989586621679083529"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Const</span></a></span><span>
</span><span id="line-529"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083516"><span id="local-6989586621679083518"><span id="local-6989586621679083520"><span id="local-6989586621679083522"><span id="local-6989586621679084847"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084847"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083515"><span class="annot"><span class="annottext">embed :: Base (Maybe a) (Maybe a) -&gt; Maybe a
</span><a href="#local-6989586621679083515"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">getConst</span></a></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="hs-comment">-- | Example boring stub for non-recursive data types</span><span>
</span><span id="line-532"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083512"><span id="local-6989586621679083513"><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083513"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083512"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083513"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083512"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083498"><span id="local-6989586621679083500"><span id="local-6989586621679083502"><span id="local-6989586621679083504"><span id="local-6989586621679083506"><span id="local-6989586621679084842"><span id="local-6989586621679084843"><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084843"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084842"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083497"><span class="annot"><span class="annottext">project :: Either a b -&gt; Base (Either a b) (Either a b)
</span><a href="#local-6989586621679083497"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Const</span></a></span><span>
</span><span id="line-534"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083485"><span id="local-6989586621679083487"><span id="local-6989586621679083489"><span id="local-6989586621679083491"><span id="local-6989586621679084840"><span id="local-6989586621679084841"><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084841"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084840"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083484"><span class="annot"><span class="annottext">embed :: Base (Either a b) (Either a b) -&gt; Either a b
</span><a href="#local-6989586621679083484"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">getConst</span></a></span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">-- | A generalized catamorphism</span><span>
</span><span id="line-537"></span><span id="local-6989586621679084836"><span id="local-6989586621679084838"><span id="local-6989586621679084839"><span class="annot"><a href="Data.Functor.Foldable.html#gfold"><span class="hs-identifier hs-type">gfold</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier hs-type">gcata</span></a></span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084837"><span class="annot"><a href="#local-6989586621679084837"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084837"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084837"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ a distributive law</span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084836"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084836"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>                      </span><span class="hs-comment">-- ^ a (Base t)-w-algebra</span><span>
</span><span id="line-541"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">t</span></a></span><span>                                        </span><span class="hs-comment">-- ^ fixed point</span><span>
</span><span id="line-542"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084836"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-543"></span><span id="gcata"><span class="annot"><span class="annottext">gcata :: forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier hs-var hs-var">gcata</span></a></span></span><span> </span><span id="local-6989586621679083474"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083474"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083473"><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083473"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083473"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">extract</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; w (Base t (w a))
</span><a href="#local-6989586621679083472"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679083472"><span class="annot"><span class="annottext">c :: t -&gt; w (Base t (w a))
</span><a href="#local-6989586621679083472"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083474"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">duplicate</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083473"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; w (Base t (w a))
</span><a href="#local-6989586621679083472"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span>
</span><span id="line-545"></span><span id="gfold"><span class="annot"><span class="annottext">gfold :: forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gfold"><span class="hs-identifier hs-var hs-var">gfold</span></a></span></span><span> </span><span id="local-6989586621679083467"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083467"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083466"><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083466"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083465"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679083465"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier hs-var">gcata</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083467"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Base t (w a) -&gt; a
</span><a href="#local-6989586621679083466"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679083465"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span id="local-6989586621679084828"><span id="local-6989586621679084829"><span class="annot"><a href="Data.Functor.Foldable.html#distCata"><span class="hs-identifier hs-type">distCata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084829"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084829"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084828"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084829"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084828"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-548"></span><span id="distCata"><span class="annot"><span class="annottext">distCata :: forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Identity a) -&gt; Identity (f a)
</span><a href="Data.Functor.Foldable.html#distCata"><span class="hs-identifier hs-var hs-var">distCata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Identity a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Identity</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">runIdentity</span></a></span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="hs-comment">-- | A generalized anamorphism</span><span>
</span><span id="line-551"></span><span id="local-6989586621679084819"><span id="local-6989586621679084821"><span id="local-6989586621679084822"><span class="annot"><a href="Data.Functor.Foldable.html#gunfold"><span class="hs-identifier hs-type">gunfold</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier hs-type">gana</span></a></span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084820"><span class="annot"><a href="#local-6989586621679084820"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084820"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084820"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ a distributive law</span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084819"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084819"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>                      </span><span class="hs-comment">-- ^ a (Base t)-m-coalgebra</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084819"><span class="hs-identifier hs-type">a</span></a></span><span>                                        </span><span class="hs-comment">-- ^ seed</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-557"></span><span id="gana"><span class="annot"><span class="annottext">gana :: forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier hs-var hs-var">gana</span></a></span></span><span> </span><span id="local-6989586621679083452"><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083452"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083451"><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083451"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Base t (m a)) -&gt; t
</span><a href="#local-6989586621679083450"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083451"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-558"></span><span>  </span><span id="local-6989586621679083450"><span class="annot"><span class="annottext">a :: m (Base t (m a)) -&gt; t
</span><a href="#local-6989586621679083450"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (Base t (m a)) -&gt; t
</span><a href="#local-6989586621679083450"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083451"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">join</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083452"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-559"></span><span id="gunfold"><span class="annot"><span class="annottext">gunfold :: forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gunfold"><span class="hs-identifier hs-var hs-var">gunfold</span></a></span></span><span> </span><span id="local-6989586621679083445"><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083445"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083444"><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083443"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083443"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier hs-var">gana</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083445"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Base t (m a)
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083443"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span id="local-6989586621679084811"><span id="local-6989586621679084812"><span class="annot"><a href="Data.Functor.Foldable.html#distAna"><span class="hs-identifier hs-type">distAna</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084812"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084812"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084812"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-562"></span><span id="distAna"><span class="annot"><span class="annottext">distAna :: forall (f :: * -&gt; *) a.
Functor f =&gt;
Identity (f a) -&gt; f (Identity a)
</span><a href="Data.Functor.Foldable.html#distAna"><span class="hs-identifier hs-var hs-var">distAna</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Identity a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Identity</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">runIdentity</span></a></span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-comment">-- | A generalized hylomorphism</span><span>
</span><span id="line-565"></span><span id="local-6989586621679084802"><span id="local-6989586621679084803"><span id="local-6989586621679084806"><span id="local-6989586621679084807"><span id="local-6989586621679084808"><span class="annot"><a href="Data.Functor.Foldable.html#grefold"><span class="hs-identifier hs-type">grefold</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier hs-type">ghylo</span></a></span><span>
</span><span id="line-566"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084806"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084805"><span class="annot"><a href="#local-6989586621679084805"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084805"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084805"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084804"><span class="annot"><a href="#local-6989586621679084804"><span class="hs-identifier hs-type">d</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084804"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084804"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084803"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084803"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084802"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084807"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084802"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084802"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-572"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084803"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span><span>
</span><span id="line-573"></span><span id="ghylo"><span class="annot"><span class="annottext">ghylo :: forall (w :: * -&gt; *) (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Comonad w, Functor f, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall d. m (f d) -&gt; f (m d))
-&gt; (f (w b) -&gt; b)
-&gt; (a -&gt; f (m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier hs-var hs-var">ghylo</span></a></span></span><span> </span><span id="local-6989586621679083428"><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083428"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621679083427"><span class="annot"><span class="annottext">forall d. m (f d) -&gt; f (m d)
</span><a href="#local-6989586621679083427"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679083426"><span class="annot"><span class="annottext">f (w b) -&gt; b
</span><a href="#local-6989586621679083426"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083425"><span class="annot"><span class="annottext">a -&gt; f (m a)
</span><a href="#local-6989586621679083425"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (w b) -&gt; b
</span><a href="#local-6989586621679083426"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; (a -&gt; f a) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#hylo"><span class="hs-identifier hs-var">hylo</span></a></span><span> </span><span class="annot"><span class="annottext">f (w b) -&gt; w b
</span><a href="#local-6989586621679083424"><span class="hs-identifier hs-var">alg</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; f (m a)
</span><a href="#local-6989586621679083423"><span class="hs-identifier hs-var">coalg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f (m a)
</span><a href="#local-6989586621679083425"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-574"></span><span>  </span><span id="local-6989586621679083423"><span class="annot"><span class="annottext">coalg :: m a -&gt; f (m a)
</span><a href="#local-6989586621679083423"><span class="hs-identifier hs-var hs-var">coalg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">join</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall d. m (f d) -&gt; f (m d)
</span><a href="#local-6989586621679083427"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f (m a)
</span><a href="#local-6989586621679083425"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-575"></span><span>  </span><span id="local-6989586621679083424"><span class="annot"><span class="annottext">alg :: f (w b) -&gt; w b
</span><a href="#local-6989586621679083424"><span class="hs-identifier hs-var hs-var">alg</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">f (w b) -&gt; b
</span><a href="#local-6989586621679083426"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083428"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">duplicate</span></a></span><span>
</span><span id="line-576"></span><span id="grefold"><span class="annot"><span class="annottext">grefold :: forall (w :: * -&gt; *) (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Comonad w, Functor f, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall d. m (f d) -&gt; f (m d))
-&gt; (f (w b) -&gt; b)
-&gt; (a -&gt; f (m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#grefold"><span class="hs-identifier hs-var hs-var">grefold</span></a></span></span><span> </span><span id="local-6989586621679083416"><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083416"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621679083415"><span class="annot"><span class="annottext">forall d. m (f d) -&gt; f (m d)
</span><a href="#local-6989586621679083415"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679083414"><span class="annot"><span class="annottext">f (w b) -&gt; b
</span><a href="#local-6989586621679083414"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083413"><span class="annot"><span class="annottext">a -&gt; f (m a)
</span><a href="#local-6989586621679083413"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083412"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083412"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Comonad w, Functor f, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall d. m (f d) -&gt; f (m d))
-&gt; (f (w b) -&gt; b)
-&gt; (a -&gt; f (m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier hs-var">ghylo</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083416"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">forall d. m (f d) -&gt; f (m d)
</span><a href="#local-6989586621679083415"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">f (w b) -&gt; b
</span><a href="#local-6989586621679083414"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f (m a)
</span><a href="#local-6989586621679083413"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083412"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span id="local-6989586621679084790"><span id="local-6989586621679084791"><span class="annot"><a href="Data.Functor.Foldable.html#futu"><span class="hs-identifier hs-type">futu</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084790"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084790"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084790"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-579"></span><span id="futu"><span class="annot"><span class="annottext">futu :: forall t a.
Corecursive t =&gt;
(a -&gt; Base t (Free (Base t) a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#futu"><span class="hs-identifier hs-var hs-var">futu</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier hs-var">gana</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; Free f (f a) -&gt; f (Free f a)
</span><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-var">distFutu</span></a></span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span id="local-6989586621679084782"><span id="local-6989586621679084784"><span id="local-6989586621679084785"><span class="annot"><a href="Data.Functor.Foldable.html#gfutu"><span class="hs-identifier hs-type">gfutu</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084784"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084784"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084783"><span class="annot"><a href="#local-6989586621679084783"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084784"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084783"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084784"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084783"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084784"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084782"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084785"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-582"></span><span id="gfutu"><span class="annot"><span class="annottext">gfutu :: forall t (m :: * -&gt; *) a.
(Corecursive t, Functor m, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (FreeT (Base t) m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gfutu"><span class="hs-identifier hs-var hs-var">gfutu</span></a></span></span><span> </span><span id="local-6989586621679083398"><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083398"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gana"><span class="hs-identifier hs-var">gana</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. h (f b) -&gt; f (h b))
-&gt; FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="Data.Functor.Foldable.html#distGFutu"><span class="hs-identifier hs-var">distGFutu</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. m (Base t b) -&gt; Base t (m b)
</span><a href="#local-6989586621679083398"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span id="local-6989586621679084786"><span id="local-6989586621679084787"><span class="annot"><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-type">distFutu</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084787"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084787"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084787"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084787"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084787"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-585"></span><span id="distFutu"><span class="annot"><span class="annottext">distFutu :: forall (f :: * -&gt; *) a. Functor f =&gt; Free f (f a) -&gt; f (Free f a)
</span><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-var hs-var">distFutu</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Pure</span></a></span><span> </span><span id="local-6989586621679083391"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083391"><span class="hs-identifier hs-var">fx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. a -&gt; Free f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083391"><span class="hs-identifier hs-var">fx</span></a></span><span>
</span><span id="line-586"></span><span class="annot"><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-var">distFutu</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span id="local-6989586621679083390"><span class="annot"><span class="annottext">f (Free f (f a))
</span><a href="#local-6989586621679083390"><span class="hs-identifier hs-var">ff</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. f (Free f a) -&gt; Free f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">Free</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; Free f (f a) -&gt; f (Free f a)
</span><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-var">distFutu</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (Free f (f a))
</span><a href="#local-6989586621679083390"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span id="local-6989586621679084774"><span id="local-6989586621679084776"><span id="local-6989586621679084777"><span class="annot"><a href="Data.Functor.Foldable.html#distGFutu"><span class="hs-identifier hs-type">distGFutu</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084775"><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084774"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084774"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-589"></span><span id="distGFutu"><span class="annot"><span class="annottext">distGFutu :: forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. h (f b) -&gt; f (h b))
-&gt; FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="Data.Functor.Foldable.html#distGFutu"><span class="hs-identifier hs-var hs-var">distGFutu</span></a></span></span><span> </span><span id="local-6989586621679083383"><span class="annot"><span class="annottext">forall b. h (f b) -&gt; f (h b)
</span><a href="#local-6989586621679083383"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="#local-6989586621679083382"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-590"></span><span>  </span><span id="local-6989586621679083382"><span class="annot"><span class="annottext">d :: FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="#local-6989586621679083382"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">FreeT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. h (f b) -&gt; f (h b)
</span><a href="#local-6989586621679083383"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">FreeF f (f a) (FreeT f h (f a)) -&gt; f (FreeF f a (FreeT f h a))
</span><a href="#local-6989586621679083381"><span class="hs-identifier hs-var">d'</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">runFreeT</span></a></span><span>
</span><span id="line-591"></span><span>  </span><span id="local-6989586621679083381"><span class="annot"><span class="annottext">d' :: FreeF f (f a) (FreeT f h (f a)) -&gt; f (FreeF f a (FreeT f h a))
</span><a href="#local-6989586621679083381"><span class="hs-identifier hs-var hs-var">d'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Pure</span></a></span><span> </span><span id="local-6989586621679083380"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083380"><span class="hs-identifier hs-var">ff</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083380"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-592"></span><span>  </span><span class="annot"><a href="#local-6989586621679083381"><span class="hs-identifier hs-var">d'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Free</span></a></span><span> </span><span id="local-6989586621679083379"><span class="annot"><span class="annottext">f (FreeT f h (f a))
</span><a href="#local-6989586621679083379"><span class="hs-identifier hs-var">ff</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Free</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="#local-6989586621679083382"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (FreeT f h (f a))
</span><a href="#local-6989586621679083379"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-595"></span><span class="hs-comment">-- Fix</span><span>
</span><span id="line-596"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083378"><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083378"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679083378"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-599"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083365"><span id="local-6989586621679083367"><span id="local-6989586621679083369"><span id="local-6989586621679083371"><span id="local-6989586621679083373"><span id="local-6989586621679084768"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084768"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084768"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-600"></span><span>  </span><span id="local-6989586621679083364"><span class="annot"><span class="annottext">project :: Fix f -&gt; Base (Fix f) (Fix f)
</span><a href="#local-6989586621679083364"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span id="local-6989586621679083362"><span class="annot"><span class="annottext">f (Fix f)
</span><a href="#local-6989586621679083362"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (Fix f)
</span><a href="#local-6989586621679083362"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-601"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083351"><span id="local-6989586621679083353"><span id="local-6989586621679083355"><span id="local-6989586621679083357"><span id="local-6989586621679084767"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084767"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084767"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-602"></span><span>  </span><span id="local-6989586621679083350"><span class="annot"><span class="annottext">embed :: Base (Fix f) (Fix f) -&gt; Fix f
</span><a href="#local-6989586621679083350"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). f (Fix f) -&gt; Fix f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Fix</span></a></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-comment">-- | Convert from one recursive type to another.</span><span>
</span><span id="line-605"></span><span class="hs-comment">--</span><span>
</span><span id="line-606"></span><span class="hs-comment">-- &gt;&gt;&gt; showTree $ hoist (\(NonEmptyF h t) -&gt; NodeF [h] (maybeToList t)) ( 'a' :| &quot;bcd&quot;)</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- (a (b (c d)))</span><span>
</span><span id="line-608"></span><span class="hs-comment">--</span><span>
</span><span id="line-609"></span><span id="local-6989586621679085028"><span id="local-6989586621679085029"><span class="annot"><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-type">hoist</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085029"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085028"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085027"><span class="annot"><a href="#local-6989586621679085027"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085029"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085027"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085028"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085027"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085029"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085028"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-611"></span><span id="hoist"><span class="annot"><span class="annottext">hoist :: forall s t.
(Recursive s, Corecursive t) =&gt;
(forall a. Base s a -&gt; Base t a) -&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#hoist"><span class="hs-identifier hs-var hs-var">hoist</span></a></span></span><span> </span><span id="local-6989586621679083345"><span class="annot"><span class="annottext">forall a. Base s a -&gt; Base t a
</span><a href="#local-6989586621679083345"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Base s a -&gt; Base t a
</span><a href="#local-6989586621679083345"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">-- | Convert from one recursive representation to another.</span><span>
</span><span id="line-614"></span><span class="hs-comment">--</span><span>
</span><span id="line-615"></span><span class="hs-comment">-- &gt;&gt;&gt; refix [&quot;foo&quot;, &quot;bar&quot;] :: Fix (ListF String)</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- Fix (Cons &quot;foo&quot; (Fix (Cons &quot;bar&quot; (Fix Nil))))</span><span>
</span><span id="line-617"></span><span class="hs-comment">--</span><span>
</span><span id="line-618"></span><span id="local-6989586621679084762"><span id="local-6989586621679084763"><span class="annot"><a href="Data.Functor.Foldable.html#refix"><span class="hs-identifier hs-type">refix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084762"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084762"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084762"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-619"></span><span id="refix"><span class="annot"><span class="annottext">refix :: forall s t. (Recursive s, Corecursive t, Base s ~ Base t) =&gt; s -&gt; t
</span><a href="Data.Functor.Foldable.html#refix"><span class="hs-identifier hs-var hs-var">refix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-622"></span><span class="hs-comment">-- Lambek</span><span>
</span><span id="line-623"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="hs-comment">-- | Lambek's lemma provides a default definition for 'project' in terms of 'cata' and 'embed'</span><span>
</span><span id="line-626"></span><span id="local-6989586621679084759"><span class="annot"><a href="Data.Functor.Foldable.html#lambek"><span class="hs-identifier hs-type">lambek</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084759"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084759"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084759"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084759"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084759"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-627"></span><span id="lambek"><span class="annot"><span class="annottext">lambek :: forall t. (Recursive t, Corecursive t) =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#lambek"><span class="hs-identifier hs-var hs-var">lambek</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="hs-comment">-- | The dual of Lambek's lemma, provides a default definition for 'embed' in terms of 'ana' and 'project'</span><span>
</span><span id="line-630"></span><span id="local-6989586621679084757"><span class="annot"><a href="Data.Functor.Foldable.html#colambek"><span class="hs-identifier hs-type">colambek</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-631"></span><span id="colambek"><span class="annot"><span class="annottext">colambek :: forall t. (Recursive t, Corecursive t) =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#colambek"><span class="hs-identifier hs-var hs-var">colambek</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Corecursive t =&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-var">ana</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083324"><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Mu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083324"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679083324"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-634"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083312"><span id="local-6989586621679083314"><span id="local-6989586621679083316"><span id="local-6989586621679083318"><span id="local-6989586621679084755"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084755"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Mu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084755"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-635"></span><span>  </span><span id="local-6989586621679083309"><span class="annot"><span class="annottext">project :: Mu f -&gt; Base (Mu f) (Mu f)
</span><a href="#local-6989586621679083309"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. (Recursive t, Corecursive t) =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#lambek"><span class="hs-identifier hs-var">lambek</span></a></span><span>
</span><span id="line-636"></span><span>  </span><span id="local-6989586621679083308"><span class="annot"><span class="annottext">cata :: forall a. (Base (Mu f) a -&gt; a) -&gt; Mu f -&gt; a
</span><a href="#local-6989586621679083308"><span class="hs-identifier hs-var hs-var hs-var hs-var">cata</span></a></span></span><span> </span><span id="local-6989586621679083307"><span class="annot"><span class="annottext">Base (Mu f) a -&gt; a
</span><a href="#local-6989586621679083307"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Mu</span></a></span><span> </span><span id="local-6989586621679083305"><span class="annot"><span class="annottext">forall a. (f a -&gt; a) -&gt; a
</span><a href="#local-6989586621679083305"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (f a -&gt; a) -&gt; a
</span><a href="#local-6989586621679083305"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Base (Mu f) a -&gt; a
</span><a href="#local-6989586621679083307"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-637"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083294"><span id="local-6989586621679083296"><span id="local-6989586621679083298"><span id="local-6989586621679083300"><span id="local-6989586621679084754"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084754"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Mu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084754"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-638"></span><span>  </span><span id="local-6989586621679083293"><span class="annot"><span class="annottext">embed :: Base (Mu f) (Mu f) -&gt; Mu f
</span><a href="#local-6989586621679083293"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span id="local-6989586621679083292"><span class="annot"><span class="annottext">Base (Mu f) (Mu f)
</span><a href="#local-6989586621679083292"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). (forall a. (f a -&gt; a) -&gt; a) -&gt; Mu f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Mu</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083289"><span class="annot"><span class="annottext">f a -&gt; a
</span><a href="#local-6989586621679083289"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f a -&gt; a
</span><a href="#local-6989586621679083289"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#fold"><span class="hs-identifier hs-var">fold</span></a></span><span> </span><span class="annot"><span class="annottext">f a -&gt; a
</span><a href="#local-6989586621679083289"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Base (Mu f) (Mu f)
</span><a href="#local-6989586621679083292"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083288"><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Nu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083288"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679083288"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-641"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083278"><span id="local-6989586621679083280"><span id="local-6989586621679083282"><span id="local-6989586621679084749"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084749"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Nu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084749"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-642"></span><span>  </span><span id="local-6989586621679083275"><span class="annot"><span class="annottext">embed :: Base (Nu f) (Nu f) -&gt; Nu f
</span><a href="#local-6989586621679083275"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. (Recursive t, Corecursive t) =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#colambek"><span class="hs-identifier hs-var">colambek</span></a></span><span>
</span><span id="line-643"></span><span>  </span><span id="local-6989586621679083274"><span class="annot"><span class="annottext">ana :: forall a. (a -&gt; Base (Nu f) a) -&gt; a -&gt; Nu f
</span><a href="#local-6989586621679083274"><span class="hs-identifier hs-var hs-var hs-var hs-var">ana</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (a -&gt; f a) -&gt; a -&gt; Nu f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Nu</span></a></span><span>
</span><span id="line-644"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083260"><span id="local-6989586621679083262"><span id="local-6989586621679083264"><span id="local-6989586621679083266"><span id="local-6989586621679083268"><span id="local-6989586621679084748"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084748"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Nu</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084748"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-645"></span><span>  </span><span id="local-6989586621679083259"><span class="annot"><span class="annottext">project :: Nu f -&gt; Base (Nu f) (Nu f)
</span><a href="#local-6989586621679083259"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Nu</span></a></span><span> </span><span id="local-6989586621679083257"><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083257"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083256"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083256"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (a -&gt; f a) -&gt; a -&gt; Nu f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Nu</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083257"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083257"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083256"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-comment">-- | Church encoded free monads are Recursive/Corecursive, in the same way that</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- 'Mu' is.</span><span>
</span><span id="line-649"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Base"><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-var">Base</span></a></span></span><span> </span><span id="local-6989586621679083254"><span id="local-6989586621679083255"><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083255"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083254"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083255"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083254"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-650"></span><span id="local-6989586621679084742"><span id="local-6989586621679084743"><span id="local-6989586621679084744"><span class="annot"><a href="Data.Functor.Foldable.html#cmfcCata"><span class="hs-identifier hs-type">cmfcCata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084744"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084743"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084742"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084743"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084743"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084742"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084744"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084743"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-651"></span><span id="cmfcCata"><span class="annot"><span class="annottext">cmfcCata :: forall a r (f :: * -&gt; *). (a -&gt; r) -&gt; (f r -&gt; r) -&gt; F f a -&gt; r
</span><a href="Data.Functor.Foldable.html#cmfcCata"><span class="hs-identifier hs-var hs-var">cmfcCata</span></a></span></span><span> </span><span id="local-6989586621679083252"><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083252"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679083251"><span class="annot"><span class="annottext">f r -&gt; r
</span><a href="#local-6989586621679083251"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span id="local-6989586621679083249"><span class="annot"><span class="annottext">forall r. (a -&gt; r) -&gt; (f r -&gt; r) -&gt; r
</span><a href="#local-6989586621679083249"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall r. (a -&gt; r) -&gt; (f r -&gt; r) -&gt; r
</span><a href="#local-6989586621679083249"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083252"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">f r -&gt; r
</span><a href="#local-6989586621679083251"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-652"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083236"><span id="local-6989586621679083238"><span id="local-6989586621679083240"><span id="local-6989586621679083242"><span id="local-6989586621679084869"><span id="local-6989586621679084870"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084870"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084870"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084869"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-653"></span><span>  </span><span id="local-6989586621679083233"><span class="annot"><span class="annottext">project :: F f a -&gt; Base (F f a) (F f a)
</span><a href="#local-6989586621679083233"><span class="hs-identifier hs-var hs-var hs-var hs-var">project</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. (Recursive t, Corecursive t) =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#lambek"><span class="hs-identifier hs-var">lambek</span></a></span><span>
</span><span id="line-654"></span><span>  </span><span id="local-6989586621679083232"><span class="annot"><span class="annottext">cata :: forall a. (Base (F f a) a -&gt; a) -&gt; F f a -&gt; a
</span><a href="#local-6989586621679083232"><span class="hs-identifier hs-var hs-var hs-var hs-var">cata</span></a></span></span><span> </span><span id="local-6989586621679083231"><span class="annot"><span class="annottext">Base (F f a) a -&gt; a
</span><a href="#local-6989586621679083231"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a r (f :: * -&gt; *). (a -&gt; r) -&gt; (f r -&gt; r) -&gt; F f a -&gt; r
</span><a href="Data.Functor.Foldable.html#cmfcCata"><span class="hs-identifier hs-var">cmfcCata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Base (F f a) a -&gt; a
</span><a href="#local-6989586621679083231"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Pure</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Base (F f a) a -&gt; a
</span><a href="#local-6989586621679083231"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMTF.Free</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083219"><span id="local-6989586621679083221"><span id="local-6989586621679083223"><span id="local-6989586621679083225"><span id="local-6989586621679084872"><span id="local-6989586621679084873"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084873"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMFC.F</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084873"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679083218"><span class="annot"><span class="annottext">embed :: Base (F f a) (F f a) -&gt; F f a
</span><a href="#local-6989586621679083218"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Pure</span></a></span><span> </span><span id="local-6989586621679083217"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083217"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
(forall r. (a -&gt; r) -&gt; (f r -&gt; r) -&gt; r) -&gt; F f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMFC.F</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679083216"><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083216"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">f r -&gt; r
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083216"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083217"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-657"></span><span>  </span><span class="annot"><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CMTF.Free</span></a></span><span> </span><span id="local-6989586621679083215"><span class="annot"><span class="annottext">f (F f a)
</span><a href="#local-6989586621679083215"><span class="hs-identifier hs-var">fr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
(forall r. (a -&gt; r) -&gt; (f r -&gt; r) -&gt; r) -&gt; F f a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CMFC.F</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679083213"><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083213"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679083212"><span class="annot"><span class="annottext">f r -&gt; r
</span><a href="#local-6989586621679083212"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f r -&gt; r
</span><a href="#local-6989586621679083212"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a r (f :: * -&gt; *). (a -&gt; r) -&gt; (f r -&gt; r) -&gt; F f a -&gt; r
</span><a href="Data.Functor.Foldable.html#cmfcCata"><span class="hs-identifier hs-var">cmfcCata</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679083213"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">f r -&gt; r
</span><a href="#local-6989586621679083212"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f (F f a)
</span><a href="#local-6989586621679083215"><span class="hs-identifier hs-var">fr</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="hs-comment">-- TODO: link from 'para' to 'zygo'</span><span>
</span><span id="line-660"></span><span id="local-6989586621679084730"><span id="local-6989586621679084731"><span id="local-6989586621679084732"><span class="annot"><a href="Data.Functor.Foldable.html#zygo"><span class="hs-identifier hs-type">zygo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084732"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084732"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084731"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084731"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084732"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084731"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084730"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084730"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084732"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084730"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-661"></span><span id="zygo"><span class="annot"><span class="annottext">zygo :: forall t b a.
Recursive t =&gt;
(Base t b -&gt; b) -&gt; (Base t (b, a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#zygo"><span class="hs-identifier hs-var hs-var">zygo</span></a></span></span><span> </span><span id="local-6989586621679083206"><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083206"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gfold"><span class="hs-identifier hs-var">gfold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; f (b, a) -&gt; (b, f a)
</span><a href="Data.Functor.Foldable.html#distZygo"><span class="hs-identifier hs-var">distZygo</span></a></span><span> </span><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083206"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span id="local-6989586621679085013"><span id="local-6989586621679085014"><span id="local-6989586621679085015"><span class="annot"><a href="Data.Functor.Foldable.html#distZygo"><span class="hs-identifier hs-type">distZygo</span></a></span><span>
</span><span id="line-664"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085015"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-665"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085015"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085014"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085014"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>             </span><span class="hs-comment">-- An f-algebra</span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085015"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085014"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679085013"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085014"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679085015"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085013"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-comment">-- ^ A distributive for semi-mutual recursion</span><span>
</span><span id="line-667"></span><span id="distZygo"><span class="annot"><span class="annottext">distZygo :: forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f b -&gt; b) -&gt; f (b, a) -&gt; (b, f a)
</span><a href="Data.Functor.Foldable.html#distZygo"><span class="hs-identifier hs-var hs-var">distZygo</span></a></span></span><span> </span><span id="local-6989586621679083201"><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083201"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083200"><span class="annot"><span class="annottext">f (b, a)
</span><a href="#local-6989586621679083200"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083201"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">f (b, a)
</span><a href="#local-6989586621679083200"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">f (b, a)
</span><a href="#local-6989586621679083200"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span id="local-6989586621679085034"><span id="local-6989586621679085036"><span id="local-6989586621679085037"><span id="local-6989586621679085038"><span class="annot"><a href="Data.Functor.Foldable.html#gzygo"><span class="hs-identifier hs-type">gzygo</span></a></span><span>
</span><span id="line-670"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085037"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-671"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085036"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085036"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085035"><span class="annot"><a href="#local-6989586621679085035"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085037"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085035"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085037"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085035"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085036"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085037"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085034"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085034"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085038"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085034"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-676"></span><span id="gzygo"><span class="annot"><span class="annottext">gzygo :: forall t (w :: * -&gt; *) b a.
(Recursive t, Comonad w) =&gt;
(Base t b -&gt; b)
-&gt; (forall c. Base t (w c) -&gt; w (Base t c))
-&gt; (Base t (EnvT b w a) -&gt; a)
-&gt; t
-&gt; a
</span><a href="Data.Functor.Foldable.html#gzygo"><span class="hs-identifier hs-var hs-var">gzygo</span></a></span></span><span> </span><span id="local-6989586621679083193"><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083193"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083192"><span class="annot"><span class="annottext">forall c. Base t (w c) -&gt; w (Base t c)
</span><a href="#local-6989586621679083192"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gfold"><span class="hs-identifier hs-var">gfold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) b a.
(Functor f, Comonad w) =&gt;
(f b -&gt; b)
-&gt; (forall c. f (w c) -&gt; w (f c))
-&gt; f (EnvT b w a)
-&gt; EnvT b w (f a)
</span><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier hs-var">distZygoT</span></a></span><span> </span><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083193"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Base t (w c) -&gt; w (Base t c)
</span><a href="#local-6989586621679083192"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span id="local-6989586621679085002"><span id="local-6989586621679085004"><span id="local-6989586621679085005"><span id="local-6989586621679085006"><span class="annot"><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier hs-type">distZygoT</span></a></span><span>
</span><span id="line-679"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085005"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085004"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085004"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>                        </span><span class="hs-comment">-- An f-w-algebra to use for semi-mutual recursion</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679085003"><span class="annot"><a href="#local-6989586621679085003"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085005"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085003"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085005"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085003"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- A base Distributive law</span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085004"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085005"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085002"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085004"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085005"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679085006"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085002"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>  </span><span class="hs-comment">-- A new distributive law that adds semi-mutual recursion</span><span>
</span><span id="line-683"></span><span id="distZygoT"><span class="annot"><span class="annottext">distZygoT :: forall (f :: * -&gt; *) (w :: * -&gt; *) b a.
(Functor f, Comonad w) =&gt;
(f b -&gt; b)
-&gt; (forall c. f (w c) -&gt; w (f c))
-&gt; f (EnvT b w a)
-&gt; EnvT b w (f a)
</span><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier hs-var hs-var">distZygoT</span></a></span></span><span> </span><span id="local-6989586621679083182"><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083182"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083181"><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083181"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083180"><span class="annot"><span class="annottext">f (EnvT b w a)
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">fe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e (w :: * -&gt; *) a. e -&gt; w a -&gt; EnvT e w a
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">EnvT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f b -&gt; b
</span><a href="#local-6989586621679083182"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {e} {w :: * -&gt; *} {a}. EnvT e w a -&gt; e
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var">getEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (EnvT b w a)
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">fe</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083181"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (w :: * -&gt; *) a.
(ComonadTrans t, Comonad w) =&gt;
t w a -&gt; w a
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f (EnvT b w a)
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">fe</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083178"><span class="annot"><span class="annottext">getEnv :: EnvT e w a -&gt; e
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var hs-var">getEnv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span id="local-6989586621679083176"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679083176"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">w a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679083176"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span id="local-6989586621679084697"><span id="local-6989586621679084698"><span id="local-6989586621679084699"><span class="annot"><a href="Data.Functor.Foldable.html#gapo"><span class="hs-identifier hs-type">gapo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084698"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084698"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084697"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084698"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084697"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084697"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-687"></span><span id="gapo"><span class="annot"><span class="annottext">gapo :: forall t b a.
Corecursive t =&gt;
(b -&gt; Base t b) -&gt; (a -&gt; Base t (Either b a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gapo"><span class="hs-identifier hs-var hs-var">gapo</span></a></span></span><span> </span><span id="local-6989586621679083170"><span class="annot"><span class="annottext">b -&gt; Base t b
</span><a href="#local-6989586621679083170"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (m :: * -&gt; *) a.
(Corecursive t, Monad m) =&gt;
(forall b. m (Base t b) -&gt; Base t (m b))
-&gt; (a -&gt; Base t (m a)) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#gunfold"><span class="hs-identifier hs-var">gunfold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(b -&gt; f b) -&gt; Either b (f a) -&gt; f (Either b a)
</span><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier hs-var">distGApo</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Base t b
</span><a href="#local-6989586621679083170"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span id="local-6989586621679084689"><span id="local-6989586621679084690"><span class="annot"><a href="Data.Functor.Foldable.html#distApo"><span class="hs-identifier hs-type">distApo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084690"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084690"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084690"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084689"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084690"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084690"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084689"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-690"></span><span id="distApo"><span class="annot"><span class="annottext">distApo :: forall t a.
Recursive t =&gt;
Either t (Base t a) -&gt; Base t (Either t a)
</span><a href="Data.Functor.Foldable.html#distApo"><span class="hs-identifier hs-var hs-var">distApo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(b -&gt; f b) -&gt; Either b (f a) -&gt; f (Either b a)
</span><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier hs-var">distGApo</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span id="local-6989586621679084691"><span id="local-6989586621679084692"><span id="local-6989586621679084693"><span class="annot"><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier hs-type">distGApo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084693"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084692"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084693"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084692"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084692"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084693"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084691"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084693"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084692"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084691"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-693"></span><span id="distGApo"><span class="annot"><span class="annottext">distGApo :: forall (f :: * -&gt; *) b a.
Functor f =&gt;
(b -&gt; f b) -&gt; Either b (f a) -&gt; f (Either b a)
</span><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier hs-var hs-var">distGApo</span></a></span></span><span> </span><span id="local-6989586621679083161"><span class="annot"><span class="annottext">b -&gt; f b
</span><a href="#local-6989586621679083161"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b
</span><a href="#local-6989586621679083161"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span id="local-6989586621679084678"><span id="local-6989586621679084680"><span id="local-6989586621679084681"><span id="local-6989586621679084682"><span class="annot"><a href="Data.Functor.Foldable.html#distGApoT"><span class="hs-identifier hs-type">distGApoT</span></a></span><span>
</span><span id="line-696"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084681"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084679"><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084681"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084681"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084681"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084678"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084681"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084678"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-701"></span><span id="distGApoT"><span class="annot"><span class="annottext">distGApoT :: forall (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Functor f, Functor m) =&gt;
(b -&gt; f b)
-&gt; (forall c. m (f c) -&gt; f (m c))
-&gt; ExceptT b m (f a)
-&gt; f (ExceptT b m a)
</span><a href="Data.Functor.Foldable.html#distGApoT"><span class="hs-identifier hs-var hs-var">distGApoT</span></a></span></span><span> </span><span id="local-6989586621679083155"><span class="annot"><span class="annottext">b -&gt; f b
</span><a href="#local-6989586621679083155"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083154"><span class="annot"><span class="annottext">forall c. m (f c) -&gt; f (m c)
</span><a href="#local-6989586621679083154"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">ExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. m (f c) -&gt; f (m c)
</span><a href="#local-6989586621679083154"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
Functor f =&gt;
(b -&gt; f b) -&gt; Either b (f a) -&gt; f (Either b a)
</span><a href="Data.Functor.Foldable.html#distGApo"><span class="hs-identifier hs-var">distGApo</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b
</span><a href="#local-6989586621679083155"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">runExceptT</span></a></span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="hs-comment">-- | A variant of 'cata' which includes the results of all the</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- descendents, not just the direct children.</span><span>
</span><span id="line-705"></span><span class="hs-comment">--</span><span>
</span><span id="line-706"></span><span class="hs-comment">-- Like 'para', a sub-tree is provided for each recursive position. Each</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- node in that sub-tree is annotated with the result for that</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- descendent. The 'Cofree' type is used to add those annotations.</span><span>
</span><span id="line-709"></span><span class="hs-comment">--</span><span>
</span><span id="line-710"></span><span class="hs-comment">-- For our running example, let's recreate GitHub's directory compression</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- algorithm. Notice that in [the repository for this</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- package](https://github.com/recursion-schemes/recursion-schemes), GitHub</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- displays @src\/Data\/Functor@, not @src@:</span><span>
</span><span id="line-714"></span><span class="hs-comment">--</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- ![GitHub's code page](docs/github-compression.png)</span><span>
</span><span id="line-716"></span><span class="hs-comment">--</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- GitHub does this because @src@ only contains one entry: @Data@. Similarly,</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- @Data@ only contains one entry: @Functor@. @Functor@ contains several</span><span>
</span><span id="line-719"></span><span class="hs-comment">-- entries, so the compression stops there. This helps users get to the</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- interesting folders more quickly.</span><span>
</span><span id="line-721"></span><span class="hs-comment">--</span><span>
</span><span id="line-722"></span><span class="hs-comment">-- Before we use 'histo', we need to define a helper function 'rollup'.</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- It collects nodes until it reaches a node which doesn't have exactly one</span><span>
</span><span id="line-724"></span><span class="hs-comment">-- child. It also returns the labels of that node's children.</span><span>
</span><span id="line-725"></span><span class="hs-comment">--</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- let rollup :: [Cofree (TreeF node) label]</span><span>
</span><span id="line-728"></span><span class="hs-comment">--            -&gt; ([node], [label])</span><span>
</span><span id="line-729"></span><span class="hs-comment">--     rollup [_ :&lt; NodeF node cofrees] =</span><span>
</span><span id="line-730"></span><span class="hs-comment">--       let (nodes, label) = rollup cofrees</span><span>
</span><span id="line-731"></span><span class="hs-comment">--       in (node : nodes, label)</span><span>
</span><span id="line-732"></span><span class="hs-comment">--     rollup cofrees =</span><span>
</span><span id="line-733"></span><span class="hs-comment">--       ([], fmap extract cofrees)</span><span>
</span><span id="line-734"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-735"></span><span class="hs-comment">--</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- &gt;&gt;&gt; let foobar xs = 1 :&lt; NodeF &quot;foo&quot; [2 :&lt; NodeF &quot;bar&quot; xs]</span><span>
</span><span id="line-737"></span><span class="hs-comment">-- &gt;&gt;&gt; rollup [foobar []]</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- ([&quot;foo&quot;,&quot;bar&quot;],[])</span><span>
</span><span id="line-739"></span><span class="hs-comment">-- &gt;&gt;&gt; rollup [foobar [3 :&lt; NodeF &quot;baz&quot; [], 4 :&lt; NodeF &quot;quux&quot; []]]</span><span>
</span><span id="line-740"></span><span class="hs-comment">-- ([&quot;foo&quot;,&quot;bar&quot;],[3,4])</span><span>
</span><span id="line-741"></span><span class="hs-comment">--</span><span>
</span><span id="line-742"></span><span class="hs-comment">-- The value @foobar []@ can be interpreted as the tree @NodeF &quot;foo&quot;</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- [NodeF &quot;bar&quot; []]@, plus two annotations. The @&quot;foo&quot;@ node is annotated</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- with @1@, while the @&quot;bar&quot;@ node is annotated with @2@. When we call</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- 'histo' below, those annotations are recursive results of type @Int -&gt;</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- String@.</span><span>
</span><span id="line-747"></span><span class="hs-comment">--</span><span>
</span><span id="line-748"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- let pprint5 :: Tree Int -&gt; String</span><span>
</span><span id="line-750"></span><span class="hs-comment">--     pprint5 t = histo go t 0</span><span>
</span><span id="line-751"></span><span class="hs-comment">--       where</span><span>
</span><span id="line-752"></span><span class="hs-comment">--         go :: TreeF Int (Cofree (TreeF Int) (Int -&gt; String))</span><span>
</span><span id="line-753"></span><span class="hs-comment">--            -&gt; Int -&gt; String</span><span>
</span><span id="line-754"></span><span class="hs-comment">--         go (NodeF node cofrees) indent</span><span>
</span><span id="line-755"></span><span class="hs-comment">--             -- cofrees :: [Cofree (TreeF Int) (Int -&gt; String)]</span><span>
</span><span id="line-756"></span><span class="hs-comment">--             -- fs :: [Int -&gt; String]</span><span>
</span><span id="line-757"></span><span class="hs-comment">--           = let indent' = indent + 2</span><span>
</span><span id="line-758"></span><span class="hs-comment">--                 (nodes, fs) = rollup cofrees</span><span>
</span><span id="line-759"></span><span class="hs-comment">--                 ss = map (\f -&gt; f indent') fs</span><span>
</span><span id="line-760"></span><span class="hs-comment">--                 s = replicate indent ' '</span><span>
</span><span id="line-761"></span><span class="hs-comment">--                  ++ &quot;* &quot; ++ intercalate &quot; / &quot; (fmap show (node : nodes))</span><span>
</span><span id="line-762"></span><span class="hs-comment">--             in intercalate &quot;\n&quot; (s : ss)</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-764"></span><span class="hs-comment">--</span><span>
</span><span id="line-765"></span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint5 myTree</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- * 0</span><span>
</span><span id="line-767"></span><span class="hs-comment">--   * 1</span><span>
</span><span id="line-768"></span><span class="hs-comment">--   * 2</span><span>
</span><span id="line-769"></span><span class="hs-comment">--   * 3 / 31 / 311</span><span>
</span><span id="line-770"></span><span class="hs-comment">--     * 3111</span><span>
</span><span id="line-771"></span><span class="hs-comment">--     * 3112</span><span>
</span><span id="line-772"></span><span class="hs-comment">--</span><span>
</span><span id="line-773"></span><span class="hs-comment">-- One common use for 'histo' is to cache the value computed for smaller</span><span>
</span><span id="line-774"></span><span class="hs-comment">-- sub-trees. In the Fibonacci example below, the recursive type is 'Natural',</span><span>
</span><span id="line-775"></span><span class="hs-comment">-- which is isomorphic to @[()]@. Our annotated sub-tree is thus isomorphic to</span><span>
</span><span id="line-776"></span><span class="hs-comment">-- a list of annotations. In our case, each annotation is the result which was</span><span>
</span><span id="line-777"></span><span class="hs-comment">-- computed for a smaller number. We thus have access to a list which caches</span><span>
</span><span id="line-778"></span><span class="hs-comment">-- all the Fibonacci numbers we have computed so far.</span><span>
</span><span id="line-779"></span><span class="hs-comment">--</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- let fib :: Natural -&gt; Integer</span><span>
</span><span id="line-782"></span><span class="hs-comment">--     fib = histo go</span><span>
</span><span id="line-783"></span><span class="hs-comment">--       where</span><span>
</span><span id="line-784"></span><span class="hs-comment">--         go :: Maybe (Cofree Maybe Integer) -&gt; Integer</span><span>
</span><span id="line-785"></span><span class="hs-comment">--         go Nothing = 1</span><span>
</span><span id="line-786"></span><span class="hs-comment">--         go (Just (_ :&lt; Nothing)) = 1</span><span>
</span><span id="line-787"></span><span class="hs-comment">--         go (Just (fibNMinus1 :&lt; Just (fibNMinus2 :&lt; _)))</span><span>
</span><span id="line-788"></span><span class="hs-comment">--           = fibNMinus1 + fibNMinus2</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-790"></span><span class="hs-comment">--</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- &gt;&gt;&gt; fmap fib [0..10]</span><span>
</span><span id="line-792"></span><span class="hs-comment">-- [1,1,2,3,5,8,13,21,34,55,89]</span><span>
</span><span id="line-793"></span><span class="hs-comment">--</span><span>
</span><span id="line-794"></span><span class="hs-comment">-- In general, @Cofree f a@ can be thought of as a cache that has the same</span><span>
</span><span id="line-795"></span><span class="hs-comment">-- shape as the recursive structure which was given as input.</span><span>
</span><span id="line-796"></span><span id="local-6989586621679084665"><span id="local-6989586621679084666"><span class="annot"><a href="Data.Functor.Foldable.html#histo"><span class="hs-identifier hs-type">histo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084666"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084666"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084666"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084665"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084665"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084666"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084665"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-797"></span><span id="histo"><span class="annot"><span class="annottext">histo :: forall t a.
Recursive t =&gt;
(Base t (Cofree (Base t) a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#histo"><span class="hs-identifier hs-var hs-var">histo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier hs-var">gcata</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Cofree f a) -&gt; Cofree f (f a)
</span><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-var">distHisto</span></a></span><span>
</span><span id="line-798"></span><span>
</span><span id="line-799"></span><span id="local-6989586621679084657"><span id="local-6989586621679084659"><span id="local-6989586621679084660"><span class="annot"><a href="Data.Functor.Foldable.html#ghisto"><span class="hs-identifier hs-type">ghisto</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084659"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084658"><span class="annot"><a href="#local-6989586621679084658"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084659"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084658"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084659"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084658"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084659"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084657"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084657"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084660"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084657"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-800"></span><span id="ghisto"><span class="annot"><span class="annottext">ghisto :: forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (CofreeT (Base t) w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#ghisto"><span class="hs-identifier hs-var hs-var">ghisto</span></a></span></span><span> </span><span id="local-6989586621679083139"><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083139"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (Base t (w a) -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#gcata"><span class="hs-identifier hs-var">gcata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. f (h b) -&gt; h (f b))
-&gt; f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="Data.Functor.Foldable.html#distGHisto"><span class="hs-identifier hs-var">distGHisto</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Base t (w b) -&gt; w (Base t b)
</span><a href="#local-6989586621679083139"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span id="local-6989586621679084661"><span id="local-6989586621679084662"><span class="annot"><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-type">distHisto</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084661"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084661"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-803"></span><span id="distHisto"><span class="annot"><span class="annottext">distHisto :: forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Cofree f a) -&gt; Cofree f (f a)
</span><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-var hs-var">distHisto</span></a></span></span><span> </span><span id="local-6989586621679083129"><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083129"><span class="hs-identifier hs-var">fc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><a href="../../../../comonad/html/src"><span class="hs-identifier hs-var">extract</span></a></span><span> </span><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083129"><span class="hs-identifier hs-var">fc</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. a -&gt; f (Cofree f a) -&gt; Cofree f a
</span><a href="../../../../free/html/src"><span class="hs-operator hs-var">:&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Cofree f a) -&gt; Cofree f (f a)
</span><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-var">distHisto</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) a.
ComonadCofree f w =&gt;
w a -&gt; f (w a)
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">Cofree.unwrap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f (Cofree f a)
</span><a href="#local-6989586621679083129"><span class="hs-identifier hs-var">fc</span></a></span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span id="local-6989586621679084649"><span id="local-6989586621679084651"><span id="local-6989586621679084652"><span class="annot"><a href="Data.Functor.Foldable.html#distGHisto"><span class="hs-identifier hs-type">distGHisto</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084650"><span class="annot"><a href="#local-6989586621679084650"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084650"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084650"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084649"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084652"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084649"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-806"></span><span id="distGHisto"><span class="annot"><span class="annottext">distGHisto :: forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. f (h b) -&gt; h (f b))
-&gt; f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="Data.Functor.Foldable.html#distGHisto"><span class="hs-identifier hs-var hs-var">distGHisto</span></a></span></span><span> </span><span id="local-6989586621679083121"><span class="annot"><span class="annottext">forall b. f (h b) -&gt; h (f b)
</span><a href="#local-6989586621679083121"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="#local-6989586621679083120"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083120"><span class="annot"><span class="annottext">d :: f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="#local-6989586621679083120"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) a.
w (CofreeF f a (CofreeT f w a)) -&gt; CofreeT f w a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CofreeT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083119"><span class="annot"><span class="annottext">f (CofreeF f a (CofreeT f h a))
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">fc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. CofreeF f a b -&gt; a
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CCTC.headF</span></a></span><span> </span><span class="annot"><span class="annottext">f (CofreeF f a (CofreeT f h a))
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">fc</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. a -&gt; f b -&gt; CofreeF f a b
</span><a href="../../../../free/html/src"><span class="hs-operator hs-var">CCTC.:&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="#local-6989586621679083120"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. CofreeF f a b -&gt; f b
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">CCTC.tailF</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f (CofreeF f a (CofreeT f h a))
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">fc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. f (h b) -&gt; h (f b)
</span><a href="#local-6989586621679083121"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) a.
CofreeT f w a -&gt; w (CofreeF f a (CofreeT f w a))
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var">runCofreeT</span></a></span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span id="local-6989586621679084630"><span id="local-6989586621679084631"><span id="local-6989586621679084632"><span class="annot"><a href="Data.Functor.Foldable.html#chrono"><span class="hs-identifier hs-type">chrono</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084632"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084632"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084632"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084631"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084631"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084630"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084632"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084632"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084630"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084630"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084631"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-809"></span><span id="chrono"><span class="annot"><span class="annottext">chrono :: forall (f :: * -&gt; *) b a.
Functor f =&gt;
(f (Cofree f b) -&gt; b) -&gt; (a -&gt; f (Free f a)) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#chrono"><span class="hs-identifier hs-var hs-var">chrono</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Comonad w, Functor f, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall d. m (f d) -&gt; f (m d))
-&gt; (f (w b) -&gt; b)
-&gt; (a -&gt; f (m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier hs-var">ghylo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Cofree f a) -&gt; Cofree f (f a)
</span><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-var">distHisto</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; Free f (f a) -&gt; f (Free f a)
</span><a href="Data.Functor.Foldable.html#distFutu"><span class="hs-identifier hs-var">distFutu</span></a></span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span id="local-6989586621679084622"><span id="local-6989586621679084623"><span id="local-6989586621679084626"><span id="local-6989586621679084627"><span id="local-6989586621679084628"><span class="annot"><a href="Data.Functor.Foldable.html#gchrono"><span class="hs-identifier hs-type">gchrono</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084627"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084626"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">Comonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084627"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084626"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-812"></span><span>           </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084625"><span class="annot"><a href="#local-6989586621679084625"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084627"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084625"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084627"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084625"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-813"></span><span>           </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084624"><span class="annot"><a href="#local-6989586621679084624"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084626"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084624"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084626"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084624"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-814"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">CofreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084627"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">FreeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084628"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084626"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-815"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-816"></span><span id="gchrono"><span class="annot"><span class="annottext">gchrono :: forall (f :: * -&gt; *) (w :: * -&gt; *) (m :: * -&gt; *) b a.
(Functor f, Functor w, Functor m, Comonad w, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall c. m (f c) -&gt; f (m c))
-&gt; (f (CofreeT f w b) -&gt; b)
-&gt; (a -&gt; f (FreeT f m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#gchrono"><span class="hs-identifier hs-var hs-var">gchrono</span></a></span></span><span> </span><span id="local-6989586621679083102"><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083102"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621679083101"><span class="annot"><span class="annottext">forall c. m (f c) -&gt; f (m c)
</span><a href="#local-6989586621679083101"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) (f :: * -&gt; *) (m :: * -&gt; *) b a.
(Comonad w, Functor f, Monad m) =&gt;
(forall c. f (w c) -&gt; w (f c))
-&gt; (forall d. m (f d) -&gt; f (m d))
-&gt; (f (w b) -&gt; b)
-&gt; (a -&gt; f (m a))
-&gt; a
-&gt; b
</span><a href="Data.Functor.Foldable.html#ghylo"><span class="hs-identifier hs-var">ghylo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. f (h b) -&gt; h (f b))
-&gt; f (CofreeT f h a) -&gt; CofreeT f h (f a)
</span><a href="Data.Functor.Foldable.html#distGHisto"><span class="hs-identifier hs-var">distGHisto</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. f (w c) -&gt; w (f c)
</span><a href="#local-6989586621679083102"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (h :: * -&gt; *) a.
(Functor f, Functor h) =&gt;
(forall b. h (f b) -&gt; f (h b))
-&gt; FreeT f h (f a) -&gt; f (FreeT f h a)
</span><a href="Data.Functor.Foldable.html#distGFutu"><span class="hs-identifier hs-var">distGFutu</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. m (f c) -&gt; f (m c)
</span><a href="#local-6989586621679083101"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="hs-comment">-- | Mendler-style iteration</span><span>
</span><span id="line-819"></span><span id="local-6989586621679084616"><span id="local-6989586621679084617"><span class="annot"><a href="Data.Functor.Foldable.html#mcata"><span class="hs-identifier hs-type">mcata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084618"><span class="annot"><a href="#local-6989586621679084618"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084618"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084617"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084616"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084618"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084617"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084616"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084617"><span class="hs-identifier hs-type">c</span></a></span></span></span><span>
</span><span id="line-820"></span><span id="mcata"><span class="annot"><span class="annottext">mcata :: forall c (f :: * -&gt; *).
(forall y. (y -&gt; c) -&gt; f y -&gt; c) -&gt; Fix f -&gt; c
</span><a href="Data.Functor.Foldable.html#mcata"><span class="hs-identifier hs-var hs-var">mcata</span></a></span></span><span> </span><span id="local-6989586621679083096"><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083095"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083095"><span class="annot"><span class="annottext">c :: Fix f -&gt; c
</span><a href="#local-6989586621679083095"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083095"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Fix f -&gt; f (Fix f)
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">unFix</span></a></span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-comment">-- | Mendler-style recursion</span><span>
</span><span id="line-823"></span><span class="hs-comment">--</span><span>
</span><span id="line-824"></span><span class="hs-comment">-- @since 5.2.2</span><span>
</span><span id="line-825"></span><span id="local-6989586621679084610"><span id="local-6989586621679084611"><span class="annot"><a href="Data.Functor.Foldable.html#mpara"><span class="hs-identifier hs-type">mpara</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084612"><span class="annot"><a href="#local-6989586621679084612"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084612"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084612"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084610"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084610"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084612"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084610"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">c</span></a></span></span></span><span>
</span><span id="line-826"></span><span id="mpara"><span class="annot"><span class="annottext">mpara :: forall c (f :: * -&gt; *).
(forall y. (y -&gt; c) -&gt; (y -&gt; Fix f) -&gt; f y -&gt; c) -&gt; Fix f -&gt; c
</span><a href="Data.Functor.Foldable.html#mpara"><span class="hs-identifier hs-var hs-var">mpara</span></a></span></span><span> </span><span id="local-6989586621679083094"><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; Fix f) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083093"><span class="annot"><span class="annottext">c :: Fix f -&gt; c
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; Fix f) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Fix f -&gt; f (Fix f)
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">unFix</span></a></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span class="hs-comment">-- | Mendler-style semi-mutual recursion</span><span>
</span><span id="line-829"></span><span class="hs-comment">--</span><span>
</span><span id="line-830"></span><span class="hs-comment">-- @since 5.2.2</span><span>
</span><span id="line-831"></span><span id="local-6989586621679084603"><span id="local-6989586621679084605"><span id="local-6989586621679084606"><span class="annot"><a href="Data.Functor.Foldable.html#mzygo"><span class="hs-identifier hs-type">mzygo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084607"><span class="annot"><a href="#local-6989586621679084607"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084607"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084606"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084605"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084607"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084606"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084604"><span class="annot"><a href="#local-6989586621679084604"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084604"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084603"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084604"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084606"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084605"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084604"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084603"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084605"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084603"><span class="hs-identifier hs-type">c</span></a></span></span></span></span><span>
</span><span id="line-832"></span><span id="mzygo"><span class="annot"><span class="annottext">mzygo :: forall b (f :: * -&gt; *) c.
(forall y. (y -&gt; b) -&gt; f y -&gt; b)
-&gt; (forall y. (y -&gt; c) -&gt; (y -&gt; b) -&gt; f y -&gt; c) -&gt; Fix f -&gt; c
</span><a href="Data.Functor.Foldable.html#mzygo"><span class="hs-identifier hs-var hs-var">mzygo</span></a></span></span><span> </span><span id="local-6989586621679083092"><span class="annot"><span class="annottext">forall y. (y -&gt; b) -&gt; f y -&gt; b
</span><a href="#local-6989586621679083092"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621679083091"><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; b) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083090"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083090"><span class="annot"><span class="annottext">c :: Fix f -&gt; c
</span><a href="#local-6989586621679083090"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; b) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083090"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c (f :: * -&gt; *).
(forall y. (y -&gt; c) -&gt; f y -&gt; c) -&gt; Fix f -&gt; c
</span><a href="Data.Functor.Foldable.html#mcata"><span class="hs-identifier hs-var">mcata</span></a></span><span> </span><span class="annot"><span class="annottext">forall y. (y -&gt; b) -&gt; f y -&gt; b
</span><a href="#local-6989586621679083092"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Fix f -&gt; f (Fix f)
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">unFix</span></a></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-comment">-- | Mendler-style course-of-value iteration</span><span>
</span><span id="line-835"></span><span id="local-6989586621679084597"><span id="local-6989586621679084598"><span class="annot"><a href="Data.Functor.Foldable.html#mhisto"><span class="hs-identifier hs-type">mhisto</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084599"><span class="annot"><a href="#local-6989586621679084599"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084599"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084599"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084599"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084599"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">c</span></a></span></span></span><span>
</span><span id="line-836"></span><span id="mhisto"><span class="annot"><span class="annottext">mhisto :: forall c (f :: * -&gt; *).
(forall y. (y -&gt; c) -&gt; (y -&gt; f y) -&gt; f y -&gt; c) -&gt; Fix f -&gt; c
</span><a href="Data.Functor.Foldable.html#mhisto"><span class="hs-identifier hs-var hs-var">mhisto</span></a></span></span><span> </span><span id="local-6989586621679083089"><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; f y) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083089"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083088"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083088"><span class="annot"><span class="annottext">c :: Fix f -&gt; c
</span><a href="#local-6989586621679083088"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall y. (y -&gt; c) -&gt; (y -&gt; f y) -&gt; f y -&gt; c
</span><a href="#local-6989586621679083089"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="annot"><span class="annottext">Fix f -&gt; c
</span><a href="#local-6989586621679083088"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Fix f -&gt; f (Fix f)
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">unFix</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Fix f -&gt; f (Fix f)
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">unFix</span></a></span><span>
</span><span id="line-837"></span><span>
</span><span id="line-838"></span><span class="hs-comment">-- | Mendler-style coiteration</span><span>
</span><span id="line-839"></span><span class="hs-comment">--</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- @since 5.2.2</span><span>
</span><span id="line-841"></span><span id="local-6989586621679084592"><span id="local-6989586621679084594"><span class="annot"><a href="Data.Functor.Foldable.html#mana"><span class="hs-identifier hs-type">mana</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084593"><span class="annot"><a href="#local-6989586621679084593"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084594"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084593"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084594"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084592"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084593"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084594"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084592"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-842"></span><span id="mana"><span class="annot"><span class="annottext">mana :: forall x (f :: * -&gt; *).
(forall y. (x -&gt; y) -&gt; x -&gt; f y) -&gt; x -&gt; Fix f
</span><a href="Data.Functor.Foldable.html#mana"><span class="hs-identifier hs-var hs-var">mana</span></a></span></span><span> </span><span id="local-6989586621679083087"><span class="annot"><span class="annottext">forall y. (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083087"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083086"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083086"><span class="annot"><span class="annottext">c :: x -&gt; Fix f
</span><a href="#local-6989586621679083086"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). f (Fix f) -&gt; Fix f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Fix</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall y. (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083087"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083086"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="hs-comment">-- | Mendler-style corecursion</span><span>
</span><span id="line-845"></span><span class="hs-comment">--</span><span>
</span><span id="line-846"></span><span class="hs-comment">-- @since 5.2.2</span><span>
</span><span id="line-847"></span><span id="local-6989586621679084587"><span id="local-6989586621679084589"><span class="annot"><a href="Data.Functor.Foldable.html#mapo"><span class="hs-identifier hs-type">mapo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084588"><span class="annot"><a href="#local-6989586621679084588"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084589"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084588"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084587"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084588"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084587"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084589"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084588"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084587"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084589"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-848"></span><span id="mapo"><span class="annot"><span class="annottext">mapo :: forall (f :: * -&gt; *) x.
(forall y. (Fix f -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y) -&gt; x -&gt; Fix f
</span><a href="Data.Functor.Foldable.html#mapo"><span class="hs-identifier hs-var hs-var">mapo</span></a></span></span><span> </span><span id="local-6989586621679083085"><span class="annot"><span class="annottext">forall y. (Fix f -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083085"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083084"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083084"><span class="annot"><span class="annottext">c :: x -&gt; Fix f
</span><a href="#local-6989586621679083084"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). f (Fix f) -&gt; Fix f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Fix</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall y. (Fix f -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083085"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083084"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="hs-comment">-- | Mendler-style course-of-values coiteration</span><span>
</span><span id="line-851"></span><span class="hs-comment">--</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- @since 5.2.2</span><span>
</span><span id="line-853"></span><span id="local-6989586621679084582"><span id="local-6989586621679084584"><span class="annot"><a href="Data.Functor.Foldable.html#mfutu"><span class="hs-identifier hs-type">mfutu</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084583"><span class="annot"><a href="#local-6989586621679084583"><span class="hs-identifier hs-type">y</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084584"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084583"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084583"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084582"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084583"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084582"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084584"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084583"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084582"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-type">Fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084584"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-854"></span><span id="mfutu"><span class="annot"><span class="annottext">mfutu :: forall (f :: * -&gt; *) x.
(forall y. (f y -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y) -&gt; x -&gt; Fix f
</span><a href="Data.Functor.Foldable.html#mfutu"><span class="hs-identifier hs-var hs-var">mfutu</span></a></span></span><span> </span><span id="local-6989586621679083083"><span class="annot"><span class="annottext">forall y. (f y -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083083"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083082"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083082"><span class="annot"><span class="annottext">c :: x -&gt; Fix f
</span><a href="#local-6989586621679083082"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). f (Fix f) -&gt; Fix f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Fix</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall y. (f y -&gt; y) -&gt; (x -&gt; y) -&gt; x -&gt; f y
</span><a href="#local-6989586621679083083"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). f (Fix f) -&gt; Fix f
</span><a href="../../../../data-fix/html/src"><span class="hs-identifier hs-var">Fix</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; Fix f
</span><a href="#local-6989586621679083082"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span class="hs-comment">-- | Elgot algebras</span><span>
</span><span id="line-857"></span><span id="local-6989586621679084577"><span id="local-6989586621679084578"><span id="local-6989586621679084579"><span class="annot"><a href="Data.Functor.Foldable.html#elgot"><span class="hs-identifier hs-type">elgot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084579"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084579"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084577"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084579"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084577"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084577"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-858"></span><span id="elgot"><span class="annot"><span class="annottext">elgot :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
(f a -&gt; a) -&gt; (b -&gt; Either a (f b)) -&gt; b -&gt; a
</span><a href="Data.Functor.Foldable.html#elgot"><span class="hs-identifier hs-var hs-var">elgot</span></a></span></span><span> </span><span id="local-6989586621679083077"><span class="annot"><span class="annottext">f a -&gt; a
</span><a href="#local-6989586621679083077"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621679083076"><span class="annot"><span class="annottext">b -&gt; Either a (f b)
</span><a href="#local-6989586621679083076"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; a
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083075"><span class="annot"><span class="annottext">h :: b -&gt; a
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b d c.
ArrowChoice a =&gt;
a b d -&gt; a c d -&gt; a (Either b c) d
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">|||</span></a></span><span> </span><span class="annot"><span class="annottext">f a -&gt; a
</span><a href="#local-6989586621679083077"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; a
</span><a href="#local-6989586621679083075"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Either a (f b)
</span><a href="#local-6989586621679083076"><span class="hs-identifier hs-var">psi</span></a></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="hs-comment">-- | Elgot coalgebras: &lt;http://comonad.com/reader/2008/elgot-coalgebras/&gt;</span><span>
</span><span id="line-861"></span><span id="local-6989586621679084566"><span id="local-6989586621679084567"><span id="local-6989586621679084568"><span class="annot"><a href="Data.Functor.Foldable.html#coelgot"><span class="hs-identifier hs-type">coelgot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084568"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084567"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084568"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084566"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084566"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084567"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084568"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084567"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084567"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084566"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-862"></span><span id="coelgot"><span class="annot"><span class="annottext">coelgot :: forall (f :: * -&gt; *) a b.
Functor f =&gt;
((a, f b) -&gt; b) -&gt; (a -&gt; f a) -&gt; a -&gt; b
</span><a href="Data.Functor.Foldable.html#coelgot"><span class="hs-identifier hs-var hs-var">coelgot</span></a></span></span><span> </span><span id="local-6989586621679083070"><span class="annot"><span class="annottext">(a, f b) -&gt; b
</span><a href="#local-6989586621679083070"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621679083069"><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083069"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083068"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679083068"><span class="annot"><span class="annottext">h :: a -&gt; b
</span><a href="#local-6989586621679083068"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, f b) -&gt; b
</span><a href="#local-6989586621679083070"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083068"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679083069"><span class="hs-identifier hs-var">psi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>
</span><span id="line-864"></span><span class="hs-comment">-- | Zygohistomorphic prepromorphisms:</span><span>
</span><span id="line-865"></span><span class="hs-comment">--</span><span>
</span><span id="line-866"></span><span class="hs-comment">-- A corrected and modernized version of &lt;http://www.haskell.org/haskellwiki/Zygohistomorphic_prepromorphisms&gt;</span><span>
</span><span id="line-867"></span><span id="local-6989586621679084554"><span id="local-6989586621679084556"><span id="local-6989586621679084557"><span class="annot"><a href="Data.Functor.Foldable.html#zygoHistoPrepro"><span class="hs-identifier hs-type">zygoHistoPrepro</span></a></span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084556"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084556"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084555"><span class="annot"><a href="#local-6989586621679084555"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084555"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084555"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../comonad/html/src"><span class="hs-identifier hs-type">EnvT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084556"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier hs-type">Cofree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084554"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084554"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-873"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084554"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-874"></span><span id="zygoHistoPrepro"><span class="annot"><span class="annottext">zygoHistoPrepro :: forall t b a.
(Corecursive t, Recursive t) =&gt;
(Base t b -&gt; b)
-&gt; (forall c. Base t c -&gt; Base t c)
-&gt; (Base t (EnvT b (Cofree (Base t)) a) -&gt; a)
-&gt; t
-&gt; a
</span><a href="Data.Functor.Foldable.html#zygoHistoPrepro"><span class="hs-identifier hs-var hs-var">zygoHistoPrepro</span></a></span></span><span> </span><span id="local-6989586621679083059"><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083059"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679083058"><span class="annot"><span class="annottext">forall c. Base t c -&gt; Base t c
</span><a href="#local-6989586621679083058"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679083057"><span class="annot"><span class="annottext">Base t (EnvT b (Cofree (Base t)) a) -&gt; a
</span><a href="#local-6989586621679083057"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t (w :: * -&gt; *) a.
(Recursive t, Corecursive t, Comonad w) =&gt;
(forall b. Base t (w b) -&gt; w (Base t b))
-&gt; (forall b. Base t b -&gt; Base t b)
-&gt; (Base t (w a) -&gt; a)
-&gt; t
-&gt; a
</span><a href="Data.Functor.Foldable.html#gprepro"><span class="hs-identifier hs-var">gprepro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (w :: * -&gt; *) b a.
(Functor f, Comonad w) =&gt;
(f b -&gt; b)
-&gt; (forall c. f (w c) -&gt; w (f c))
-&gt; f (EnvT b w a)
-&gt; EnvT b w (f a)
</span><a href="Data.Functor.Foldable.html#distZygoT"><span class="hs-identifier hs-var">distZygoT</span></a></span><span> </span><span class="annot"><span class="annottext">Base t b -&gt; b
</span><a href="#local-6989586621679083059"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a.
Functor f =&gt;
f (Cofree f a) -&gt; Cofree f (f a)
</span><a href="Data.Functor.Foldable.html#distHisto"><span class="hs-identifier hs-var">distHisto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall c. Base t c -&gt; Base t c
</span><a href="#local-6989586621679083058"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Base t (EnvT b (Cofree (Base t)) a) -&gt; a
</span><a href="#local-6989586621679083057"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-877"></span><span class="hs-comment">-- Effectful combinators</span><span>
</span><span id="line-878"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="hs-comment">-- | A specialization of 'cata' for effectful folds.</span><span>
</span><span id="line-881"></span><span class="hs-comment">--</span><span>
</span><span id="line-882"></span><span class="hs-comment">-- 'cataA' is the same as 'cata', but with a more specialized type. The only</span><span>
</span><span id="line-883"></span><span class="hs-comment">-- reason it exists is to make it easier to discover how to use this library</span><span>
</span><span id="line-884"></span><span class="hs-comment">-- with effects.</span><span>
</span><span id="line-885"></span><span class="hs-comment">--</span><span>
</span><span id="line-886"></span><span class="hs-comment">-- For our running example, let's improve the output format of our</span><span>
</span><span id="line-887"></span><span class="hs-comment">-- pretty-printer by using indentation. To do so, we will need to keep track of</span><span>
</span><span id="line-888"></span><span class="hs-comment">-- the current indentation level. We will do so using a @Reader Int@ effect.</span><span>
</span><span id="line-889"></span><span class="hs-comment">-- Our recursive positions will thus contain @Reader Int String@ actions, not</span><span>
</span><span id="line-890"></span><span class="hs-comment">-- @String@s. This means we need to run those actions in order to get the</span><span>
</span><span id="line-891"></span><span class="hs-comment">-- results.</span><span>
</span><span id="line-892"></span><span class="hs-comment">--</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-894"></span><span class="hs-comment">-- let pprint2 :: Tree Int -&gt; String</span><span>
</span><span id="line-895"></span><span class="hs-comment">--     pprint2 = flip runReader 0 . cataA go</span><span>
</span><span id="line-896"></span><span class="hs-comment">--       where</span><span>
</span><span id="line-897"></span><span class="hs-comment">--         go :: TreeF Int (Reader Int String)</span><span>
</span><span id="line-898"></span><span class="hs-comment">--            -&gt; Reader Int String</span><span>
</span><span id="line-899"></span><span class="hs-comment">--         go (NodeF i rss) = do</span><span>
</span><span id="line-900"></span><span class="hs-comment">--           -- rss :: [Reader Int String]</span><span>
</span><span id="line-901"></span><span class="hs-comment">--           -- ss  :: [String]</span><span>
</span><span id="line-902"></span><span class="hs-comment">--           ss &lt;- local (+ 2) $ sequence rss</span><span>
</span><span id="line-903"></span><span class="hs-comment">--           indent &lt;- ask</span><span>
</span><span id="line-904"></span><span class="hs-comment">--           let s = replicate indent ' ' ++ &quot;* &quot; ++ show i</span><span>
</span><span id="line-905"></span><span class="hs-comment">--           pure $ intercalate &quot;\n&quot; (s : ss)</span><span>
</span><span id="line-906"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-907"></span><span class="hs-comment">--</span><span>
</span><span id="line-908"></span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint2 myTree</span><span>
</span><span id="line-909"></span><span class="hs-comment">-- * 0</span><span>
</span><span id="line-910"></span><span class="hs-comment">--   * 1</span><span>
</span><span id="line-911"></span><span class="hs-comment">--   * 2</span><span>
</span><span id="line-912"></span><span class="hs-comment">--   * 3</span><span>
</span><span id="line-913"></span><span class="hs-comment">--     * 31</span><span>
</span><span id="line-914"></span><span class="hs-comment">--       * 311</span><span>
</span><span id="line-915"></span><span class="hs-comment">--         * 3111</span><span>
</span><span id="line-916"></span><span class="hs-comment">--         * 3112</span><span>
</span><span id="line-917"></span><span class="hs-comment">--</span><span>
</span><span id="line-918"></span><span class="hs-comment">-- The fact that the recursive positions contain 'Reader' actions instead of</span><span>
</span><span id="line-919"></span><span class="hs-comment">-- 'String's gives us some flexibility. Here, we are able to increase the</span><span>
</span><span id="line-920"></span><span class="hs-comment">-- indentation by running those actions inside a 'local' block. More generally,</span><span>
</span><span id="line-921"></span><span class="hs-comment">-- we can control the order of their side-effects, interleave them with other</span><span>
</span><span id="line-922"></span><span class="hs-comment">-- effects, etc.</span><span>
</span><span id="line-923"></span><span class="hs-comment">--</span><span>
</span><span id="line-924"></span><span class="hs-comment">-- A similar technique is to specialize 'cata' so that the result is a</span><span>
</span><span id="line-925"></span><span class="hs-comment">-- function. This makes it possible for data to flow down in addition to up.</span><span>
</span><span id="line-926"></span><span class="hs-comment">-- In this modified version of our running example, the indentation level flows</span><span>
</span><span id="line-927"></span><span class="hs-comment">-- down from the root to the leaves, while the resulting strings flow up from</span><span>
</span><span id="line-928"></span><span class="hs-comment">-- the leaves to the root.</span><span>
</span><span id="line-929"></span><span class="hs-comment">--</span><span>
</span><span id="line-930"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-931"></span><span class="hs-comment">-- let pprint3 :: Tree Int -&gt; String</span><span>
</span><span id="line-932"></span><span class="hs-comment">--     pprint3 t = cataA go t 0</span><span>
</span><span id="line-933"></span><span class="hs-comment">--       where</span><span>
</span><span id="line-934"></span><span class="hs-comment">--         go :: TreeF Int (Int -&gt; String)</span><span>
</span><span id="line-935"></span><span class="hs-comment">--            -&gt; Int -&gt; String</span><span>
</span><span id="line-936"></span><span class="hs-comment">--         go (NodeF i fs) indent</span><span>
</span><span id="line-937"></span><span class="hs-comment">--             -- fs :: [Int -&gt; String]</span><span>
</span><span id="line-938"></span><span class="hs-comment">--           = let indent' = indent + 2</span><span>
</span><span id="line-939"></span><span class="hs-comment">--                 ss = map (\f -&gt; f indent') fs</span><span>
</span><span id="line-940"></span><span class="hs-comment">--                 s = replicate indent ' ' ++ &quot;* &quot; ++ show i</span><span>
</span><span id="line-941"></span><span class="hs-comment">--             in intercalate &quot;\n&quot; (s : ss)</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-943"></span><span class="hs-comment">--</span><span>
</span><span id="line-944"></span><span class="hs-comment">-- &gt;&gt;&gt; putStrLn $ pprint3 myTree</span><span>
</span><span id="line-945"></span><span class="hs-comment">-- * 0</span><span>
</span><span id="line-946"></span><span class="hs-comment">--   * 1</span><span>
</span><span id="line-947"></span><span class="hs-comment">--   * 2</span><span>
</span><span id="line-948"></span><span class="hs-comment">--   * 3</span><span>
</span><span id="line-949"></span><span class="hs-comment">--     * 31</span><span>
</span><span id="line-950"></span><span class="hs-comment">--       * 311</span><span>
</span><span id="line-951"></span><span class="hs-comment">--         * 3111</span><span>
</span><span id="line-952"></span><span class="hs-comment">--         * 3112</span><span>
</span><span id="line-953"></span><span id="local-6989586621679084548"><span id="local-6989586621679084549"><span id="local-6989586621679084550"><span class="annot"><a href="Data.Functor.Foldable.html#cataA"><span class="hs-identifier hs-type">cataA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084550"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084550"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084549"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084548"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084549"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084548"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084550"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084549"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084548"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-954"></span><span id="cataA"><span class="annot"><span class="annottext">cataA :: forall t (f :: * -&gt; *) a.
Recursive t =&gt;
(Base t (f a) -&gt; f a) -&gt; t -&gt; f a
</span><a href="Data.Functor.Foldable.html#cataA"><span class="hs-identifier hs-var hs-var">cataA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span class="hs-comment">-- | An effectful version of 'hoist'.</span><span>
</span><span id="line-957"></span><span class="hs-comment">--</span><span>
</span><span id="line-958"></span><span class="hs-comment">-- Properties:</span><span>
</span><span id="line-959"></span><span class="hs-comment">--</span><span>
</span><span id="line-960"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-961"></span><span class="hs-comment">-- 'transverse' 'sequenceA' = 'pure'</span><span>
</span><span id="line-962"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-963"></span><span class="hs-comment">--</span><span>
</span><span id="line-964"></span><span class="hs-comment">-- Examples:</span><span>
</span><span id="line-965"></span><span class="hs-comment">--</span><span>
</span><span id="line-966"></span><span class="hs-comment">-- The weird type of first argument allows user to decide</span><span>
</span><span id="line-967"></span><span class="hs-comment">-- an order of sequencing:</span><span>
</span><span id="line-968"></span><span class="hs-comment">--</span><span>
</span><span id="line-969"></span><span class="hs-comment">-- &gt;&gt;&gt; transverse (\x -&gt; print (void x) *&gt; sequence x) &quot;foo&quot; :: IO String</span><span>
</span><span id="line-970"></span><span class="hs-comment">-- Cons 'f' ()</span><span>
</span><span id="line-971"></span><span class="hs-comment">-- Cons 'o' ()</span><span>
</span><span id="line-972"></span><span class="hs-comment">-- Cons 'o' ()</span><span>
</span><span id="line-973"></span><span class="hs-comment">-- Nil</span><span>
</span><span id="line-974"></span><span class="hs-comment">-- &quot;foo&quot;</span><span>
</span><span id="line-975"></span><span class="hs-comment">--</span><span>
</span><span id="line-976"></span><span class="hs-comment">-- &gt;&gt;&gt; transverse (\x -&gt; sequence x &lt;* print (void x)) &quot;foo&quot; :: IO String</span><span>
</span><span id="line-977"></span><span class="hs-comment">-- Nil</span><span>
</span><span id="line-978"></span><span class="hs-comment">-- Cons 'o' ()</span><span>
</span><span id="line-979"></span><span class="hs-comment">-- Cons 'o' ()</span><span>
</span><span id="line-980"></span><span class="hs-comment">-- Cons 'f' ()</span><span>
</span><span id="line-981"></span><span class="hs-comment">-- &quot;foo&quot;</span><span>
</span><span id="line-982"></span><span class="hs-comment">--</span><span>
</span><span id="line-983"></span><span id="local-6989586621679084544"><span id="local-6989586621679084545"><span id="local-6989586621679084546"><span class="annot"><a href="Data.Functor.Foldable.html#transverse"><span class="hs-identifier hs-type">transverse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084546"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084543"><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084546"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084546"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-985"></span><span id="transverse"><span class="annot"><span class="annottext">transverse :: forall s t (f :: * -&gt; *).
(Recursive s, Corecursive t, Functor f) =&gt;
(forall a. Base s (f a) -&gt; f (Base t a)) -&gt; s -&gt; f t
</span><a href="Data.Functor.Foldable.html#transverse"><span class="hs-identifier hs-var hs-var">transverse</span></a></span></span><span> </span><span id="local-6989586621679083045"><span class="annot"><span class="annottext">forall a. Base s (f a) -&gt; f (Base t a)
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><a href="Data.Functor.Foldable.html#cata"><span class="hs-identifier hs-var">cata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Base s (f a) -&gt; f (Base t a)
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span class="hs-comment">-- | A coeffectful version of 'hoist'.</span><span>
</span><span id="line-988"></span><span class="hs-comment">--</span><span>
</span><span id="line-989"></span><span class="hs-comment">-- Properties:</span><span>
</span><span id="line-990"></span><span class="hs-comment">--</span><span>
</span><span id="line-991"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-992"></span><span class="hs-comment">-- 'cotransverse' 'distAna' = 'runIdentity'</span><span>
</span><span id="line-993"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-994"></span><span class="hs-comment">--</span><span>
</span><span id="line-995"></span><span class="hs-comment">-- Examples:</span><span>
</span><span id="line-996"></span><span class="hs-comment">--</span><span>
</span><span id="line-997"></span><span class="hs-comment">-- Stateful transformations:</span><span>
</span><span id="line-998"></span><span class="hs-comment">--</span><span>
</span><span id="line-999"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-1000"></span><span class="hs-comment">-- cotransverse</span><span>
</span><span id="line-1001"></span><span class="hs-comment">--   (\(u, b) -&gt; case b of</span><span>
</span><span id="line-1002"></span><span class="hs-comment">--     Nil -&gt; Nil</span><span>
</span><span id="line-1003"></span><span class="hs-comment">--     Cons x a -&gt; Cons (if u then toUpper x else x) (not u, a))</span><span>
</span><span id="line-1004"></span><span class="hs-comment">--   (True, &quot;foobar&quot;) :: String</span><span>
</span><span id="line-1005"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-1006"></span><span class="hs-comment">-- &quot;FoObAr&quot;</span><span>
</span><span id="line-1007"></span><span class="hs-comment">--</span><span>
</span><span id="line-1008"></span><span class="hs-comment">-- We can implement a variant of `zipWith`</span><span>
</span><span id="line-1009"></span><span class="hs-comment">--</span><span>
</span><span id="line-1010"></span><span class="hs-comment">-- &gt;&gt;&gt; data Pair a = Pair a a deriving Functor</span><span>
</span><span id="line-1011"></span><span class="hs-comment">--</span><span>
</span><span id="line-1012"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-1013"></span><span class="hs-comment">-- let zipWith' :: forall a b. (a -&gt; a -&gt; b) -&gt; [a] -&gt; [a] -&gt; [b]</span><span>
</span><span id="line-1014"></span><span class="hs-comment">--     zipWith' f xs ys = cotransverse g (Pair xs ys) where</span><span>
</span><span id="line-1015"></span><span class="hs-comment">--       g :: Pair (ListF a c) -&gt; ListF b (Pair c)</span><span>
</span><span id="line-1016"></span><span class="hs-comment">--       g (Pair Nil        _)          = Nil</span><span>
</span><span id="line-1017"></span><span class="hs-comment">--       g (Pair _          Nil)        = Nil</span><span>
</span><span id="line-1018"></span><span class="hs-comment">--       g (Pair (Cons x a) (Cons y b)) = Cons (f x y) (Pair a b)</span><span>
</span><span id="line-1019"></span><span class="hs-comment">--     :}</span><span>
</span><span id="line-1020"></span><span class="hs-comment">--</span><span>
</span><span id="line-1021"></span><span class="hs-comment">-- &gt;&gt;&gt; zipWith' (*) [1,2,3] [4,5,6]</span><span>
</span><span id="line-1022"></span><span class="hs-comment">-- [4,10,18]</span><span>
</span><span id="line-1023"></span><span class="hs-comment">--</span><span>
</span><span id="line-1024"></span><span class="hs-comment">-- &gt;&gt;&gt; zipWith' (*) [1,2,3] [4,5,6,8]</span><span>
</span><span id="line-1025"></span><span class="hs-comment">-- [4,10,18]</span><span>
</span><span id="line-1026"></span><span class="hs-comment">--</span><span>
</span><span id="line-1027"></span><span class="hs-comment">-- &gt;&gt;&gt; zipWith' (*) [1,2,3,3] [4,5,6]</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- [4,10,18]</span><span>
</span><span id="line-1029"></span><span class="hs-comment">--</span><span>
</span><span id="line-1030"></span><span id="local-6989586621679084537"><span id="local-6989586621679084538"><span id="local-6989586621679084539"><span class="annot"><a href="Data.Functor.Foldable.html#cotransverse"><span class="hs-identifier hs-type">cotransverse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Recursive"><span class="hs-identifier hs-type">Recursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084539"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Corecursive"><span class="hs-identifier hs-type">Corecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084538"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084537"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1031"></span><span>             </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084536"><span class="annot"><a href="#local-6989586621679084536"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084537"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084539"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084536"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#Base"><span class="hs-identifier hs-type">Base</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084538"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084537"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084536"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084537"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084539"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084538"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-1032"></span><span id="cotransverse"><span class="annot"><span class="annottext">cotransverse :: forall s t (f :: * -&gt; *).
(Recursive s, Corecursive t, Functor f) =&gt;
(forall a. f (Base s a) -&gt; Base t (f a)) -&gt; f s -&gt; t
</span><a href="Data.Functor.Foldable.html#cotransverse"><span class="hs-identifier hs-var hs-var">cotransverse</span></a></span></span><span> </span><span id="local-6989586621679083038"><span class="annot"><span class="annottext">forall a. f (Base s a) -&gt; Base t (f a)
</span><a href="#local-6989586621679083038"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t a. Corecursive t =&gt; (a -&gt; Base t a) -&gt; a -&gt; t
</span><a href="Data.Functor.Foldable.html#ana"><span class="hs-identifier hs-var">ana</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. f (Base s a) -&gt; Base t (f a)
</span><a href="#local-6989586621679083038"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span>
</span><span id="line-1034"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1035"></span><span class="hs-comment">-- GCoerce</span><span>
</span><span id="line-1036"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="hs-keyword">class</span><span> </span><span id="GCoerce"><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-var">GCoerce</span></a></span></span><span> </span><span id="local-6989586621679085063"><span class="annot"><a href="#local-6989586621679085063"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679085062"><span class="annot"><a href="#local-6989586621679085062"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1039"></span><span>    </span><span id="gcoerce"><span class="annot"><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-type">gcoerce</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679085061"><span class="annot"><a href="#local-6989586621679085063"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085061"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085062"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085061"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1040"></span><span>
</span><span id="line-1041"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084522"><span id="local-6989586621679084523"><span id="local-6989586621679084524"><span id="local-6989586621679084525"><span id="local-6989586621679084526"><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084526"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084525"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">M1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084524"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084523"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084526"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">M1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084524"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084522"><span class="hs-identifier hs-type">c'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084525"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1042"></span><span>    </span><span id="local-6989586621679083032"><span class="annot"><span class="annottext">gcoerce :: forall a. M1 i c f a -&gt; M1 i c' g a
</span><a href="#local-6989586621679083032"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">M1</span></a></span><span> </span><span id="local-6989586621679083030"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083030"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k i (c :: Meta) (f :: k -&gt; *) (p :: k). f p -&gt; M1 i c f p
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">M1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083030"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span class="hs-comment">-- R changes to/from P with GHC-7.4.2 at least.</span><span>
</span><span id="line-1045"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084510"><span id="local-6989586621679084511"><span id="local-6989586621679084512"><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084512"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084511"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">K1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084510"><span class="hs-identifier hs-type">j</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084511"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1046"></span><span>    </span><span id="local-6989586621679083027"><span class="annot"><span class="annottext">gcoerce :: forall a. K1 i c a -&gt; K1 j c a
</span><a href="#local-6989586621679083027"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k i c (p :: k). c -&gt; K1 i c p
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">K1</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall k i c (p :: k). K1 i c p -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unK1</span></a></span><span>
</span><span id="line-1047"></span><span>
</span><span id="line-1048"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">U1</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">U1</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1049"></span><span>    </span><span id="local-6989586621679083022"><span class="annot"><span class="annottext">gcoerce :: forall a. U1 a -&gt; U1 a
</span><a href="#local-6989586621679083022"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1050"></span><span>
</span><span id="line-1051"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">V1</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">V1</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1052"></span><span>    </span><span id="local-6989586621679083019"><span class="annot"><span class="annottext">gcoerce :: forall a. V1 a -&gt; V1 a
</span><a href="#local-6989586621679083019"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1053"></span><span>
</span><span id="line-1054"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084493"><span id="local-6989586621679084494"><span id="local-6989586621679084495"><span id="local-6989586621679084496"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084496"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084495"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084494"><span class="hs-identifier hs-type">f'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084493"><span class="hs-identifier hs-type">g'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084496"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:*:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084494"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084495"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:*:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084493"><span class="hs-identifier hs-type">g'</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1055"></span><span>    </span><span id="local-6989586621679083012"><span class="annot"><span class="annottext">gcoerce :: forall a. (:*:) f f' a -&gt; (:*:) g g' a
</span><a href="#local-6989586621679083012"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083011"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083011"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:*:</span></a></span><span> </span><span id="local-6989586621679083009"><span class="annot"><span class="annottext">f' a
</span><a href="#local-6989586621679083009"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083011"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall k (f :: k -&gt; *) (g :: k -&gt; *) (p :: k).
f p -&gt; g p -&gt; (:*:) f g p
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">:*:</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">f' a
</span><a href="#local-6989586621679083009"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084480"><span id="local-6989586621679084481"><span id="local-6989586621679084482"><span id="local-6989586621679084483"><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084483"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084482"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084481"><span class="hs-identifier hs-type">f'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084480"><span class="hs-identifier hs-type">g'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Functor.Foldable.html#GCoerce"><span class="hs-identifier hs-type">GCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084483"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084481"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084482"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:+:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084480"><span class="hs-identifier hs-type">g'</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1058"></span><span>    </span><span id="local-6989586621679083002"><span class="annot"><span class="annottext">gcoerce :: forall a. (:+:) f f' a -&gt; (:+:) g g' a
</span><a href="#local-6989586621679083002"><span class="hs-identifier hs-var hs-var hs-var hs-var">gcoerce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">L1</span></a></span><span> </span><span id="local-6989586621679083000"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083000"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k (f :: k -&gt; *) (g :: k -&gt; *) (p :: k). f p -&gt; (:+:) f g p
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">L1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083000"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1059"></span><span>    </span><span class="annot"><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">R1</span></a></span><span> </span><span id="local-6989586621679082998"><span class="annot"><span class="annottext">f' a
</span><a href="#local-6989586621679082998"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k (f :: k -&gt; *) (g :: k -&gt; *) (p :: k). g p -&gt; (:+:) f g p
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">R1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (g :: * -&gt; *) a. GCoerce f g =&gt; f a -&gt; g a
</span><a href="Data.Functor.Foldable.html#gcoerce"><span class="hs-identifier hs-var">gcoerce</span></a></span><span> </span><span class="annot"><span class="annottext">f' a
</span><a href="#local-6989586621679082998"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1060"></span></pre></body></html>