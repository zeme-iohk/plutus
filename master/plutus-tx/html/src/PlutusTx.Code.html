<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- editorconfig-checker-disable-file</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE RoleAnnotations       #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusTx.Code</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusIR</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PIR</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html"><span class="hs-identifier">PlutusTx.Coverage</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Lift.Instances.html"><span class="hs-identifier">PlutusTx.Lift.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">UntypedPlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSL</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">Flat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">Flat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">unflat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">Flat.Decoder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">DecodeException</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Annotation</span></a></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- We do not use qualified import because the whole module contains off-chain code</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskell</span></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-comment">-- The final type parameter is inferred to be phantom, but we give it a nominal</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- role, since it corresponds to the Haskell type of the program that was compiled into</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- this 'CompiledCodeIn'. It could be okay to give it a representational role, since</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- we compile newtypes the same as their underlying types, but people probably just</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- shouldn't coerce the final parameter regardless, so we play it safe with a nominal role.</span><span>
</span><span id="line-36"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">role</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><span class="hs-identifier">representational</span></span><span> </span><span class="annot"><span class="hs-identifier">representational</span></span><span> </span><span class="annot"><span class="hs-identifier">nominal</span></span><span>
</span><span id="line-37"></span><span class="hs-comment">-- NOTE: any changes to this type must be paralleled by changes</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- in the plugin code that generates values of this type. That is</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- done by code generation so it's not typechecked normally.</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- | A compiled Plutus Tx program. The last type parameter indicates</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- the type of the Haskell expression that was compiled, and</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- hence the type of the compiled code.</span><span>
</span><span id="line-43"></span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- Note: the compiled PLC program does *not* have normalized types,</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- if you want to put it on the chain you must normalize the types first.</span><span>
</span><span id="line-46"></span><span class="hs-keyword">data</span><span> </span><span id="CompiledCodeIn"><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-var">CompiledCodeIn</span></a></span></span><span> </span><span id="local-6989586621679703884"><span class="annot"><a href="#local-6989586621679703884"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621679703883"><span class="annot"><a href="#local-6989586621679703883"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span id="local-6989586621679703882"><span class="annot"><a href="#local-6989586621679703882"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-comment">-- | Serialized UPLC code and possibly serialized PIR code with metadata used for program coverage.</span><span>
</span><span id="line-48"></span><span>    </span><span id="SerializedCode"><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-var">SerializedCode</span></a></span></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-comment">-- | Deserialized UPLC program, and possibly deserialized PIR program with metadata used for program coverage.</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DeserializedCode"><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-var">DeserializedCode</span></a></span></span><span>
</span><span id="line-51"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703884"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703883"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">SrcSpans</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIR.Program</span></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.TyName</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703884"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703883"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">SrcSpans</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- | 'CompiledCodeIn' instantiated with default built-in types and functions.</span><span>
</span><span id="line-56"></span><span class="hs-keyword">type</span><span> </span><span id="CompiledCode"><span class="annot"><a href="PlutusTx.Code.html#CompiledCode"><span class="hs-identifier hs-var">CompiledCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultFun</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- | Apply a compiled function to a compiled argument. Will fail if the versions don't match.</span><span>
</span><span id="line-59"></span><span id="local-6989586621679703918"><span id="local-6989586621679703919"><span id="local-6989586621679703920"><span id="local-6989586621679703924"><span class="annot"><a href="PlutusTx.Code.html#applyCode"><span class="hs-identifier hs-type">applyCode</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703924"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703924"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703920"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703924"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703920"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679703919"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679703918"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703924"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703920"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703919"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703924"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703920"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703918"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-62"></span><span id="applyCode"><span class="annot"><span class="annottext">applyCode :: forall (uni :: * -&gt; *) fun a b.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun (a -&gt; b)
-&gt; CompiledCodeIn uni fun a -&gt; Maybe (CompiledCodeIn uni fun b)
</span><a href="PlutusTx.Code.html#applyCode"><span class="hs-identifier hs-var hs-var">applyCode</span></a></span></span><span> </span><span id="local-6989586621679703750"><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703750"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679703749"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703749"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621679703748"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703748"><span class="hs-identifier hs-var">uplc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a name (uni :: * -&gt; *) fun.
Semigroup a =&gt;
Program name uni fun a
-&gt; Program name uni fun a -&gt; Maybe (Program name uni fun a)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.applyProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703750"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703749"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-comment">-- Probably this could be done with more appropriate combinators, but the</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-comment">-- nested Maybes make it very easy to do the wrong thing here (I did it</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-comment">-- wrong first!), so I wrote it painfully explicitly.</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621679703745"><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="#local-6989586621679703745"><span class="hs-identifier hs-var">pir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a
-&gt; Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var">getPir</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703750"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a
-&gt; Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var">getPir</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703749"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679703743"><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703743"><span class="hs-identifier hs-var">funPir</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679703742"><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703742"><span class="hs-identifier hs-var">argPir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a tyname name (uni :: * -&gt; *) fun.
Semigroup a =&gt;
Program tyname name uni fun a
-&gt; Program tyname name uni fun a
-&gt; Maybe (Program tyname name uni fun a)
</span><span class="hs-identifier hs-var">PIR.applyProgram</span></span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703743"><span class="hs-identifier hs-var">funPir</span></a></span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703742"><span class="hs-identifier hs-var">argPir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679703740"><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703740"><span class="hs-identifier hs-var">appliedPir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703740"><span class="hs-identifier hs-var">appliedPir</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-comment">-- Had PIR for both, but failed to apply them, this should fail</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">-- Missing PIR for one or both, this succeeds but has no PIR</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><span class="annottext">(Maybe (Program TyName Name uni fun SrcSpans),
 Maybe (Program TyName Name uni fun SrcSpans))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
Program NamedDeBruijn uni fun SrcSpans
-&gt; Maybe (Program TyName Name uni fun SrcSpans)
-&gt; CoverageIndex
-&gt; CompiledCodeIn uni fun a
</span><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-var">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703748"><span class="hs-identifier hs-var">uplc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="#local-6989586621679703745"><span class="hs-identifier hs-var">pir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var">getCovIdx</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703750"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var">getCovIdx</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703749"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- | Apply a compiled function to a compiled argument. Will throw if the versions don't match,</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- should only be used in non-production code.</span><span>
</span><span id="line-79"></span><span id="local-6989586621679703874"><span id="local-6989586621679703875"><span id="local-6989586621679703876"><span id="local-6989586621679703877"><span class="annot"><a href="PlutusTx.Code.html#unsafeApplyCode"><span class="hs-identifier hs-type">unsafeApplyCode</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703877"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703877"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703876"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703877"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703876"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679703875"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679703874"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703877"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703876"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703875"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703877"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703876"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703874"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-82"></span><span id="unsafeApplyCode"><span class="annot"><span class="annottext">unsafeApplyCode :: forall (uni :: * -&gt; *) fun a b.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun (a -&gt; b)
-&gt; CompiledCodeIn uni fun a -&gt; CompiledCodeIn uni fun b
</span><a href="PlutusTx.Code.html#unsafeApplyCode"><span class="hs-identifier hs-var hs-var">unsafeApplyCode</span></a></span></span><span> </span><span id="local-6989586621679703716"><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703716"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679703715"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703715"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a b.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun (a -&gt; b)
-&gt; CompiledCodeIn uni fun a -&gt; Maybe (CompiledCodeIn uni fun b)
</span><a href="PlutusTx.Code.html#applyCode"><span class="hs-identifier hs-var">applyCode</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703716"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703715"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679703714"><span class="annot"><span class="annottext">CompiledCodeIn uni fun b
</span><a href="#local-6989586621679703714"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun b
</span><a href="#local-6989586621679703714"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><span class="annottext">Maybe (CompiledCodeIn uni fun b)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpans
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703712"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679703712"><span class="hs-identifier hs-var">ver1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun SrcSpans
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679703716"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-86"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpans
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703711"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679703711"><span class="hs-identifier hs-var">ver2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn uni fun SrcSpans
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703715"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Could not apply CompiledCodeIn, likely a version mismatch between &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679703712"><span class="hs-identifier hs-var">ver1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679703711"><span class="hs-identifier hs-var">ver2</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-comment">-- | The size of a 'CompiledCodeIn', in AST nodes.</span><span>
</span><span id="line-90"></span><span id="local-6989586621679703859"><span id="local-6989586621679703860"><span id="local-6989586621679703861"><span class="annot"><a href="PlutusTx.Code.html#sizePlc"><span class="hs-identifier hs-type">sizePlc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703861"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703861"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703860"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703861"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703860"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703859"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Integer</span></a></span></span></span></span><span>
</span><span id="line-91"></span><span id="sizePlc"><span class="annot"><span class="annottext">sizePlc :: forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Integer
</span><a href="PlutusTx.Code.html#sizePlc"><span class="hs-identifier hs-var hs-var">sizePlc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: * -&gt; *) fun ann.
Program name uni fun ann -&gt; Integer
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.programSize</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">{- Note [Deserializing the AST]
The types suggest that we can fail to deserialize the AST that we embedded in the program.
However, we just did it ourselves, so this should be impossible, and we signal this with an
exception.
-}</span><span>
</span><span id="line-98"></span><span class="hs-keyword">newtype</span><span> </span><span id="ImpossibleDeserialisationFailure"><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpossibleDeserialisationFailure"><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">DecodeException</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679703689"><span id="local-6989586621679703691"><span id="local-6989586621679703693"><span class="annot"><span class="annottext">Show ImpossibleDeserialisationFailure
Typeable ImpossibleDeserialisationFailure
SomeException -&gt; Maybe ImpossibleDeserialisationFailure
ImpossibleDeserialisationFailure -&gt; [Char]
ImpossibleDeserialisationFailure -&gt; SomeException
forall e.
Typeable e
-&gt; Show e
-&gt; (e -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe e)
-&gt; (e -&gt; [Char])
-&gt; Exception e
displayException :: ImpossibleDeserialisationFailure -&gt; [Char]
$cdisplayException :: ImpossibleDeserialisationFailure -&gt; [Char]
fromException :: SomeException -&gt; Maybe ImpossibleDeserialisationFailure
$cfromException :: SomeException -&gt; Maybe ImpossibleDeserialisationFailure
toException :: ImpossibleDeserialisationFailure -&gt; SomeException
$ctoException :: ImpossibleDeserialisationFailure -&gt; SomeException
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Exception</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679703683"><span id="local-6989586621679703686"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>    </span><span id="local-6989586621679703677"><span class="annot"><span class="annottext">show :: ImpossibleDeserialisationFailure -&gt; [Char]
</span><a href="#local-6989586621679703677"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span><span> </span><span id="local-6989586621679703676"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703676"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Failed to deserialise our own program! This is a bug, please report it. Caused by: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703676"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Get the actual Plutus Core program out of a 'CompiledCodeIn'.</span><span>
</span><span id="line-104"></span><span id="local-6989586621679703902"><span id="local-6989586621679703903"><span id="local-6989586621679703904"><span class="annot"><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-type">getPlc</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703904"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703904"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703903"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703904"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703903"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703902"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703904"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703903"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">SrcSpans</span></a></span></span></span></span><span>
</span><span id="line-107"></span><span id="getPlc"><span class="annot"><span class="annottext">getPlc :: forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var hs-var">getPlc</span></a></span></span><span> </span><span id="local-6989586621679703660"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703660"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703660"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span id="local-6989586621679703659"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679703659"><span class="hs-identifier hs-var">plc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a b. (Flat a, AsByteString b) =&gt; b -&gt; Decoded a
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">unflat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BSL.fromStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679703659"><span class="hs-identifier hs-var">plc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679703657"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703657"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a e. Exception e =&gt; e -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException -&gt; ImpossibleDeserialisationFailure
</span><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703657"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679703655"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703655"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703655"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span id="local-6989586621679703654"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703654"><span class="hs-identifier hs-var">plc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><a href="#local-6989586621679703654"><span class="hs-identifier hs-var">plc</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span id="local-6989586621679703825"><span id="local-6989586621679703826"><span id="local-6989586621679703827"><span class="annot"><a href="PlutusTx.Code.html#getPlcNoAnn"><span class="hs-identifier hs-type">getPlcNoAnn</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703827"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703827"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703826"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703827"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703826"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703825"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703827"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703826"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-116"></span><span id="getPlcNoAnn"><span class="annot"><span class="annottext">getPlcNoAnn :: forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlcNoAnn"><span class="hs-identifier hs-var hs-var">getPlcNoAnn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun SrcSpans
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | Get the Plutus IR program, if there is one, out of a 'CompiledCodeIn'.</span><span>
</span><span id="line-119"></span><span id="local-6989586621679703896"><span id="local-6989586621679703897"><span id="local-6989586621679703898"><span class="annot"><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-type">getPir</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703898"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703898"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703897"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703898"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703897"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703896"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIR.Program</span></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PIR.TyName</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PIR.Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703898"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703897"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">SrcSpans</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-122"></span><span id="getPir"><span class="annot"><span class="annottext">getPir :: forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a
-&gt; Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var hs-var">getPir</span></a></span></span><span> </span><span id="local-6989586621679703631"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703631"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703631"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703630"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679703630"><span class="hs-identifier hs-var">pir</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679703630"><span class="hs-identifier hs-var">pir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679703629"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679703629"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a b. (Flat a, AsByteString b) =&gt; b -&gt; Decoded a
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">unflat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BSL.fromStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679703629"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-125"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679703628"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703628"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a e. Exception e =&gt; e -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException -&gt; ImpossibleDeserialisationFailure
</span><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679703628"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-126"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679703627"><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703627"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun SrcSpans
</span><a href="#local-6989586621679703627"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703626"><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="#local-6989586621679703626"><span class="hs-identifier hs-var">pir</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="#local-6989586621679703626"><span class="hs-identifier hs-var">pir</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span id="local-6989586621679703806"><span id="local-6989586621679703807"><span id="local-6989586621679703808"><span class="annot"><a href="PlutusTx.Code.html#getPirNoAnn"><span class="hs-identifier hs-type">getPirNoAnn</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703808"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679703808"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-type">`PLC.Everywhere`</span></a></span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier hs-type">Flat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703807"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703808"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703807"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703806"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIR.Program</span></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PIR.TyName</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PIR.Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703808"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703807"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-133"></span><span id="getPirNoAnn"><span class="annot"><span class="annottext">getPirNoAnn :: forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Maybe (Program TyName Name uni fun ())
</span><a href="PlutusTx.Code.html#getPirNoAnn"><span class="hs-identifier hs-var hs-var">getPirNoAnn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a
-&gt; Maybe (Program TyName Name uni fun SrcSpans)
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var">getPir</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679703879"><span id="local-6989586621679703880"><span id="local-6989586621679703881"><span class="annot"><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-type">getCovIdx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703881"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703880"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679703879"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span></span></span></span><span>
</span><span id="line-136"></span><span id="getCovIdx"><span class="annot"><span class="annottext">getCovIdx :: forall (uni :: * -&gt; *) fun a.
CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var hs-var">getCovIdx</span></a></span></span><span> </span><span id="local-6989586621679703614"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703614"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679703614"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703613"><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679703613"><span class="hs-identifier hs-var">idx</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679703613"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun SrcSpans
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun SrcSpans)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679703612"><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679703612"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679703612"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-139"></span></pre></body></html>